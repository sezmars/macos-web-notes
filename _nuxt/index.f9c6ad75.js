import{_ as M,j as b,k as y,l as x,d as D,y as Je,r as E,n as Xe,z as en,u as nn,A as F,m as $,B as k,C as V,D as O,F as J,E as rn,G as X,t as q,v as Pe,x as Oe,H as Y,I as on,J as ln,K as tn,L as cn,M as le}from"./entry.8bc36c9a.js";import{u as sn}from"./vue.f36acd1f.654e8a4f.js";const fn={},un={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16"},an=x("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"},null,-1),pn=[an];function hn(e,n){return b(),y("svg",un,pn)}const dn=M(fn,[["render",hn]]),_n={},vn={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},gn=x("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"},null,-1),kn=x("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"},null,-1),xn=[gn,kn];function mn(e,n){return b(),y("svg",vn,xn)}const bn=M(_n,[["render",mn]]),yn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-right",viewBox:"0 0 16 16"},Cn=x("path",{"fill-rule":"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),An=x("path",{"fill-rule":"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),wn=[Cn,An],Mn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-left",viewBox:"0 0 16 16"},En=x("path",{"fill-rule":"evenodd",d:"M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),Sn=x("path",{"fill-rule":"evenodd",d:"M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),In=[En,Sn],Tn=D({__name:"Menu",props:{variant:{}},setup(e){return(n,r)=>n.variant==="open"?(b(),y("svg",yn,wn)):(b(),y("svg",Mn,In))}}),Fe=(e,n="onlyTime")=>{const r=new Date(e),i={hour:"2-digit",minute:"2-digit"};n==="fullDate"&&(i.second="2-digit");const o=r.toLocaleTimeString([],i);if(n==="onlyTime")return`${o}`;if(n==="fullDate"){const l=r.toLocaleString("default",{year:"numeric"}),t=r.toLocaleString("default",{month:"2-digit"}),c=r.toLocaleString("default",{day:"2-digit"});return`${l}/${t}/${c} ${o}`}},he=(e,n)=>e.length<=n?e:e.substring(0,n)+"...",$n=e=>{var l,t;const n=/#\s+(.+)/g,r=[];let i;for(;(i=n.exec(e))!==null;)r.push(i[1]);return((l=e[0])==null?void 0:l.trim().includes("#"))?he(r[0],20).trim():(t=he(e,20))==null?void 0:t.trim()};var H=(e=>(e.toggleDeleteModal="toggle-delete-modal",e.toggleMenu="toggle-menu",e.newNote="New Note",e))(H||{});const Nn=(e,n)=>n.some(r=>e instanceof r);let we,Me;function Dn(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bn(){return Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qe=new WeakMap,de=new WeakMap,je=new WeakMap,te=new WeakMap,ke=new WeakMap;function Rn(e){const n=new Promise((r,i)=>{const o=()=>{e.removeEventListener("success",l),e.removeEventListener("error",t)},l=()=>{r(I(e.result)),o()},t=()=>{i(e.error),o()};e.addEventListener("success",l),e.addEventListener("error",t)});return n.then(r=>{r instanceof IDBCursor&&qe.set(r,e)}).catch(()=>{}),ke.set(n,e),n}function zn(e){if(de.has(e))return;const n=new Promise((r,i)=>{const o=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",t),e.removeEventListener("abort",t)},l=()=>{r(),o()},t=()=>{i(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",l),e.addEventListener("error",t),e.addEventListener("abort",t)});de.set(e,n)}let _e={get(e,n,r){if(e instanceof IDBTransaction){if(n==="done")return de.get(e);if(n==="objectStoreNames")return e.objectStoreNames||je.get(e);if(n==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return I(e[n])},set(e,n,r){return e[n]=r,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function Pn(e){_e=e(_e)}function On(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...r){const i=e.call(ce(this),n,...r);return je.set(i,n.sort?n.sort():[n]),I(i)}:Bn().includes(e)?function(...n){return e.apply(ce(this),n),I(qe.get(this))}:function(...n){return I(e.apply(ce(this),n))}}function Fn(e){return typeof e=="function"?On(e):(e instanceof IDBTransaction&&zn(e),Nn(e,Dn())?new Proxy(e,_e):e)}function I(e){if(e instanceof IDBRequest)return Rn(e);if(te.has(e))return te.get(e);const n=Fn(e);return n!==e&&(te.set(e,n),ke.set(n,e)),n}const ce=e=>ke.get(e);function qn(e,n,{blocked:r,upgrade:i,blocking:o,terminated:l}={}){const t=indexedDB.open(e,n),c=I(t);return i&&t.addEventListener("upgradeneeded",s=>{i(I(t.result),s.oldVersion,s.newVersion,I(t.transaction),s)}),r&&t.addEventListener("blocked",s=>r(s.oldVersion,s.newVersion,s)),c.then(s=>{l&&s.addEventListener("close",()=>l()),o&&s.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const jn=["get","getKey","getAll","getAllKeys","count"],Vn=["put","add","delete","clear"],se=new Map;function Ee(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(se.get(n))return se.get(n);const r=n.replace(/FromIndex$/,""),i=n!==r,o=Vn.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(o||jn.includes(r)))return;const l=async function(t,...c){const s=this.transaction(t,o?"readwrite":"readonly");let f=s.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[r](...c),o&&s.done]))[0]};return se.set(n,l),l}Pn(e=>({...e,get:(n,r,i)=>Ee(n,r)||e.get(n,r,i),has:(n,r)=>!!Ee(n,r)||e.has(n,r)}));const j=()=>{const e=qn("mdNotes",1,{upgrade(t){t.createObjectStore("mdNotes",{keyPath:"id"})}});return{getNotes:async()=>{const s=(await e).transaction("mdNotes","readonly").objectStore("mdNotes"),f=await s.getAll();return await(async()=>{if(f.length)return f.sort((a,d)=>new Date(d.updated).getTime()-new Date(a.updated).getTime()),f})()||await s.getAll()},getNote:async t=>await(await e).transaction("mdNotes","readonly").objectStore("mdNotes").get(t),saveNote:async t=>{await(await e).transaction("mdNotes","readwrite").objectStore("mdNotes").put(t)},addNote:async t=>{await(await e).transaction("mdNotes","readwrite").objectStore("mdNotes").add(t)},deleteNote:async t=>{await(await e).transaction("mdNotes","readwrite").objectStore("mdNotes").delete(t)}}},S=Je("store",()=>{const e=E(H.newNote),n=E(""),r=E(""),i=E(!1),o=E([]),l=E(""),t=E(""),c=v=>{const _=o.value.find(g=>g.id===v);_&&(l.value=_.id,e.value=_.title,n.value=_.content,t.value=_.updated)},s=async v=>{await Xe({path:"/",query:v?{note:v}:{}})},f=async()=>{const{getNotes:v}=j();o.value=await v()},u=async()=>{const{saveNote:v,getNotes:_}=j(),g=o.value.find(w=>w.id===h()),m={id:"",title:$n(n.value)||e.value,content:n.value,created:new Date().toISOString(),updated:new Date().toISOString()};g&&(m.id=g.id,m.created=g.created,await v(m)),o.value=await _()},a=async()=>{const{addNote:v,getNotes:_}=j(),g={id:window.crypto.getRandomValues(new Uint32Array(1))[0].toString(16),title:H.newNote,content:" ",created:new Date().toISOString(),updated:new Date().toISOString()};await v(g),o.value=await _(),c(g.id),await s(g.id)},d=()=>o.value&&o.value.length>0,h=()=>en().query.note;return{rawText:n,parsedText:r,noteTitle:e,isPreviewActive:i,currentNoteId:l,currentNoteUpdateDate:t,notes:o,saveNote:u,createNote:a,setCurrentNote:c,navigateCurrentNote:s,getNotesLength:d,getQueryId:h,initStoreNotes:f}}),Hn=()=>nn().$device,Un=e=>(Pe("data-v-08c50f23"),e=e(),Oe(),e),Ln={class:"up d-flex align-items-start flex-column"},Zn={class:"d-flex gap-4"},Gn={key:0,class:"notes__list d-flex flex-column"},Wn=["onClick"],Kn={class:"notes__list-note-info d-flex flex-column gap-3"},Qn={class:"notes__list-note-info-name weight-500 text-overflow-ellipsis"},Yn={class:"d-flex"},Jn={class:"notes__list-note-info-date weight-400 text-overflow-ellipsis"},Xn={class:"notes__list-note-info-date weight-300 text-overflow-ellipsis"},er={key:0,class:"d-flex emty"},nr=Un(()=>x("span",null,"No notes",-1)),rr=[nr],or=D({__name:"SidebarComponent",emits:["toggle-menu","toggle-delete-modal"],setup(e,{emit:n}){const{getNotesLength:r,getQueryId:i}=S(),{isMobile:o}=Hn(),{setCurrentNote:l,navigateCurrentNote:t,createNote:c}=S(),{notes:s,rawText:f}=F(S()),u=()=>{if(f.value)return n("toggle-delete-modal",!0)},a=E(!0),d=h=>a.value=h;return a.value=!o,(h,v)=>{const _=dn,g=bn,m=Tn;return b(),y(J,null,[x("div",{class:X(["sidebar d-flex align-items-start flex-column transition",{hidden:!k(a),open:k(a)}])},[x("div",Ln,[x("div",Zn,[$(_,{class:"cursor-pointer",onClick:k(c)},null,8,["onClick"]),k(i)()&&k(r)()?(b(),V(g,{key:0,class:"cursor-pointer",onClick:u})):O("",!0)]),k(r)()?(b(),y("ul",Gn,[(b(!0),y(J,null,rn(k(s),w=>(b(),y("li",{class:X([k(i)()===w.id?"active":"","notes__list-note d-flex align-items-center gap-6"]),onClick:Z=>{k(l)(w.id),k(t)(w.id)}},[x("div",Kn,[x("span",Qn,q(w.title),1),x("div",Yn,[x("span",Jn,q(("formatDate"in h?h.formatDate:k(Fe))(w.updated))+"   ",1),x("span",Xn,q(("truncateText"in h?h.truncateText:k(he))(w.content,20)),1)])])],10,Wn))),256))])):O("",!0)]),k(r)()?O("",!0):(b(),y("div",er,rr))],2),x("button",{class:"menu",onClick:v[0]||(v[0]=w=>d(!k(a)))},[$(m,{variant:k(a)?"close":"open"},null,8,["variant"])])],64)}}});const ir=M(or,[["__scopeId","data-v-08c50f23"]]),lr={},tr={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-markdown-fill",viewBox:"0 0 16 16"},cr=x("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm11.5 1a.5.5 0 0 0-.5.5v3.793L9.854 8.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L12 9.293V5.5a.5.5 0 0 0-.5-.5zM3.56 7.01h.056l1.428 3.239h.774l1.42-3.24h.056V11h1.073V5.001h-1.2l-1.71 3.894h-.039l-1.71-3.894H2.5V11h1.06V7.01z"},null,-1),sr=[cr];function fr(e,n){return b(),y("svg",tr,sr)}const ur=M(lr,[["render",fr]]),ar={},pr={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},hr=x("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"},null,-1),dr=[hr];function _r(e,n){return b(),y("svg",pr,dr)}const vr=M(ar,[["render",_r]]),gr={},kr={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},xr=x("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"},null,-1),mr=[xr];function br(e,n){return b(),y("svg",kr,mr)}const yr=M(gr,[["render",br]]);const Cr={},Ar={class:"input-icon-wrap"},wr={class:"input-icon"},Mr=x("input",{placeholder:"Search",type:"text",class:"input-with-icon"},null,-1);function Er(e,n){const r=yr;return b(),y("div",Ar,[x("span",wr,[$(r)]),Mr])}const Sr=M(Cr,[["render",Er]]),Ir={class:"w-100 d-flex align-items-center"},Tr={class:"left d-flex align-items-center gap-5"},$r={class:"header position-sticky d-flex align-items-center weight-500"},Nr={class:"right d-flex align-items-center gap-9"},Dr={key:0,class:"d-flex justify-content-center date"},Br=D({__name:"HeaderComponent",props:{dateState:Boolean},setup(e,{emit:n}){const r=e,{currentNoteUpdateDate:i,isPreviewActive:o}=F(S());return E(!1),(l,t)=>{const c=ur,s=vr,f=Sr;return b(),y(J,null,[x("header",Ir,[x("div",Tr,[x("div",$r,[k(o)?(b(),V(c,{key:0,class:"cursor-pointer","is-preview-active":k(o),onClick:t[0]||(t[0]=u=>o.value=!k(o))},null,8,["is-preview-active"])):(b(),V(s,{key:1,class:"cursor-pointer","is-preview-active":k(o),onClick:t[1]||(t[1]=u=>o.value=!k(o))},null,8,["is-preview-active"]))])]),x("div",Nr,[$(f)])]),r.dateState&&k(i)?(b(),y("div",Dr,q(("formatDate"in l?l.formatDate:k(Fe))(k(i),"fullDate")),1)):O("",!0)],64)}}});const Rr=M(Br,[["__scopeId","data-v-86b40ab0"]]),zr={class:"editor d-flex flex-column"},Pr=D({__name:"EditorComponent",setup(e){const{saveNote:n}=S(),{rawText:r}=F(S());return(i,o)=>(b(),y("div",zr,[Y(x("textarea",{"onUpdate:modelValue":o[0]||(o[0]=l=>ln(r)?r.value=l:null),class:"editor__area",onInput:o[1]||(o[1]=l=>k(n)())},null,544),[[on,k(r)]])]))}});const Or=M(Pr,[["__scopeId","data-v-57f7ba30"]]);var W;function Ve(e){return W=W||document.createElement("textarea"),W.innerHTML="&"+e+";",W.value}var Fr=Object.prototype.hasOwnProperty;function qr(e,n){return e?Fr.call(e,n):!1}function He(e){var n=[].slice.call(arguments,1);return n.forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(i){e[i]=r[i]})}}),e}var jr=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function U(e){return e.indexOf("\\")<0?e:e.replace(jr,"$1")}function Ue(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function ve(e){if(e>65535){e-=65536;var n=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(n,r)}return String.fromCharCode(e)}var Vr=/&([a-z#][a-z0-9]{1,31});/gi,Hr=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function Ur(e,n){var r=0,i=Ve(n);return n!==i?i:n.charCodeAt(0)===35&&Hr.test(n)&&(r=n[1].toLowerCase()==="x"?parseInt(n.slice(2),16):parseInt(n.slice(1),10),Ue(r))?ve(r):e}function N(e){return e.indexOf("&")<0?e:e.replace(Vr,Ur)}var Lr=/[&<>"]/,Zr=/[&<>"]/g,Gr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Wr(e){return Gr[e]}function C(e){return Lr.test(e)?e.replace(Zr,Wr):e}var p={};p.blockquote_open=function(){return`<blockquote>
`};p.blockquote_close=function(e,n){return"</blockquote>"+B(e,n)};p.code=function(e,n){return e[n].block?"<pre><code>"+C(e[n].content)+"</code></pre>"+B(e,n):"<code>"+C(e[n].content)+"</code>"};p.fence=function(e,n,r,i,o){var l=e[n],t="",c=r.langPrefix,s="",f,u,a;if(l.params){if(f=l.params.split(/\s+/g),u=f.join(" "),qr(o.rules.fence_custom,f[0]))return o.rules.fence_custom[f[0]](e,n,r,i,o);s=C(N(U(u))),t=' class="'+c+s+'"'}return r.highlight?a=r.highlight.apply(r.highlight,[l.content].concat(f))||C(l.content):a=C(l.content),"<pre><code"+t+">"+a+"</code></pre>"+B(e,n)};p.fence_custom={};p.heading_open=function(e,n){return"<h"+e[n].hLevel+">"};p.heading_close=function(e,n){return"</h"+e[n].hLevel+`>
`};p.hr=function(e,n,r){return(r.xhtmlOut?"<hr />":"<hr>")+B(e,n)};p.bullet_list_open=function(){return`<ul>
`};p.bullet_list_close=function(e,n){return"</ul>"+B(e,n)};p.list_item_open=function(){return"<li>"};p.list_item_close=function(){return`</li>
`};p.ordered_list_open=function(e,n){var r=e[n],i=r.order>1?' start="'+r.order+'"':"";return"<ol"+i+`>
`};p.ordered_list_close=function(e,n){return"</ol>"+B(e,n)};p.paragraph_open=function(e,n){return e[n].tight?"":"<p>"};p.paragraph_close=function(e,n){var r=!(e[n].tight&&n&&e[n-1].type==="inline"&&!e[n-1].content);return(e[n].tight?"":"</p>")+(r?B(e,n):"")};p.link_open=function(e,n,r){var i=e[n].title?' title="'+C(N(e[n].title))+'"':"",o=r.linkTarget?' target="'+r.linkTarget+'"':"";return'<a href="'+C(e[n].href)+'"'+i+o+">"};p.link_close=function(){return"</a>"};p.image=function(e,n,r){var i=' src="'+C(e[n].src)+'"',o=e[n].title?' title="'+C(N(e[n].title))+'"':"",l=' alt="'+(e[n].alt?C(N(U(e[n].alt))):"")+'"',t=r.xhtmlOut?" /":"";return"<img"+i+l+o+t+">"};p.table_open=function(){return`<table>
`};p.table_close=function(){return`</table>
`};p.thead_open=function(){return`<thead>
`};p.thead_close=function(){return`</thead>
`};p.tbody_open=function(){return`<tbody>
`};p.tbody_close=function(){return`</tbody>
`};p.tr_open=function(){return"<tr>"};p.tr_close=function(){return`</tr>
`};p.th_open=function(e,n){var r=e[n];return"<th"+(r.align?' style="text-align:'+r.align+'"':"")+">"};p.th_close=function(){return"</th>"};p.td_open=function(e,n){var r=e[n];return"<td"+(r.align?' style="text-align:'+r.align+'"':"")+">"};p.td_close=function(){return"</td>"};p.strong_open=function(){return"<strong>"};p.strong_close=function(){return"</strong>"};p.em_open=function(){return"<em>"};p.em_close=function(){return"</em>"};p.del_open=function(){return"<del>"};p.del_close=function(){return"</del>"};p.ins_open=function(){return"<ins>"};p.ins_close=function(){return"</ins>"};p.mark_open=function(){return"<mark>"};p.mark_close=function(){return"</mark>"};p.sub=function(e,n){return"<sub>"+C(e[n].content)+"</sub>"};p.sup=function(e,n){return"<sup>"+C(e[n].content)+"</sup>"};p.hardbreak=function(e,n,r){return r.xhtmlOut?`<br />
`:`<br>
`};p.softbreak=function(e,n,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};p.text=function(e,n){return C(e[n].content)};p.htmlblock=function(e,n){return e[n].content};p.htmltag=function(e,n){return e[n].content};p.abbr_open=function(e,n){return'<abbr title="'+C(N(e[n].title))+'">'};p.abbr_close=function(){return"</abbr>"};p.footnote_ref=function(e,n){var r=Number(e[n].id+1).toString(),i="fnref"+r;return e[n].subId>0&&(i+=":"+e[n].subId),'<sup class="footnote-ref"><a href="#fn'+r+'" id="'+i+'">['+r+"]</a></sup>"};p.footnote_block_open=function(e,n,r){var i=r.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return i+`<section class="footnotes">
<ol class="footnotes-list">
`};p.footnote_block_close=function(){return`</ol>
</section>
`};p.footnote_open=function(e,n){var r=Number(e[n].id+1).toString();return'<li id="fn'+r+'"  class="footnote-item">'};p.footnote_close=function(){return`</li>
`};p.footnote_anchor=function(e,n){var r=Number(e[n].id+1).toString(),i="fnref"+r;return e[n].subId>0&&(i+=":"+e[n].subId),' <a href="#'+i+'" class="footnote-backref">↩</a>'};p.dl_open=function(){return`<dl>
`};p.dt_open=function(){return"<dt>"};p.dd_open=function(){return"<dd>"};p.dl_close=function(){return`</dl>
`};p.dt_close=function(){return`</dt>
`};p.dd_close=function(){return`</dd>
`};function Le(e,n){return++n>=e.length-2?n:e[n].type==="paragraph_open"&&e[n].tight&&e[n+1].type==="inline"&&e[n+1].content.length===0&&e[n+2].type==="paragraph_close"&&e[n+2].tight?Le(e,n+2):n}var B=p.getBreak=function(n,r){return r=Le(n,r),r<n.length&&n[r].type==="list_item_close"?"":`
`};function xe(){this.rules=He({},p),this.getBreak=p.getBreak}xe.prototype.renderInline=function(e,n,r){for(var i=this.rules,o=e.length,l=0,t="";o--;)t+=i[e[l].type](e,l++,n,r,this);return t};xe.prototype.render=function(e,n,r){for(var i=this.rules,o=e.length,l=-1,t="";++l<o;)e[l].type==="inline"?t+=this.renderInline(e[l].children,n,r):t+=i[e[l].type](e,l,n,r,this);return t};function A(){this.__rules__=[],this.__cache__=null}A.prototype.__find__=function(e){for(var n=this.__rules__.length,r=-1;n--;)if(this.__rules__[++r].name===e)return r;return-1};A.prototype.__compile__=function(){var e=this,n=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(i){n.indexOf(i)<0&&n.push(i)})}),e.__cache__={},n.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(i){i.enabled&&(r&&i.alt.indexOf(r)<0||e.__cache__[r].push(i.fn))})})};A.prototype.at=function(e,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__[i].fn=n,this.__rules__[i].alt=o.alt||[],this.__cache__=null};A.prototype.before=function(e,n,r,i){var o=this.__find__(e),l=i||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:n,enabled:!0,fn:r,alt:l.alt||[]}),this.__cache__=null};A.prototype.after=function(e,n,r,i){var o=this.__find__(e),l=i||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:n,enabled:!0,fn:r,alt:l.alt||[]}),this.__cache__=null};A.prototype.push=function(e,n,r){var i=r||{};this.__rules__.push({name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};A.prototype.enable=function(e,n){e=Array.isArray(e)?e:[e],n&&this.__rules__.forEach(function(r){r.enabled=!1}),e.forEach(function(r){var i=this.__find__(r);if(i<0)throw new Error("Rules manager: invalid rule name "+r);this.__rules__[i].enabled=!0},this),this.__cache__=null};A.prototype.disable=function(e){e=Array.isArray(e)?e:[e],e.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!1},this),this.__cache__=null};A.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Kr(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}function R(e,n,r,i,o){this.src=e,this.env=i,this.options=r,this.parser=n,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}R.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};R.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level};R.prototype.cacheSet=function(e,n){for(var r=this.cache.length;r<=e;r++)this.cache.push(0);this.cache[e]=n};R.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};function L(e,n){var r,i,o,l=-1,t=e.posMax,c=e.pos,s=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=n+1,e.isInLabel=!0,r=1;e.pos<t;){if(o=e.src.charCodeAt(e.pos),o===91)r++;else if(o===93&&(r--,r===0)){i=!0;break}e.parser.skipToken(e)}return i?(l=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=r-1,e.pos=c,e.isInLabel=s,l}function Qr(e,n,r,i){var o,l,t,c,s,f;if(e.charCodeAt(0)!==42||e.charCodeAt(1)!==91||e.indexOf("]:")===-1||(o=new R(e,n,r,i,[]),l=L(o,1),l<0||e.charCodeAt(l+1)!==58))return-1;for(c=o.posMax,t=l+2;t<c&&o.src.charCodeAt(t)!==10;t++);return s=e.slice(2,l),f=e.slice(l+2,t).trim(),f.length===0?-1:(i.abbreviations||(i.abbreviations={}),typeof i.abbreviations[":"+s]>"u"&&(i.abbreviations[":"+s]=f),t)}function Yr(e){var n=e.tokens,r,i,o,l;if(!e.inlineMode){for(r=1,i=n.length-1;r<i;r++)if(n[r-1].type==="paragraph_open"&&n[r].type==="inline"&&n[r+1].type==="paragraph_close"){for(o=n[r].content;o.length&&(l=Qr(o,e.inline,e.options,e.env),!(l<0));)o=o.slice(l).trim();n[r].content=o,o.length||(n[r-1].tight=!0,n[r+1].tight=!0)}}}function ge(e){var n=N(e);try{n=decodeURI(n)}catch{}return encodeURI(n)}function Ze(e,n){var r,i,o,l=n,t=e.posMax;if(e.src.charCodeAt(n)===60){for(n++;n<t;){if(r=e.src.charCodeAt(n),r===10)return!1;if(r===62)return o=ge(U(e.src.slice(l+1,n))),e.parser.validateLink(o)?(e.pos=n+1,e.linkContent=o,!0):!1;if(r===92&&n+1<t){n+=2;continue}n++}return!1}for(i=0;n<t&&(r=e.src.charCodeAt(n),!(r===32||r<32||r===127));){if(r===92&&n+1<t){n+=2;continue}if(r===40&&(i++,i>1)||r===41&&(i--,i<0))break;n++}return l===n||(o=U(e.src.slice(l,n)),!e.parser.validateLink(o))?!1:(e.linkContent=o,e.pos=n,!0)}function Ge(e,n){var r,i=n,o=e.posMax,l=e.src.charCodeAt(n);if(l!==34&&l!==39&&l!==40)return!1;for(n++,l===40&&(l=41);n<o;){if(r=e.src.charCodeAt(n),r===l)return e.pos=n+1,e.linkContent=U(e.src.slice(i+1,n)),!0;if(r===92&&n+1<o){n+=2;continue}n++}return!1}function We(e){return e.trim().replace(/\s+/g," ").toUpperCase()}function Jr(e,n,r,i){var o,l,t,c,s,f,u,a,d;if(e.charCodeAt(0)!==91||e.indexOf("]:")===-1||(o=new R(e,n,r,i,[]),l=L(o,0),l<0||e.charCodeAt(l+1)!==58))return-1;for(c=o.posMax,t=l+2;t<c&&(s=o.src.charCodeAt(t),!(s!==32&&s!==10));t++);if(!Ze(o,t))return-1;for(u=o.linkContent,t=o.pos,f=t,t=t+1;t<c&&(s=o.src.charCodeAt(t),!(s!==32&&s!==10));t++);for(t<c&&f!==t&&Ge(o,t)?(a=o.linkContent,t=o.pos):(a="",t=f);t<c&&o.src.charCodeAt(t)===32;)t++;return t<c&&o.src.charCodeAt(t)!==10?-1:(d=We(e.slice(1,l)),typeof i.references[d]>"u"&&(i.references[d]={title:a,href:u}),t)}function Xr(e){var n=e.tokens,r,i,o,l;if(e.env.references=e.env.references||{},!e.inlineMode){for(r=1,i=n.length-1;r<i;r++)if(n[r].type==="inline"&&n[r-1].type==="paragraph_open"&&n[r+1].type==="paragraph_close"){for(o=n[r].content;o.length&&(l=Jr(o,e.inline,e.options,e.env),!(l<0));)o=o.slice(l).trim();n[r].content=o,o.length||(n[r-1].tight=!0,n[r+1].tight=!0)}}}function eo(e){var n=e.tokens,r,i,o;for(i=0,o=n.length;i<o;i++)r=n[i],r.type==="inline"&&e.inline.parse(r.content,e.options,e.env,r.children)}function no(e){var n,r,i,o,l,t,c,s,f,u=0,a=!1,d={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(h){return h.type==="footnote_reference_open"?(a=!0,s=[],f=h.label,!1):h.type==="footnote_reference_close"?(a=!1,d[":"+f]=s,!1):(a&&s.push(h),!a)}),!!e.env.footnotes.list)){for(t=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:u++}),n=0,r=t.length;n<r;n++){for(e.tokens.push({type:"footnote_open",id:n,level:u++}),t[n].tokens?(c=[],c.push({type:"paragraph_open",tight:!1,level:u++}),c.push({type:"inline",content:"",level:u,children:t[n].tokens}),c.push({type:"paragraph_close",tight:!1,level:--u})):t[n].label&&(c=d[":"+t[n].label]),e.tokens=e.tokens.concat(c),e.tokens[e.tokens.length-1].type==="paragraph_close"?l=e.tokens.pop():l=null,o=t[n].count>0?t[n].count:1,i=0;i<o;i++)e.tokens.push({type:"footnote_anchor",id:n,subId:i,level:u});l&&e.tokens.push(l),e.tokens.push({type:"footnote_close",level:--u})}e.tokens.push({type:"footnote_block_close",level:--u})}}var Se=` 
()[]'".,!?-`;function fe(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function ro(e){var n,r,i,o,l,t,c,s,f,u,a,d,h=e.tokens;if(e.env.abbreviations){for(e.env.abbrRegExp||(d="(^|["+Se.split("").map(fe).join("")+"])("+Object.keys(e.env.abbreviations).map(function(v){return v.substr(1)}).sort(function(v,_){return _.length-v.length}).map(fe).join("|")+")($|["+Se.split("").map(fe).join("")+"])",e.env.abbrRegExp=new RegExp(d,"g")),u=e.env.abbrRegExp,r=0,i=h.length;r<i;r++)if(h[r].type==="inline"){for(o=h[r].children,n=o.length-1;n>=0;n--)if(l=o[n],l.type==="text"){for(s=0,t=l.content,u.lastIndex=0,f=l.level,c=[];a=u.exec(t);)u.lastIndex>s&&c.push({type:"text",content:t.slice(s,a.index+a[1].length),level:f}),c.push({type:"abbr_open",title:e.env.abbreviations[":"+a[2]],level:f++}),c.push({type:"text",content:a[2],level:f}),c.push({type:"abbr_close",level:--f}),s=u.lastIndex-a[3].length;c.length&&(s<t.length&&c.push({type:"text",content:t.slice(s),level:f}),h[r].children=o=[].concat(o.slice(0,n),c,o.slice(n+1)))}}}}var oo=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,io=/\((c|tm|r|p)\)/ig,lo={c:"©",r:"®",p:"§",tm:"™"};function to(e){return e.indexOf("(")<0?e:e.replace(io,function(n,r){return lo[r.toLowerCase()]})}function co(e){var n,r,i,o,l;if(e.options.typographer){for(l=e.tokens.length-1;l>=0;l--)if(e.tokens[l].type==="inline")for(o=e.tokens[l].children,n=o.length-1;n>=0;n--)r=o[n],r.type==="text"&&(i=r.content,i=to(i),oo.test(i)&&(i=i.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),r.content=i)}}var so=/['"]/,Ie=/['"]/g,fo=/[-\s()\[\]]/,Te="’";function $e(e,n){return n<0||n>=e.length?!1:!fo.test(e[n])}function P(e,n,r){return e.substr(0,n)+r+e.substr(n+1)}function uo(e){var n,r,i,o,l,t,c,s,f,u,a,d,h,v,_,g,m;if(e.options.typographer){for(m=[],_=e.tokens.length-1;_>=0;_--)if(e.tokens[_].type==="inline"){for(g=e.tokens[_].children,m.length=0,n=0;n<g.length;n++)if(r=g[n],!(r.type!=="text"||so.test(r.text))){for(c=g[n].level,h=m.length-1;h>=0&&!(m[h].level<=c);h--);m.length=h+1,i=r.content,l=0,t=i.length;e:for(;l<t&&(Ie.lastIndex=l,o=Ie.exec(i),!!o);){if(s=!$e(i,o.index-1),l=o.index+1,v=o[0]==="'",f=!$e(i,l),!f&&!s){v&&(r.content=P(r.content,o.index,Te));continue}if(a=!f,d=!s,d){for(h=m.length-1;h>=0&&(u=m[h],!(m[h].level<c));h--)if(u.single===v&&m[h].level===c){u=m[h],v?(g[u.token].content=P(g[u.token].content,u.pos,e.options.quotes[2]),r.content=P(r.content,o.index,e.options.quotes[3])):(g[u.token].content=P(g[u.token].content,u.pos,e.options.quotes[0]),r.content=P(r.content,o.index,e.options.quotes[1])),m.length=h;continue e}}a?m.push({token:n,pos:o.index,single:v,level:c}):d&&v&&(r.content=P(r.content,o.index,Te))}}}}}var ue=[["block",Kr],["abbr",Yr],["references",Xr],["inline",eo],["footnote_tail",no],["abbr2",ro],["replacements",co],["smartquotes",uo]];function Ke(){this.options={},this.ruler=new A;for(var e=0;e<ue.length;e++)this.ruler.push(ue[e][0],ue[e][1])}Ke.prototype.process=function(e){var n,r,i;for(i=this.ruler.getRules(""),n=0,r=i.length;n<r;n++)i[n](e)};function z(e,n,r,i,o){var l,t,c,s,f,u,a;for(this.src=e,this.parser=n,this.options=r,this.env=i,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",t=this.src,u=0,a=!1,c=s=u=0,f=t.length;s<f;s++){if(l=t.charCodeAt(s),!a)if(l===32){u++;continue}else a=!0;(l===10||s===f-1)&&(l!==10&&s++,this.bMarks.push(c),this.eMarks.push(s),this.tShift.push(u),a=!1,u=0,c=s+1)}this.bMarks.push(t.length),this.eMarks.push(t.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}z.prototype.isEmpty=function(n){return this.bMarks[n]+this.tShift[n]>=this.eMarks[n]};z.prototype.skipEmptyLines=function(n){for(var r=this.lineMax;n<r&&!(this.bMarks[n]+this.tShift[n]<this.eMarks[n]);n++);return n};z.prototype.skipSpaces=function(n){for(var r=this.src.length;n<r&&this.src.charCodeAt(n)===32;n++);return n};z.prototype.skipChars=function(n,r){for(var i=this.src.length;n<i&&this.src.charCodeAt(n)===r;n++);return n};z.prototype.skipCharsBack=function(n,r,i){if(n<=i)return n;for(;n>i;)if(r!==this.src.charCodeAt(--n))return n+1;return n};z.prototype.getLines=function(n,r,i,o){var l,t,c,s,f,u=n;if(n>=r)return"";if(u+1===r)return t=this.bMarks[u]+Math.min(this.tShift[u],i),c=o?this.eMarks[u]+1:this.eMarks[u],this.src.slice(t,c);for(s=new Array(r-n),l=0;u<r;u++,l++)f=this.tShift[u],f>i&&(f=i),f<0&&(f=0),t=this.bMarks[u]+f,u+1<r||o?c=this.eMarks[u]+1:c=this.eMarks[u],s[l]=this.src.slice(t,c);return s.join("")};function ao(e,n,r){var i,o;if(e.tShift[n]-e.blkIndent<4)return!1;for(o=i=n+1;i<r;){if(e.isEmpty(i)){i++;continue}if(e.tShift[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=i,e.tokens.push({type:"code",content:e.getLines(n,o,4+e.blkIndent,!0),block:!0,lines:[n,e.line],level:e.level}),!0}function po(e,n,r,i){var o,l,t,c,s,f=!1,u=e.bMarks[n]+e.tShift[n],a=e.eMarks[n];if(u+3>a||(o=e.src.charCodeAt(u),o!==126&&o!==96)||(s=u,u=e.skipChars(u,o),l=u-s,l<3)||(t=e.src.slice(u,a).trim(),t.indexOf("`")>=0))return!1;if(i)return!0;for(c=n;c++,!(c>=r||(u=s=e.bMarks[c]+e.tShift[c],a=e.eMarks[c],u<a&&e.tShift[c]<e.blkIndent));)if(e.src.charCodeAt(u)===o&&!(e.tShift[c]-e.blkIndent>=4)&&(u=e.skipChars(u,o),!(u-s<l)&&(u=e.skipSpaces(u),!(u<a)))){f=!0;break}return l=e.tShift[n],e.line=c+(f?1:0),e.tokens.push({type:"fence",params:t,content:e.getLines(n+1,c,l,!0),lines:[n,e.line],level:e.level}),!0}function ho(e,n,r,i){var o,l,t,c,s,f,u,a,d,h,v,_=e.bMarks[n]+e.tShift[n],g=e.eMarks[n];if(_>g||e.src.charCodeAt(_++)!==62||e.level>=e.options.maxNesting)return!1;if(i)return!0;for(e.src.charCodeAt(_)===32&&_++,s=e.blkIndent,e.blkIndent=0,c=[e.bMarks[n]],e.bMarks[n]=_,_=_<g?e.skipSpaces(_):_,l=_>=g,t=[e.tShift[n]],e.tShift[n]=_-e.bMarks[n],a=e.parser.ruler.getRules("blockquote"),o=n+1;o<r&&(_=e.bMarks[o]+e.tShift[o],g=e.eMarks[o],!(_>=g));o++){if(e.src.charCodeAt(_++)===62){e.src.charCodeAt(_)===32&&_++,c.push(e.bMarks[o]),e.bMarks[o]=_,_=_<g?e.skipSpaces(_):_,l=_>=g,t.push(e.tShift[o]),e.tShift[o]=_-e.bMarks[o];continue}if(l)break;for(v=!1,d=0,h=a.length;d<h;d++)if(a[d](e,o,r,!0)){v=!0;break}if(v)break;c.push(e.bMarks[o]),t.push(e.tShift[o]),e.tShift[o]=-1337}for(f=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:u=[n,0],level:e.level++}),e.parser.tokenize(e,n,o),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=f,u[1]=e.line,d=0;d<t.length;d++)e.bMarks[d+n]=c[d],e.tShift[d+n]=t[d];return e.blkIndent=s,!0}function _o(e,n,r,i){var o,l,t,c=e.bMarks[n],s=e.eMarks[n];if(c+=e.tShift[n],c>s||(o=e.src.charCodeAt(c++),o!==42&&o!==45&&o!==95))return!1;for(l=1;c<s;){if(t=e.src.charCodeAt(c++),t!==o&&t!==32)return!1;t===o&&l++}return l<3?!1:(i||(e.line=n+1,e.tokens.push({type:"hr",lines:[n,e.line],level:e.level})),!0)}function Ne(e,n){var r,i,o;return i=e.bMarks[n]+e.tShift[n],o=e.eMarks[n],i>=o||(r=e.src.charCodeAt(i++),r!==42&&r!==45&&r!==43)||i<o&&e.src.charCodeAt(i)!==32?-1:i}function De(e,n){var r,i=e.bMarks[n]+e.tShift[n],o=e.eMarks[n];if(i+1>=o||(r=e.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=e.src.charCodeAt(i++),!(r>=48&&r<=57)){if(r===41||r===46)break;return-1}}return i<o&&e.src.charCodeAt(i)!==32?-1:i}function vo(e,n){var r,i,o=e.level+2;for(r=n+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===o&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].tight=!0,e.tokens[r].tight=!0,r+=2)}function go(e,n,r,i){var o,l,t,c,s,f,u,a,d,h,v,_,g,m,w,Z,re,ye,Ce=!0,oe,G,Ae,ie;if((a=De(e,n))>=0)g=!0;else if((a=Ne(e,n))>=0)g=!1;else return!1;if(e.level>=e.options.maxNesting)return!1;if(_=e.src.charCodeAt(a-1),i)return!0;for(w=e.tokens.length,g?(u=e.bMarks[n]+e.tShift[n],v=Number(e.src.substr(u,a-u-1)),e.tokens.push({type:"ordered_list_open",order:v,lines:re=[n,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:re=[n,0],level:e.level++}),o=n,Z=!1,oe=e.parser.ruler.getRules("list");o<r&&(m=e.skipSpaces(a),d=e.eMarks[o],m>=d?h=1:h=m-a,h>4&&(h=1),h<1&&(h=1),l=a-e.bMarks[o]+h,e.tokens.push({type:"list_item_open",lines:ye=[n,0],level:e.level++}),c=e.blkIndent,s=e.tight,t=e.tShift[n],f=e.parentType,e.tShift[n]=m-e.bMarks[n],e.blkIndent=l,e.tight=!0,e.parentType="list",e.parser.tokenize(e,n,r,!0),(!e.tight||Z)&&(Ce=!1),Z=e.line-n>1&&e.isEmpty(e.line-1),e.blkIndent=c,e.tShift[n]=t,e.tight=s,e.parentType=f,e.tokens.push({type:"list_item_close",level:--e.level}),o=n=e.line,ye[1]=o,m=e.bMarks[n],!(o>=r||e.isEmpty(o)||e.tShift[o]<e.blkIndent));){for(ie=!1,G=0,Ae=oe.length;G<Ae;G++)if(oe[G](e,o,r,!0)){ie=!0;break}if(ie)break;if(g){if(a=De(e,o),a<0)break}else if(a=Ne(e,o),a<0)break;if(_!==e.src.charCodeAt(a-1))break}return e.tokens.push({type:g?"ordered_list_close":"bullet_list_close",level:--e.level}),re[1]=o,e.line=o,Ce&&vo(e,w),!0}function ko(e,n,r,i){var o,l,t,c,s,f=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(f+4>u||e.src.charCodeAt(f)!==91||e.src.charCodeAt(f+1)!==94||e.level>=e.options.maxNesting)return!1;for(c=f+2;c<u;c++){if(e.src.charCodeAt(c)===32)return!1;if(e.src.charCodeAt(c)===93)break}return c===f+2||c+1>=u||e.src.charCodeAt(++c)!==58?!1:(i||(c++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),s=e.src.slice(f+2,c-2),e.env.footnotes.refs[":"+s]=-1,e.tokens.push({type:"footnote_reference_open",label:s,level:e.level++}),o=e.bMarks[n],l=e.tShift[n],t=e.parentType,e.tShift[n]=e.skipSpaces(c)-c,e.bMarks[n]=c,e.blkIndent+=4,e.parentType="footnote",e.tShift[n]<e.blkIndent&&(e.tShift[n]+=e.blkIndent,e.bMarks[n]-=e.blkIndent),e.parser.tokenize(e,n,r,!0),e.parentType=t,e.blkIndent-=4,e.tShift[n]=l,e.bMarks[n]=o,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0)}function xo(e,n,r,i){var o,l,t,c=e.bMarks[n]+e.tShift[n],s=e.eMarks[n];if(c>=s||(o=e.src.charCodeAt(c),o!==35||c>=s))return!1;for(l=1,o=e.src.charCodeAt(++c);o===35&&c<s&&l<=6;)l++,o=e.src.charCodeAt(++c);return l>6||c<s&&o!==32?!1:(i||(s=e.skipCharsBack(s,32,c),t=e.skipCharsBack(s,35,c),t>c&&e.src.charCodeAt(t-1)===32&&(s=t),e.line=n+1,e.tokens.push({type:"heading_open",hLevel:l,lines:[n,e.line],level:e.level}),c<s&&e.tokens.push({type:"inline",content:e.src.slice(c,s).trim(),level:e.level+1,lines:[n,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:l,level:e.level})),!0)}function mo(e,n,r){var i,o,l,t=n+1;return t>=r||e.tShift[t]<e.blkIndent||e.tShift[t]-e.blkIndent>3||(o=e.bMarks[t]+e.tShift[t],l=e.eMarks[t],o>=l)||(i=e.src.charCodeAt(o),i!==45&&i!==61)||(o=e.skipChars(o,i),o=e.skipSpaces(o),o<l)?!1:(o=e.bMarks[n]+e.tShift[n],e.line=t+1,e.tokens.push({type:"heading_open",hLevel:i===61?1:2,lines:[n,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(o,e.eMarks[n]).trim(),level:e.level+1,lines:[n,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:i===61?1:2,level:e.level}),!0)}var Qe={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){Qe[e]=!0});var bo=/^<([a-zA-Z]{1,15})[\s\/>]/,yo=/^<\/([a-zA-Z]{1,15})[\s>]/;function Co(e){var n=e|32;return n>=97&&n<=122}function Ao(e,n,r,i){var o,l,t,c=e.bMarks[n],s=e.eMarks[n],f=e.tShift[n];if(c+=f,!e.options.html||f>3||c+2>=s||e.src.charCodeAt(c)!==60)return!1;if(o=e.src.charCodeAt(c+1),o===33||o===63){if(i)return!0}else if(o===47||Co(o)){if(o===47){if(l=e.src.slice(c,s).match(yo),!l)return!1}else if(l=e.src.slice(c,s).match(bo),!l)return!1;if(Qe[l[1].toLowerCase()]!==!0)return!1;if(i)return!0}else return!1;for(t=n+1;t<e.lineMax&&!e.isEmpty(t);)t++;return e.line=t,e.tokens.push({type:"htmlblock",level:e.level,lines:[n,e.line],content:e.getLines(n,t,0,!0)}),!0}function ae(e,n){var r=e.bMarks[n]+e.blkIndent,i=e.eMarks[n];return e.src.substr(r,i-r)}function wo(e,n,r,i){var o,l,t,c,s,f,u,a,d,h,v;if(n+2>r||(s=n+1,e.tShift[s]<e.blkIndent)||(t=e.bMarks[s]+e.tShift[s],t>=e.eMarks[s])||(o=e.src.charCodeAt(t),o!==124&&o!==45&&o!==58)||(l=ae(e,n+1),!/^[-:| ]+$/.test(l))||(f=l.split("|"),f<=2))return!1;for(a=[],c=0;c<f.length;c++){if(d=f[c].trim(),!d){if(c===0||c===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(d))return!1;d.charCodeAt(d.length-1)===58?a.push(d.charCodeAt(0)===58?"center":"right"):d.charCodeAt(0)===58?a.push("left"):a.push("")}if(l=ae(e,n).trim(),l.indexOf("|")===-1||(f=l.replace(/^\||\|$/g,"").split("|"),a.length!==f.length))return!1;if(i)return!0;for(e.tokens.push({type:"table_open",lines:h=[n,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[n,n+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[n,n+1],level:e.level++}),c=0;c<f.length;c++)e.tokens.push({type:"th_open",align:a[c],lines:[n,n+1],level:e.level++}),e.tokens.push({type:"inline",content:f[c].trim(),lines:[n,n+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:v=[n+2,0],level:e.level++}),s=n+2;s<r&&!(e.tShift[s]<e.blkIndent||(l=ae(e,s).trim(),l.indexOf("|")===-1));s++){for(f=l.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),c=0;c<f.length;c++)e.tokens.push({type:"td_open",align:a[c],level:e.level++}),u=f[c].substring(f[c].charCodeAt(0)===124?1:0,f[c].charCodeAt(f[c].length-1)===124?f[c].length-1:f[c].length).trim(),e.tokens.push({type:"inline",content:u,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),h[1]=v[1]=s,e.line=s,!0}function K(e,n){var r,i,o=e.bMarks[n]+e.tShift[n],l=e.eMarks[n];return o>=l||(i=e.src.charCodeAt(o++),i!==126&&i!==58)||(r=e.skipSpaces(o),o===r)||r>=l?-1:r}function Mo(e,n){var r,i,o=e.level+2;for(r=n+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===o&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].tight=!0,e.tokens[r].tight=!0,r+=2)}function Eo(e,n,r,i){var o,l,t,c,s,f,u,a,d,h,v,_,g,m;if(i)return e.ddIndent<0?!1:K(e,n)>=0;if(u=n+1,e.isEmpty(u)&&++u>r||e.tShift[u]<e.blkIndent||(o=K(e,u),o<0)||e.level>=e.options.maxNesting)return!1;f=e.tokens.length,e.tokens.push({type:"dl_open",lines:s=[n,0],level:e.level++}),t=n,l=u;e:for(;;){for(m=!0,g=!1,e.tokens.push({type:"dt_open",lines:[t,t],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(t,t+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[t,t],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:c=[u,0],level:e.level++}),_=e.tight,d=e.ddIndent,a=e.blkIndent,v=e.tShift[l],h=e.parentType,e.blkIndent=e.ddIndent=e.tShift[l]+2,e.tShift[l]=o-e.bMarks[l],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,l,r,!0),(!e.tight||g)&&(m=!1),g=e.line-l>1&&e.isEmpty(e.line-1),e.tShift[l]=v,e.tight=_,e.parentType=h,e.blkIndent=a,e.ddIndent=d,e.tokens.push({type:"dd_close",level:--e.level}),c[1]=u=e.line,u>=r||e.tShift[u]<e.blkIndent)break e;if(o=K(e,u),o<0)break;l=u}if(u>=r||(t=u,e.isEmpty(t))||e.tShift[t]<e.blkIndent||(l=t+1,l>=r)||(e.isEmpty(l)&&l++,l>=r)||e.tShift[l]<e.blkIndent||(o=K(e,l),o<0))break}return e.tokens.push({type:"dl_close",level:--e.level}),s[1]=u,e.line=u,m&&Mo(e,f),!0}function So(e,n){var r,i,o,l,t,c=n+1,s;if(r=e.lineMax,c<r&&!e.isEmpty(c)){for(s=e.parser.ruler.getRules("paragraph");c<r&&!e.isEmpty(c);c++)if(!(e.tShift[c]-e.blkIndent>3)){for(o=!1,l=0,t=s.length;l<t;l++)if(s[l](e,c,r,!0)){o=!0;break}if(o)break}}return i=e.getLines(n,c,e.blkIndent,!1).trim(),e.line=c,i.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[n,e.line],level:e.level}),e.tokens.push({type:"inline",content:i,level:e.level+1,lines:[n,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}var Q=[["code",ao],["fences",po,["paragraph","blockquote","list"]],["blockquote",ho,["paragraph","blockquote","list"]],["hr",_o,["paragraph","blockquote","list"]],["list",go,["paragraph","blockquote"]],["footnote",ko,["paragraph"]],["heading",xo,["paragraph","blockquote"]],["lheading",mo],["htmlblock",Ao,["paragraph","blockquote"]],["table",wo,["paragraph"]],["deflist",Eo,["paragraph"]],["paragraph",So]];function me(){this.ruler=new A;for(var e=0;e<Q.length;e++)this.ruler.push(Q[e][0],Q[e][1],{alt:(Q[e][2]||[]).slice()})}me.prototype.tokenize=function(e,n,r){for(var i=this.ruler.getRules(""),o=i.length,l=n,t=!1,c,s;l<r&&(e.line=l=e.skipEmptyLines(l),!(l>=r||e.tShift[l]<e.blkIndent));){for(s=0;s<o&&(c=i[s](e,l,r,!1),!c);s++);if(e.tight=!t,e.isEmpty(e.line-1)&&(t=!0),l=e.line,l<r&&e.isEmpty(l)){if(t=!0,l++,l<r&&e.parentType==="list"&&e.isEmpty(l))break;e.line=l}}};var Io=/[\n\t]/g,To=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,$o=/\u00a0/g;me.prototype.parse=function(e,n,r,i){var o,l=0,t=0;if(!e)return[];e=e.replace($o," "),e=e.replace(To,`
`),e.indexOf("	")>=0&&(e=e.replace(Io,function(c,s){var f;return e.charCodeAt(s)===10?(l=s+1,t=0,c):(f="    ".slice((s-l-t)%4),t=s-l+1,f)})),o=new z(e,this,n,r,i),this.tokenize(o,o.line,o.lineMax)};function No(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function Do(e,n){for(var r=e.pos;r<e.posMax&&!No(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}function Bo(e,n){var r,i,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;if(r=e.pending.length-1,i=e.posMax,!n)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){for(var l=r-2;l>=0;l--)if(e.pending.charCodeAt(l)!==32){e.pending=e.pending.substring(0,l+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(o++;o<i&&e.src.charCodeAt(o)===32;)o++;return e.pos=o,!0}var be=[];for(var Be=0;Be<256;Be++)be.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){be[e.charCodeAt(0)]=1});function Ro(e,n){var r,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(r=e.src.charCodeAt(i),r<256&&be[r]!==0)return n||(e.pending+=e.src[i]),e.pos+=2,!0;if(r===10){for(n||e.push({type:"hardbreak",level:e.level}),i++;i<o&&e.src.charCodeAt(i)===32;)i++;return e.pos=i,!0}}return n||(e.pending+="\\"),e.pos++,!0}function zo(e,n){var r,i,o,l,t,c=e.pos,s=e.src.charCodeAt(c);if(s!==96)return!1;for(r=c,c++,i=e.posMax;c<i&&e.src.charCodeAt(c)===96;)c++;for(o=e.src.slice(r,c),l=t=c;(l=e.src.indexOf("`",t))!==-1;){for(t=l+1;t<i&&e.src.charCodeAt(t)===96;)t++;if(t-l===o.length)return n||e.push({type:"code",content:e.src.slice(c,l).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=t,!0}return n||(e.pending+=o),e.pos+=o.length,!0}function Po(e,n){var r,i,o,l=e.posMax,t=e.pos,c,s;if(e.src.charCodeAt(t)!==126||n||t+4>=l||e.src.charCodeAt(t+1)!==126||e.level>=e.options.maxNesting||(c=t>0?e.src.charCodeAt(t-1):-1,s=e.src.charCodeAt(t+2),c===126)||s===126||s===32||s===10)return!1;for(i=t+2;i<l&&e.src.charCodeAt(i)===126;)i++;if(i>t+3)return e.pos+=i-t,n||(e.pending+=e.src.slice(t,i)),!0;for(e.pos=t+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===126&&e.src.charCodeAt(e.pos+1)===126&&(c=e.src.charCodeAt(e.pos-1),s=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,s!==126&&c!==126&&(c!==32&&c!==10?o--:s!==32&&s!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=t+2,n||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=t,!1)}function Oo(e,n){var r,i,o,l=e.posMax,t=e.pos,c,s;if(e.src.charCodeAt(t)!==43||n||t+4>=l||e.src.charCodeAt(t+1)!==43||e.level>=e.options.maxNesting||(c=t>0?e.src.charCodeAt(t-1):-1,s=e.src.charCodeAt(t+2),c===43)||s===43||s===32||s===10)return!1;for(i=t+2;i<l&&e.src.charCodeAt(i)===43;)i++;if(i!==t+2)return e.pos+=i-t,n||(e.pending+=e.src.slice(t,i)),!0;for(e.pos=t+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===43&&e.src.charCodeAt(e.pos+1)===43&&(c=e.src.charCodeAt(e.pos-1),s=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,s!==43&&c!==43&&(c!==32&&c!==10?o--:s!==32&&s!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=t+2,n||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=t,!1)}function Fo(e,n){var r,i,o,l=e.posMax,t=e.pos,c,s;if(e.src.charCodeAt(t)!==61||n||t+4>=l||e.src.charCodeAt(t+1)!==61||e.level>=e.options.maxNesting||(c=t>0?e.src.charCodeAt(t-1):-1,s=e.src.charCodeAt(t+2),c===61)||s===61||s===32||s===10)return!1;for(i=t+2;i<l&&e.src.charCodeAt(i)===61;)i++;if(i!==t+2)return e.pos+=i-t,n||(e.pending+=e.src.slice(t,i)),!0;for(e.pos=t+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===61&&e.src.charCodeAt(e.pos+1)===61&&(c=e.src.charCodeAt(e.pos-1),s=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,s!==61&&c!==61&&(c!==32&&c!==10?o--:s!==32&&s!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=t+2,n||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=t,!1)}function Re(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function ze(e,n){var r=n,i,o,l,t=!0,c=!0,s=e.posMax,f=e.src.charCodeAt(n);for(i=n>0?e.src.charCodeAt(n-1):-1;r<s&&e.src.charCodeAt(r)===f;)r++;return r>=s&&(t=!1),l=r-n,l>=4?t=c=!1:(o=r<s?e.src.charCodeAt(r):-1,(o===32||o===10)&&(t=!1),(i===32||i===10)&&(c=!1),f===95&&(Re(i)&&(t=!1),Re(o)&&(c=!1))),{can_open:t,can_close:c,delims:l}}function qo(e,n){var r,i,o,l,t,c,s,f=e.posMax,u=e.pos,a=e.src.charCodeAt(u);if(a!==95&&a!==42||n)return!1;if(s=ze(e,u),r=s.delims,!s.can_open)return e.pos+=r,n||(e.pending+=e.src.slice(u,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=u+r,c=[r];e.pos<f;){if(e.src.charCodeAt(e.pos)===a){if(s=ze(e,e.pos),i=s.delims,s.can_close){for(l=c.pop(),t=i;l!==t;){if(t<l){c.push(l-t);break}if(t-=l,c.length===0)break;e.pos+=l,l=c.pop()}if(c.length===0){r=l,o=!0;break}e.pos+=i;continue}s.can_open&&c.push(i),e.pos+=i;continue}e.parser.skipToken(e)}return o?(e.posMax=e.pos,e.pos=u+r,n||((r===2||r===3)&&e.push({type:"strong_open",level:e.level++}),(r===1||r===3)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(r===1||r===3)&&e.push({type:"em_close",level:--e.level}),(r===2||r===3)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+r,e.posMax=f,!0):(e.pos=u,!1)}var jo=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Vo(e,n){var r,i,o=e.posMax,l=e.pos;if(e.src.charCodeAt(l)!==126||n||l+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=l+1;e.pos<o;){if(e.src.charCodeAt(e.pos)===126){r=!0;break}e.parser.skipToken(e)}return!r||l+1===e.pos||(i=e.src.slice(l+1,e.pos),i.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=l,!1):(e.posMax=e.pos,e.pos=l+1,n||e.push({type:"sub",level:e.level,content:i.replace(jo,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}var Ho=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Uo(e,n){var r,i,o=e.posMax,l=e.pos;if(e.src.charCodeAt(l)!==94||n||l+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=l+1;e.pos<o;){if(e.src.charCodeAt(e.pos)===94){r=!0;break}e.parser.skipToken(e)}return!r||l+1===e.pos||(i=e.src.slice(l+1,e.pos),i.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=l,!1):(e.posMax=e.pos,e.pos=l+1,n||e.push({type:"sup",level:e.level,content:i.replace(Ho,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}function Lo(e,n){var r,i,o,l,t,c,s,f,u=!1,a=e.pos,d=e.posMax,h=e.pos,v=e.src.charCodeAt(h);if(v===33&&(u=!0,v=e.src.charCodeAt(++h)),v!==91||e.level>=e.options.maxNesting||(r=h+1,i=L(e,h),i<0))return!1;if(c=i+1,c<d&&e.src.charCodeAt(c)===40){for(c++;c<d&&(f=e.src.charCodeAt(c),!(f!==32&&f!==10));c++);if(c>=d)return!1;for(h=c,Ze(e,c)?(l=e.linkContent,c=e.pos):l="",h=c;c<d&&(f=e.src.charCodeAt(c),!(f!==32&&f!==10));c++);if(c<d&&h!==c&&Ge(e,c))for(t=e.linkContent,c=e.pos;c<d&&(f=e.src.charCodeAt(c),!(f!==32&&f!==10));c++);else t="";if(c>=d||e.src.charCodeAt(c)!==41)return e.pos=a,!1;c++}else{if(e.linkLevel>0)return!1;for(;c<d&&(f=e.src.charCodeAt(c),!(f!==32&&f!==10));c++);if(c<d&&e.src.charCodeAt(c)===91&&(h=c+1,c=L(e,c),c>=0?o=e.src.slice(h,c++):c=h-1),o||(typeof o>"u"&&(c=i+1),o=e.src.slice(r,i)),s=e.env.references[We(o)],!s)return e.pos=a,!1;l=s.href,t=s.title}return n||(e.pos=r,e.posMax=i,u?e.push({type:"image",src:l,title:t,alt:e.src.substr(r,i-r),level:e.level}):(e.push({type:"link_open",href:l,title:t,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=c,e.posMax=d,!0}function Zo(e,n){var r,i,o,l,t=e.posMax,c=e.pos;return c+2>=t||e.src.charCodeAt(c)!==94||e.src.charCodeAt(c+1)!==91||e.level>=e.options.maxNesting||(r=c+2,i=L(e,c+1),i<0)?!1:(n||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),o=e.env.footnotes.list.length,e.pos=r,e.posMax=i,e.push({type:"footnote_ref",id:o,level:e.level}),e.linkLevel++,l=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[o]={tokens:e.tokens.splice(l)},e.linkLevel--),e.pos=i+1,e.posMax=t,!0)}function Go(e,n){var r,i,o,l,t=e.posMax,c=e.pos;if(c+3>t||!e.env.footnotes||!e.env.footnotes.refs||e.src.charCodeAt(c)!==91||e.src.charCodeAt(c+1)!==94||e.level>=e.options.maxNesting)return!1;for(i=c+2;i<t;i++){if(e.src.charCodeAt(i)===32||e.src.charCodeAt(i)===10)return!1;if(e.src.charCodeAt(i)===93)break}return i===c+2||i>=t||(i++,r=e.src.slice(c+2,i-1),typeof e.env.footnotes.refs[":"+r]>"u")?!1:(n||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+r]<0?(o=e.env.footnotes.list.length,e.env.footnotes.list[o]={label:r,count:0},e.env.footnotes.refs[":"+r]=o):o=e.env.footnotes.refs[":"+r],l=e.env.footnotes.list[o].count,e.env.footnotes.list[o].count++,e.push({type:"footnote_ref",id:o,subId:l,level:e.level})),e.pos=i,e.posMax=t,!0)}var Wo=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],Ko=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Qo=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function Yo(e,n){var r,i,o,l,t,c=e.pos;return e.src.charCodeAt(c)!==60||(r=e.src.slice(c),r.indexOf(">")<0)?!1:(i=r.match(Qo),i?Wo.indexOf(i[1].toLowerCase())<0||(l=i[0].slice(1,-1),t=ge(l),!e.parser.validateLink(l))?!1:(n||(e.push({type:"link_open",href:t,level:e.level}),e.push({type:"text",content:l,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=i[0].length,!0):(o=r.match(Ko),o?(l=o[0].slice(1,-1),t=ge("mailto:"+l),e.parser.validateLink(t)?(n||(e.push({type:"link_open",href:t,level:e.level}),e.push({type:"text",content:l,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=o[0].length,!0):!1):!1))}function ee(e,n){return e=e.source,n=n||"",function r(i,o){return i?(o=o.source||o,e=e.replace(i,o),r):new RegExp(e,n)}}var Jo=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,Xo=/[^"'=<>`\x00-\x20]+/,ei=/'[^']*'/,ni=/"[^"]*"/,ri=ee(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",Xo)("single_quoted",ei)("double_quoted",ni)(),oi=ee(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",Jo)("attr_value",ri)(),ii=ee(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",oi)(),li=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,ti=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,ci=/<[?].*?[?]>/,si=/<![A-Z]+\s+[^>]*>/,fi=/<!\[CDATA\[[\s\S]*?\]\]>/,ui=ee(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",ii)("close_tag",li)("comment",ti)("processing",ci)("declaration",si)("cdata",fi)();function ai(e){var n=e|32;return n>=97&&n<=122}function pi(e,n){var r,i,o,l=e.pos;return!e.options.html||(o=e.posMax,e.src.charCodeAt(l)!==60||l+2>=o)||(r=e.src.charCodeAt(l+1),r!==33&&r!==63&&r!==47&&!ai(r))||(i=e.src.slice(l).match(ui),!i)?!1:(n||e.push({type:"htmltag",content:e.src.slice(l,l+i[0].length),level:e.level}),e.pos+=i[0].length,!0)}var hi=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,di=/^&([a-z][a-z0-9]{1,31});/i;function _i(e,n){var r,i,o,l=e.pos,t=e.posMax;if(e.src.charCodeAt(l)!==38)return!1;if(l+1<t){if(r=e.src.charCodeAt(l+1),r===35){if(o=e.src.slice(l).match(hi),o)return n||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=Ue(i)?ve(i):ve(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(l).match(di),o){var c=Ve(o[1]);if(o[1]!==c)return n||(e.pending+=c),e.pos+=o[0].length,!0}}return n||(e.pending+="&"),e.pos++,!0}var pe=[["text",Do],["newline",Bo],["escape",Ro],["backticks",zo],["del",Po],["ins",Oo],["mark",Fo],["emphasis",qo],["sub",Vo],["sup",Uo],["links",Lo],["footnote_inline",Zo],["footnote_ref",Go],["autolink",Yo],["htmltag",pi],["entity",_i]];function ne(){this.ruler=new A;for(var e=0;e<pe.length;e++)this.ruler.push(pe[e][0],pe[e][1]);this.validateLink=vi}ne.prototype.skipToken=function(e){var n=this.ruler.getRules(""),r=n.length,i=e.pos,o,l;if((l=e.cacheGet(i))>0){e.pos=l;return}for(o=0;o<r;o++)if(n[o](e,!0)){e.cacheSet(i,e.pos);return}e.pos++,e.cacheSet(i,e.pos)};ne.prototype.tokenize=function(e){for(var n=this.ruler.getRules(""),r=n.length,i=e.posMax,o,l;e.pos<i;){for(l=0;l<r&&(o=n[l](e,!1),!o);l++);if(o){if(e.pos>=i)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};ne.prototype.parse=function(e,n,r,i){var o=new R(e,this,n,r,i);this.tokenize(o)};function vi(e){var n=["vbscript","javascript","file","data"],r=e.trim().toLowerCase();return r=N(r),!(r.indexOf(":")!==-1&&n.indexOf(r.split(":")[0])!==-1)}var gi={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},ki={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},xi={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},mi={default:gi,full:ki,commonmark:xi};function Ye(e,n,r){this.src=n,this.env=r,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function T(e,n){typeof e!="string"&&(n=e,e="default"),n&&n.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new ne,this.block=new me,this.core=new Ke,this.renderer=new xe,this.ruler=new A,this.options={},this.configure(mi[e]),this.set(n||{})}T.prototype.set=function(e){He(this.options,e)};T.prototype.configure=function(e){var n=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&n[r].ruler.enable(e.components[r].rules,!0)})};T.prototype.use=function(e,n){return e(this,n),this};T.prototype.parse=function(e,n){var r=new Ye(this,e,n);return this.core.process(r),r.tokens};T.prototype.render=function(e,n){return n=n||{},this.renderer.render(this.parse(e,n),this.options,n)};T.prototype.parseInline=function(e,n){var r=new Ye(this,e,n);return r.inlineMode=!0,this.core.process(r),r.tokens};T.prototype.renderInline=function(e,n){return n=n||{},this.renderer.render(this.parseInline(e,n),this.options,n)};const bi={class:"preview d-flex flex-column"},yi=["innerHTML"],Ci=D({__name:"PreviewComponent",setup(e){const{rawText:n,parsedText:r,isPreviewActive:i}=F(S()),o=new T({html:!0,breaks:!0,linkify:!0,typographer:!0}),l=t=>o.render(t);return tn(()=>{r.value=l(n.value)}),(t,c)=>(b(),y("div",bi,[x("div",{class:X(["preview__area",{active:k(i)}]),innerHTML:k(r)},null,10,yi)]))}});const Ai=M(Ci,[["__scopeId","data-v-7adbfa2f"]]),wi=e=>(Pe("data-v-f2a9ccef"),e=e(),Oe(),e),Mi={class:"delete__modal d-flex flex-column w-100 h-100 position-absolute"},Ei=wi(()=>x("h4",{class:"weight-700"}," Delete this note? ",-1)),Si={class:"weight-400"},Ii=D({__name:"DeleteModalComponent",setup(e,{emit:n}){const{navigateCurrentNote:r}=S(),{noteTitle:i,rawText:o,notes:l,currentNoteId:t}=F(S()),c=f=>n(H.toggleDeleteModal,f),s=async()=>{const{deleteNote:f,getNotes:u}=j();await f(t.value),l.value=await u(),i.value=H.newNote,o.value="",c(!1),await r("")};return(f,u)=>(b(),y(J,null,[x("div",Mi,[Ei,x("p",Si," Are you sure you want to delete the ‘"+q(k(i))+"’ note and its contents? This action cannot be reversed. ",1),x("button",{class:"w-100 weight-400",onClick:s}," Confirm & Delete ")]),x("div",{class:"modal-overlay",onClick:u[0]||(u[0]=a=>c(!1))})],64))}});const Ti=M(Ii,[["__scopeId","data-v-f2a9ccef"]]),$i={class:"home d-flex"},Ni={class:"home__container"},Di=D({__name:"index",setup(e){const{getQueryId:n,getNotesLength:r,navigateCurrentNote:i,initStoreNotes:o,setCurrentNote:l}=S();sn({title:"MacOS Note App",meta:[{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"},{name:"description",content:"Home page of MacOS Note App"}]});const t=E(!1),c=u=>t.value=u,{isPreviewActive:s}=F(S()),f=E(!0);return cn(async()=>{const{getNotes:u}=j();(await u()).length?(await o(),l(n())):await i("")}),(u,a)=>{const d=ir,h=Rr,v=Or,_=Ai,g=Ti;return b(),y("div",$i,[Y($(d,{onToggleDeleteModal:a[0]||(a[0]=m=>c(!0))},null,512),[[le,k(f)]]),x("div",Ni,[x("div",{class:X(["home__container-main d-flex flex-column",{main:!k(s)}])},[k(n)()&&k(r)()?(b(),V(h,{key:0,"date-state":!k(s)},null,8,["date-state"])):O("",!0),Y($(v,null,null,512),[[le,!k(s)]]),Y($(_,null,null,512),[[le,k(s)]])],2)]),k(t)?(b(),V(g,{key:0,onToggleDeleteModal:c})):O("",!0)])}}});const zi=M(Di,[["__scopeId","data-v-20818fec"]]);export{zi as default};

import{_ as I,j as b,k as y,l as m,d as $,y as Ie,r as A,z as Qe,A as Ke,n as $e,u as We,B as F,m as N,C as x,D as L,E as q,F as Te,G as Ye,H as ne,t as U,v as Ne,x as De,o as ze,I as Z,J as Re,K as Be,L as Je,M as Xe,N as se}from"./entry.6e2b2ae7.js";import{u as en}from"./vue.f36acd1f.64dbe16a.js";const nn={},rn={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16"},on=m("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"},null,-1),ln=[on];function tn(e,n){return b(),y("svg",rn,ln)}const cn=I(nn,[["render",tn]]),sn={},un={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},fn=m("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"},null,-1),an=m("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"},null,-1),pn=[fn,an];function hn(e,n){return b(),y("svg",un,pn)}const dn=I(sn,[["render",hn]]),_n={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-right",viewBox:"0 0 16 16"},vn=m("path",{"fill-rule":"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),kn=m("path",{"fill-rule":"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),xn=[vn,kn],gn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-left",viewBox:"0 0 16 16"},mn=m("path",{"fill-rule":"evenodd",d:"M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),bn=m("path",{"fill-rule":"evenodd",d:"M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),yn=[mn,bn],An=$({__name:"Menu",props:{variant:{}},setup(e){return(n,r)=>n.variant==="open"?(b(),y("svg",_n,xn)):(b(),y("svg",gn,yn))}});let Y=null;const re=()=>Y?Promise.resolve(Y):new Promise((e,n)=>{const r=indexedDB.open("mdNotes",1);r.onupgradeneeded=i=>{var l;((l=i.target)==null?void 0:l.result).createObjectStore("mdNotes",{keyPath:"id"})},r.onsuccess=i=>{Y=i.target.result,e(Y)},r.onerror=i=>{n(i.target.error)}}),V=async()=>{const r=(await re()).transaction("mdNotes","readonly").objectStore("mdNotes");return new Promise((i,o)=>{const l=r.getAll();l.onsuccess=c=>{const t=c.target.result;t.length&&t.sort((s,u)=>new Date(u.updated).getTime()-new Date(s.updated).getTime()),i(t)},l.onerror=c=>{o(c.target.error)}})},wn=async e=>{const i=(await re()).transaction("mdNotes","readwrite").objectStore("mdNotes");return new Promise((o,l)=>{const c=i.put(e);c.onsuccess=()=>{o()},c.onerror=t=>{l(t.target.error)}})},Cn=async e=>{const i=(await re()).transaction("mdNotes","readwrite").objectStore("mdNotes");return new Promise((o,l)=>{const c=i.add(e);c.onsuccess=()=>{o()},c.onerror=t=>{l(t.target.error)}})},Mn=async e=>{const i=(await re()).transaction("mdNotes","readwrite").objectStore("mdNotes");return new Promise((o,l)=>{const c=i.delete(e);c.onsuccess=()=>{o()},c.onerror=t=>{l(t.target.error)}})},K=()=>{const e=Ie(),n=A(e.query.note);return Qe(()=>e.query,r=>{n.value=r.note}),{id:n}},Pe=(e,n="onlyTime")=>{const r=new Date(e),i={hour:"2-digit",minute:"2-digit"};n==="fullDate"&&(i.second="2-digit");const o=r.toLocaleTimeString([],i);if(n==="onlyTime")return`${o}`;if(n==="fullDate"){const l=r.toLocaleString("default",{year:"numeric"}),c=r.toLocaleString("default",{month:"2-digit"}),t=r.toLocaleString("default",{day:"2-digit"});return`${l}/${c}/${t} ${o}`}},he=(e,n)=>e.length<=n?e:e.substring(0,n)+"...",Sn=e=>{var l,c;const n=/#\s+(.+)/g,r=[];let i;for(;(i=n.exec(e))!==null;)r.push(i[1]);return((l=e[0])==null?void 0:l.trim().includes("#"))?he(r[0],20).trim():(c=he(e,20))==null?void 0:c.trim()};var D=(e=>(e.toggleDeleteModal="toggle-delete-modal",e.toggleMenu="toggle-menu",e.addNewNote="add-new-note",e.newNote="New Note",e))(D||{});const M=Ke("store",()=>{const e=A(D.newNote),n=A(""),r=A(""),i=A(!1),o=A([]),l=A(""),c=A(""),t=_=>{const v=o.value.find(g=>g.id===_);v&&(l.value=v.id,e.value=v.title,n.value=v.content,c.value=v.updated)},s=async()=>{o.value=await V()},u=async _=>{const v=_.toLowerCase().trim(),g=await V();o.value=g.filter(C=>(C.title.toLowerCase().includes(v)||C.content.toLowerCase().includes(v))&&C)},f=async()=>{const{id:_}=K(),v=o.value.find(C=>C.id===_.value),g={id:"",title:Sn(n.value)||e.value,content:n.value,created:new Date().toISOString(),updated:new Date().toISOString()};v&&(g.id=v.id,g.created=v.created,await wn(g)),o.value=await V()},a=async(_=!1)=>{const v={id:window.crypto.getRandomValues(new Uint32Array(1))[0].toString(16),title:D.newNote,content:_?" ":n.value,created:new Date().toISOString(),updated:new Date().toISOString()};await Cn(v),o.value=await V(),t(v.id),await k(v.id)},h=async _=>{await Mn(_),o.value=await V(),e.value=D.newNote,n.value=""},d=()=>o.value&&o.value.length>0,k=async _=>{await $e({path:"/",query:_?{note:_}:{}})};return{rawText:n,parsedText:r,noteTitle:e,isPreviewActive:i,currentNoteId:l,currentNoteUpdateDate:c,notes:o,saveNote:f,createNote:a,setCurrentNote:t,navigateCurrentNote:k,getNotesLength:d,initStoreNotes:s,searchNotes:u,removeNote:h}}),En=()=>We().$device,In=e=>(Ne("data-v-332d840d"),e=e(),De(),e),$n={class:"d-flex"},Tn={class:"up d-flex align-items-start flex-column"},Nn={class:"d-flex gap-4"},Dn={key:0,class:"notes__list d-flex flex-column"},zn=["onClick"],Rn={class:"notes__list-note-info d-flex flex-column gap-3"},Bn={class:"notes__list-note-info-name weight-500 text-overflow-ellipsis"},Pn={class:"d-flex"},On={class:"notes__list-note-info-date weight-400 text-overflow-ellipsis"},qn={class:"notes__list-note-info-date weight-300 text-overflow-ellipsis"},Fn={key:0,class:"d-flex emty"},jn=In(()=>m("span",null,"No notes",-1)),Hn=[jn],Vn=$({__name:"Sidebar",props:{isLoadData:Boolean},setup(e,{emit:n}){const r=e,{getNotesLength:i}=M(),{isMobile:o}=En(),{id:l}=K(),{setCurrentNote:c,navigateCurrentNote:t,createNote:s}=M(),{notes:u,rawText:f,currentNoteId:a}=F(M()),h=()=>{!f.value||!a.value||n(D.toggleDeleteModal,!0)},d=async()=>(await s(!0),n(D.addNewNote,!1)),k=A(!0),_=v=>k.value=v;return k.value=!o,(v,g)=>{const C=cn,j=dn,H=An;return b(),y("div",$n,[m("div",{class:ne(["sidebar d-flex align-items-start flex-column transition",{hidden:!x(k),open:x(k)}])},[m("div",Tn,[m("div",Nn,[N(C,{class:"cursor-pointer",onClick:g[0]||(g[0]=E=>d())}),x(l)&&x(i)()?(b(),L(j,{key:0,class:"cursor-pointer",onClick:h})):q("",!0)]),x(i)()?(b(),y("ul",Dn,[(b(!0),y(Te,null,Ye(x(u),E=>(b(),y("li",{key:E.id,class:ne([x(l)===E.id?"active":"","notes__list-note d-flex align-items-center gap-6"]),onClick:le=>{x(c)(E.id),x(t)(E.id)}},[m("div",Rn,[m("span",Bn,U(E.title),1),m("div",Pn,[m("span",On,U(("formatDate"in v?v.formatDate:x(Pe))(E.updated))+"   ",1),m("span",qn,U(("truncateText"in v?v.truncateText:x(he))(E.content,20)),1)])])],10,zn))),128))])):q("",!0)]),r.isLoadData&&!x(i)()?(b(),y("div",Fn,Hn)):q("",!0)],2),m("button",{class:"menu",onClick:g[1]||(g[1]=E=>_(!x(k)))},[N(H,{variant:x(k)?"close":"open"},null,8,["variant"])])])}}});const Un=I(Vn,[["__scopeId","data-v-332d840d"]]),Zn={},Ln={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-markdown-fill",viewBox:"0 0 16 16"},Gn=m("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm11.5 1a.5.5 0 0 0-.5.5v3.793L9.854 8.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L12 9.293V5.5a.5.5 0 0 0-.5-.5zM3.56 7.01h.056l1.428 3.239h.774l1.42-3.24h.056V11h1.073V5.001h-1.2l-1.71 3.894h-.039l-1.71-3.894H2.5V11h1.06V7.01z"},null,-1),Qn=[Gn];function Kn(e,n){return b(),y("svg",Ln,Qn)}const Wn=I(Zn,[["render",Kn]]),Yn={},Jn={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},Xn=m("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"},null,-1),er=[Xn];function nr(e,n){return b(),y("svg",Jn,er)}const rr=I(Yn,[["render",nr]]),or={},ir={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},lr=m("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"},null,-1),tr=[lr];function cr(e,n){return b(),y("svg",ir,tr)}const sr=I(or,[["render",cr]]),ur={class:"input-icon-wrap"},fr={class:"input-icon"},ar=$({__name:"Search",setup(e){const{searchNotes:n}=M(),r=Ie(),i=A(null),o=r.query.q,l=async()=>{var t;const c=(t=i.value)==null?void 0:t.value;await $e({path:"/",query:{q:c}}),await n(c)};return ze(async()=>{o&&await l()}),(c,t)=>{const s=sr;return b(),y("div",ur,[m("span",fr,[N(s)]),Z(m("input",{ref_key:"input",ref:i,"onUpdate:modelValue":t[0]||(t[0]=u=>Be(o)?o.value=u:null),type:"text",placeholder:"Search",class:"input-with-icon",onInput:l},null,544),[[Re,x(o)]])])}}});const pr={class:"w-100 d-flex align-items-center"},hr={class:"left d-flex align-items-center gap-5"},dr={class:"header position-sticky d-flex align-items-center weight-500"},_r={class:"right d-flex align-items-center gap-9"},vr={key:0,class:"d-flex justify-content-center date"},kr=$({__name:"Header",props:{dateState:Boolean},setup(e){const n=e,{currentNoteUpdateDate:r,isPreviewActive:i}=F(M()),{getNotesLength:o}=M(),{id:l}=K();return(c,t)=>{const s=Wn,u=rr,f=ar;return b(),y(Te,null,[m("header",pr,[m("div",hr,[m("div",dr,[x(i)?(b(),L(s,{key:0,class:"cursor-pointer","is-preview-active":x(i),onClick:t[0]||(t[0]=a=>i.value=!x(i))},null,8,["is-preview-active"])):(b(),L(u,{key:1,class:"cursor-pointer","is-preview-active":x(i),onClick:t[1]||(t[1]=a=>i.value=!x(i))},null,8,["is-preview-active"]))])]),m("div",_r,[N(f)])]),n.dateState&&x(r)&&x(l)&&x(o)()?(b(),y("div",vr,U(("formatDate"in c?c.formatDate:x(Pe))(x(r),"fullDate")),1)):q("",!0)],64)}}});const xr=I(kr,[["__scopeId","data-v-6037cbe0"]]),gr={class:"editor d-flex flex-column"},mr=$({__name:"Editor",setup(e){const{saveNote:n,createNote:r}=M(),{rawText:i}=F(M()),o=async()=>{const{id:c}=K();c.value||await r()},l=A(null);return ze(()=>{l&&l.value&&l.value.focus()}),(c,t)=>(b(),y("div",gr,[Z(m("textarea",{ref_key:"textarea",ref:l,"onUpdate:modelValue":t[0]||(t[0]=s=>Be(i)?i.value=s:null),class:"editor__area",onInput:t[1]||(t[1]=s=>{x(n)(),o()})},null,544),[[Re,x(i)]])]))}});const br=I(mr,[["__scopeId","data-v-6a91efdc"]]);var J;function Oe(e){return J=J||document.createElement("textarea"),J.innerHTML="&"+e+";",J.value}var yr=Object.prototype.hasOwnProperty;function Ar(e,n){return e?yr.call(e,n):!1}function qe(e){var n=[].slice.call(arguments,1);return n.forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(i){e[i]=r[i]})}}),e}var wr=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function G(e){return e.indexOf("\\")<0?e:e.replace(wr,"$1")}function Fe(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function de(e){if(e>65535){e-=65536;var n=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(n,r)}return String.fromCharCode(e)}var Cr=/&([a-z#][a-z0-9]{1,31});/gi,Mr=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function Sr(e,n){var r=0,i=Oe(n);return n!==i?i:n.charCodeAt(0)===35&&Mr.test(n)&&(r=n[1].toLowerCase()==="x"?parseInt(n.slice(2),16):parseInt(n.slice(1),10),Fe(r))?de(r):e}function z(e){return e.indexOf("&")<0?e:e.replace(Cr,Sr)}var Er=/[&<>"]/,Ir=/[&<>"]/g,$r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Tr(e){return $r[e]}function w(e){return Er.test(e)?e.replace(Ir,Tr):e}var p={};p.blockquote_open=function(){return`<blockquote>
`};p.blockquote_close=function(e,n){return"</blockquote>"+R(e,n)};p.code=function(e,n){return e[n].block?"<pre><code>"+w(e[n].content)+"</code></pre>"+R(e,n):"<code>"+w(e[n].content)+"</code>"};p.fence=function(e,n,r,i,o){var l=e[n],c="",t=r.langPrefix,s="",u,f,a;if(l.params){if(u=l.params.split(/\s+/g),f=u.join(" "),Ar(o.rules.fence_custom,u[0]))return o.rules.fence_custom[u[0]](e,n,r,i,o);s=w(z(G(f))),c=' class="'+t+s+'"'}return r.highlight?a=r.highlight.apply(r.highlight,[l.content].concat(u))||w(l.content):a=w(l.content),"<pre><code"+c+">"+a+"</code></pre>"+R(e,n)};p.fence_custom={};p.heading_open=function(e,n){return"<h"+e[n].hLevel+">"};p.heading_close=function(e,n){return"</h"+e[n].hLevel+`>
`};p.hr=function(e,n,r){return(r.xhtmlOut?"<hr />":"<hr>")+R(e,n)};p.bullet_list_open=function(){return`<ul>
`};p.bullet_list_close=function(e,n){return"</ul>"+R(e,n)};p.list_item_open=function(){return"<li>"};p.list_item_close=function(){return`</li>
`};p.ordered_list_open=function(e,n){var r=e[n],i=r.order>1?' start="'+r.order+'"':"";return"<ol"+i+`>
`};p.ordered_list_close=function(e,n){return"</ol>"+R(e,n)};p.paragraph_open=function(e,n){return e[n].tight?"":"<p>"};p.paragraph_close=function(e,n){var r=!(e[n].tight&&n&&e[n-1].type==="inline"&&!e[n-1].content);return(e[n].tight?"":"</p>")+(r?R(e,n):"")};p.link_open=function(e,n,r){var i=e[n].title?' title="'+w(z(e[n].title))+'"':"",o=r.linkTarget?' target="'+r.linkTarget+'"':"";return'<a href="'+w(e[n].href)+'"'+i+o+">"};p.link_close=function(){return"</a>"};p.image=function(e,n,r){var i=' src="'+w(e[n].src)+'"',o=e[n].title?' title="'+w(z(e[n].title))+'"':"",l=' alt="'+(e[n].alt?w(z(G(e[n].alt))):"")+'"',c=r.xhtmlOut?" /":"";return"<img"+i+l+o+c+">"};p.table_open=function(){return`<table>
`};p.table_close=function(){return`</table>
`};p.thead_open=function(){return`<thead>
`};p.thead_close=function(){return`</thead>
`};p.tbody_open=function(){return`<tbody>
`};p.tbody_close=function(){return`</tbody>
`};p.tr_open=function(){return"<tr>"};p.tr_close=function(){return`</tr>
`};p.th_open=function(e,n){var r=e[n];return"<th"+(r.align?' style="text-align:'+r.align+'"':"")+">"};p.th_close=function(){return"</th>"};p.td_open=function(e,n){var r=e[n];return"<td"+(r.align?' style="text-align:'+r.align+'"':"")+">"};p.td_close=function(){return"</td>"};p.strong_open=function(){return"<strong>"};p.strong_close=function(){return"</strong>"};p.em_open=function(){return"<em>"};p.em_close=function(){return"</em>"};p.del_open=function(){return"<del>"};p.del_close=function(){return"</del>"};p.ins_open=function(){return"<ins>"};p.ins_close=function(){return"</ins>"};p.mark_open=function(){return"<mark>"};p.mark_close=function(){return"</mark>"};p.sub=function(e,n){return"<sub>"+w(e[n].content)+"</sub>"};p.sup=function(e,n){return"<sup>"+w(e[n].content)+"</sup>"};p.hardbreak=function(e,n,r){return r.xhtmlOut?`<br />
`:`<br>
`};p.softbreak=function(e,n,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};p.text=function(e,n){return w(e[n].content)};p.htmlblock=function(e,n){return e[n].content};p.htmltag=function(e,n){return e[n].content};p.abbr_open=function(e,n){return'<abbr title="'+w(z(e[n].title))+'">'};p.abbr_close=function(){return"</abbr>"};p.footnote_ref=function(e,n){var r=Number(e[n].id+1).toString(),i="fnref"+r;return e[n].subId>0&&(i+=":"+e[n].subId),'<sup class="footnote-ref"><a href="#fn'+r+'" id="'+i+'">['+r+"]</a></sup>"};p.footnote_block_open=function(e,n,r){var i=r.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return i+`<section class="footnotes">
<ol class="footnotes-list">
`};p.footnote_block_close=function(){return`</ol>
</section>
`};p.footnote_open=function(e,n){var r=Number(e[n].id+1).toString();return'<li id="fn'+r+'"  class="footnote-item">'};p.footnote_close=function(){return`</li>
`};p.footnote_anchor=function(e,n){var r=Number(e[n].id+1).toString(),i="fnref"+r;return e[n].subId>0&&(i+=":"+e[n].subId),' <a href="#'+i+'" class="footnote-backref">↩</a>'};p.dl_open=function(){return`<dl>
`};p.dt_open=function(){return"<dt>"};p.dd_open=function(){return"<dd>"};p.dl_close=function(){return`</dl>
`};p.dt_close=function(){return`</dt>
`};p.dd_close=function(){return`</dd>
`};function je(e,n){return++n>=e.length-2?n:e[n].type==="paragraph_open"&&e[n].tight&&e[n+1].type==="inline"&&e[n+1].content.length===0&&e[n+2].type==="paragraph_close"&&e[n+2].tight?je(e,n+2):n}var R=p.getBreak=function(n,r){return r=je(n,r),r<n.length&&n[r].type==="list_item_close"?"":`
`};function ve(){this.rules=qe({},p),this.getBreak=p.getBreak}ve.prototype.renderInline=function(e,n,r){for(var i=this.rules,o=e.length,l=0,c="";o--;)c+=i[e[l].type](e,l++,n,r,this);return c};ve.prototype.render=function(e,n,r){for(var i=this.rules,o=e.length,l=-1,c="";++l<o;)e[l].type==="inline"?c+=this.renderInline(e[l].children,n,r):c+=i[e[l].type](e,l,n,r,this);return c};function S(){this.__rules__=[],this.__cache__=null}S.prototype.__find__=function(e){for(var n=this.__rules__.length,r=-1;n--;)if(this.__rules__[++r].name===e)return r;return-1};S.prototype.__compile__=function(){var e=this,n=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(i){n.indexOf(i)<0&&n.push(i)})}),e.__cache__={},n.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(i){i.enabled&&(r&&i.alt.indexOf(r)<0||e.__cache__[r].push(i.fn))})})};S.prototype.at=function(e,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__[i].fn=n,this.__rules__[i].alt=o.alt||[],this.__cache__=null};S.prototype.before=function(e,n,r,i){var o=this.__find__(e),l=i||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:n,enabled:!0,fn:r,alt:l.alt||[]}),this.__cache__=null};S.prototype.after=function(e,n,r,i){var o=this.__find__(e),l=i||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:n,enabled:!0,fn:r,alt:l.alt||[]}),this.__cache__=null};S.prototype.push=function(e,n,r){var i=r||{};this.__rules__.push({name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};S.prototype.enable=function(e,n){e=Array.isArray(e)?e:[e],n&&this.__rules__.forEach(function(r){r.enabled=!1}),e.forEach(function(r){var i=this.__find__(r);if(i<0)throw new Error("Rules manager: invalid rule name "+r);this.__rules__[i].enabled=!0},this),this.__cache__=null};S.prototype.disable=function(e){e=Array.isArray(e)?e:[e],e.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!1},this),this.__cache__=null};S.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Nr(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}function B(e,n,r,i,o){this.src=e,this.env=i,this.options=r,this.parser=n,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}B.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};B.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level};B.prototype.cacheSet=function(e,n){for(var r=this.cache.length;r<=e;r++)this.cache.push(0);this.cache[e]=n};B.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};function Q(e,n){var r,i,o,l=-1,c=e.posMax,t=e.pos,s=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=n+1,e.isInLabel=!0,r=1;e.pos<c;){if(o=e.src.charCodeAt(e.pos),o===91)r++;else if(o===93&&(r--,r===0)){i=!0;break}e.parser.skipToken(e)}return i?(l=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=r-1,e.pos=t,e.isInLabel=s,l}function Dr(e,n,r,i){var o,l,c,t,s,u;if(e.charCodeAt(0)!==42||e.charCodeAt(1)!==91||e.indexOf("]:")===-1||(o=new B(e,n,r,i,[]),l=Q(o,1),l<0||e.charCodeAt(l+1)!==58))return-1;for(t=o.posMax,c=l+2;c<t&&o.src.charCodeAt(c)!==10;c++);return s=e.slice(2,l),u=e.slice(l+2,c).trim(),u.length===0?-1:(i.abbreviations||(i.abbreviations={}),typeof i.abbreviations[":"+s]>"u"&&(i.abbreviations[":"+s]=u),c)}function zr(e){var n=e.tokens,r,i,o,l;if(!e.inlineMode){for(r=1,i=n.length-1;r<i;r++)if(n[r-1].type==="paragraph_open"&&n[r].type==="inline"&&n[r+1].type==="paragraph_close"){for(o=n[r].content;o.length&&(l=Dr(o,e.inline,e.options,e.env),!(l<0));)o=o.slice(l).trim();n[r].content=o,o.length||(n[r-1].tight=!0,n[r+1].tight=!0)}}}function _e(e){var n=z(e);try{n=decodeURI(n)}catch{}return encodeURI(n)}function He(e,n){var r,i,o,l=n,c=e.posMax;if(e.src.charCodeAt(n)===60){for(n++;n<c;){if(r=e.src.charCodeAt(n),r===10)return!1;if(r===62)return o=_e(G(e.src.slice(l+1,n))),e.parser.validateLink(o)?(e.pos=n+1,e.linkContent=o,!0):!1;if(r===92&&n+1<c){n+=2;continue}n++}return!1}for(i=0;n<c&&(r=e.src.charCodeAt(n),!(r===32||r<32||r===127));){if(r===92&&n+1<c){n+=2;continue}if(r===40&&(i++,i>1)||r===41&&(i--,i<0))break;n++}return l===n||(o=G(e.src.slice(l,n)),!e.parser.validateLink(o))?!1:(e.linkContent=o,e.pos=n,!0)}function Ve(e,n){var r,i=n,o=e.posMax,l=e.src.charCodeAt(n);if(l!==34&&l!==39&&l!==40)return!1;for(n++,l===40&&(l=41);n<o;){if(r=e.src.charCodeAt(n),r===l)return e.pos=n+1,e.linkContent=G(e.src.slice(i+1,n)),!0;if(r===92&&n+1<o){n+=2;continue}n++}return!1}function Ue(e){return e.trim().replace(/\s+/g," ").toUpperCase()}function Rr(e,n,r,i){var o,l,c,t,s,u,f,a,h;if(e.charCodeAt(0)!==91||e.indexOf("]:")===-1||(o=new B(e,n,r,i,[]),l=Q(o,0),l<0||e.charCodeAt(l+1)!==58))return-1;for(t=o.posMax,c=l+2;c<t&&(s=o.src.charCodeAt(c),!(s!==32&&s!==10));c++);if(!He(o,c))return-1;for(f=o.linkContent,c=o.pos,u=c,c=c+1;c<t&&(s=o.src.charCodeAt(c),!(s!==32&&s!==10));c++);for(c<t&&u!==c&&Ve(o,c)?(a=o.linkContent,c=o.pos):(a="",c=u);c<t&&o.src.charCodeAt(c)===32;)c++;return c<t&&o.src.charCodeAt(c)!==10?-1:(h=Ue(e.slice(1,l)),typeof i.references[h]>"u"&&(i.references[h]={title:a,href:f}),c)}function Br(e){var n=e.tokens,r,i,o,l;if(e.env.references=e.env.references||{},!e.inlineMode){for(r=1,i=n.length-1;r<i;r++)if(n[r].type==="inline"&&n[r-1].type==="paragraph_open"&&n[r+1].type==="paragraph_close"){for(o=n[r].content;o.length&&(l=Rr(o,e.inline,e.options,e.env),!(l<0));)o=o.slice(l).trim();n[r].content=o,o.length||(n[r-1].tight=!0,n[r+1].tight=!0)}}}function Pr(e){var n=e.tokens,r,i,o;for(i=0,o=n.length;i<o;i++)r=n[i],r.type==="inline"&&e.inline.parse(r.content,e.options,e.env,r.children)}function Or(e){var n,r,i,o,l,c,t,s,u,f=0,a=!1,h={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(d){return d.type==="footnote_reference_open"?(a=!0,s=[],u=d.label,!1):d.type==="footnote_reference_close"?(a=!1,h[":"+u]=s,!1):(a&&s.push(d),!a)}),!!e.env.footnotes.list)){for(c=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:f++}),n=0,r=c.length;n<r;n++){for(e.tokens.push({type:"footnote_open",id:n,level:f++}),c[n].tokens?(t=[],t.push({type:"paragraph_open",tight:!1,level:f++}),t.push({type:"inline",content:"",level:f,children:c[n].tokens}),t.push({type:"paragraph_close",tight:!1,level:--f})):c[n].label&&(t=h[":"+c[n].label]),e.tokens=e.tokens.concat(t),e.tokens[e.tokens.length-1].type==="paragraph_close"?l=e.tokens.pop():l=null,o=c[n].count>0?c[n].count:1,i=0;i<o;i++)e.tokens.push({type:"footnote_anchor",id:n,subId:i,level:f});l&&e.tokens.push(l),e.tokens.push({type:"footnote_close",level:--f})}e.tokens.push({type:"footnote_block_close",level:--f})}}var me=` 
()[]'".,!?-`;function ue(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function qr(e){var n,r,i,o,l,c,t,s,u,f,a,h,d=e.tokens;if(e.env.abbreviations){for(e.env.abbrRegExp||(h="(^|["+me.split("").map(ue).join("")+"])("+Object.keys(e.env.abbreviations).map(function(k){return k.substr(1)}).sort(function(k,_){return _.length-k.length}).map(ue).join("|")+")($|["+me.split("").map(ue).join("")+"])",e.env.abbrRegExp=new RegExp(h,"g")),f=e.env.abbrRegExp,r=0,i=d.length;r<i;r++)if(d[r].type==="inline"){for(o=d[r].children,n=o.length-1;n>=0;n--)if(l=o[n],l.type==="text"){for(s=0,c=l.content,f.lastIndex=0,u=l.level,t=[];a=f.exec(c);)f.lastIndex>s&&t.push({type:"text",content:c.slice(s,a.index+a[1].length),level:u}),t.push({type:"abbr_open",title:e.env.abbreviations[":"+a[2]],level:u++}),t.push({type:"text",content:a[2],level:u}),t.push({type:"abbr_close",level:--u}),s=f.lastIndex-a[3].length;t.length&&(s<c.length&&t.push({type:"text",content:c.slice(s),level:u}),d[r].children=o=[].concat(o.slice(0,n),t,o.slice(n+1)))}}}}var Fr=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,jr=/\((c|tm|r|p)\)/ig,Hr={c:"©",r:"®",p:"§",tm:"™"};function Vr(e){return e.indexOf("(")<0?e:e.replace(jr,function(n,r){return Hr[r.toLowerCase()]})}function Ur(e){var n,r,i,o,l;if(e.options.typographer){for(l=e.tokens.length-1;l>=0;l--)if(e.tokens[l].type==="inline")for(o=e.tokens[l].children,n=o.length-1;n>=0;n--)r=o[n],r.type==="text"&&(i=r.content,i=Vr(i),Fr.test(i)&&(i=i.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),r.content=i)}}var Zr=/['"]/,be=/['"]/g,Lr=/[-\s()\[\]]/,ye="’";function Ae(e,n){return n<0||n>=e.length?!1:!Lr.test(e[n])}function O(e,n,r){return e.substr(0,n)+r+e.substr(n+1)}function Gr(e){var n,r,i,o,l,c,t,s,u,f,a,h,d,k,_,v,g;if(e.options.typographer){for(g=[],_=e.tokens.length-1;_>=0;_--)if(e.tokens[_].type==="inline"){for(v=e.tokens[_].children,g.length=0,n=0;n<v.length;n++)if(r=v[n],!(r.type!=="text"||Zr.test(r.text))){for(t=v[n].level,d=g.length-1;d>=0&&!(g[d].level<=t);d--);g.length=d+1,i=r.content,l=0,c=i.length;e:for(;l<c&&(be.lastIndex=l,o=be.exec(i),!!o);){if(s=!Ae(i,o.index-1),l=o.index+1,k=o[0]==="'",u=!Ae(i,l),!u&&!s){k&&(r.content=O(r.content,o.index,ye));continue}if(a=!u,h=!s,h){for(d=g.length-1;d>=0&&(f=g[d],!(g[d].level<t));d--)if(f.single===k&&g[d].level===t){f=g[d],k?(v[f.token].content=O(v[f.token].content,f.pos,e.options.quotes[2]),r.content=O(r.content,o.index,e.options.quotes[3])):(v[f.token].content=O(v[f.token].content,f.pos,e.options.quotes[0]),r.content=O(r.content,o.index,e.options.quotes[1])),g.length=d;continue e}}a?g.push({token:n,pos:o.index,single:k,level:t}):h&&k&&(r.content=O(r.content,o.index,ye))}}}}}var fe=[["block",Nr],["abbr",zr],["references",Br],["inline",Pr],["footnote_tail",Or],["abbr2",qr],["replacements",Ur],["smartquotes",Gr]];function Ze(){this.options={},this.ruler=new S;for(var e=0;e<fe.length;e++)this.ruler.push(fe[e][0],fe[e][1])}Ze.prototype.process=function(e){var n,r,i;for(i=this.ruler.getRules(""),n=0,r=i.length;n<r;n++)i[n](e)};function P(e,n,r,i,o){var l,c,t,s,u,f,a;for(this.src=e,this.parser=n,this.options=r,this.env=i,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",c=this.src,f=0,a=!1,t=s=f=0,u=c.length;s<u;s++){if(l=c.charCodeAt(s),!a)if(l===32){f++;continue}else a=!0;(l===10||s===u-1)&&(l!==10&&s++,this.bMarks.push(t),this.eMarks.push(s),this.tShift.push(f),a=!1,f=0,t=s+1)}this.bMarks.push(c.length),this.eMarks.push(c.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}P.prototype.isEmpty=function(n){return this.bMarks[n]+this.tShift[n]>=this.eMarks[n]};P.prototype.skipEmptyLines=function(n){for(var r=this.lineMax;n<r&&!(this.bMarks[n]+this.tShift[n]<this.eMarks[n]);n++);return n};P.prototype.skipSpaces=function(n){for(var r=this.src.length;n<r&&this.src.charCodeAt(n)===32;n++);return n};P.prototype.skipChars=function(n,r){for(var i=this.src.length;n<i&&this.src.charCodeAt(n)===r;n++);return n};P.prototype.skipCharsBack=function(n,r,i){if(n<=i)return n;for(;n>i;)if(r!==this.src.charCodeAt(--n))return n+1;return n};P.prototype.getLines=function(n,r,i,o){var l,c,t,s,u,f=n;if(n>=r)return"";if(f+1===r)return c=this.bMarks[f]+Math.min(this.tShift[f],i),t=o?this.eMarks[f]+1:this.eMarks[f],this.src.slice(c,t);for(s=new Array(r-n),l=0;f<r;f++,l++)u=this.tShift[f],u>i&&(u=i),u<0&&(u=0),c=this.bMarks[f]+u,f+1<r||o?t=this.eMarks[f]+1:t=this.eMarks[f],s[l]=this.src.slice(c,t);return s.join("")};function Qr(e,n,r){var i,o;if(e.tShift[n]-e.blkIndent<4)return!1;for(o=i=n+1;i<r;){if(e.isEmpty(i)){i++;continue}if(e.tShift[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=i,e.tokens.push({type:"code",content:e.getLines(n,o,4+e.blkIndent,!0),block:!0,lines:[n,e.line],level:e.level}),!0}function Kr(e,n,r,i){var o,l,c,t,s,u=!1,f=e.bMarks[n]+e.tShift[n],a=e.eMarks[n];if(f+3>a||(o=e.src.charCodeAt(f),o!==126&&o!==96)||(s=f,f=e.skipChars(f,o),l=f-s,l<3)||(c=e.src.slice(f,a).trim(),c.indexOf("`")>=0))return!1;if(i)return!0;for(t=n;t++,!(t>=r||(f=s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],f<a&&e.tShift[t]<e.blkIndent));)if(e.src.charCodeAt(f)===o&&!(e.tShift[t]-e.blkIndent>=4)&&(f=e.skipChars(f,o),!(f-s<l)&&(f=e.skipSpaces(f),!(f<a)))){u=!0;break}return l=e.tShift[n],e.line=t+(u?1:0),e.tokens.push({type:"fence",params:c,content:e.getLines(n+1,t,l,!0),lines:[n,e.line],level:e.level}),!0}function Wr(e,n,r,i){var o,l,c,t,s,u,f,a,h,d,k,_=e.bMarks[n]+e.tShift[n],v=e.eMarks[n];if(_>v||e.src.charCodeAt(_++)!==62||e.level>=e.options.maxNesting)return!1;if(i)return!0;for(e.src.charCodeAt(_)===32&&_++,s=e.blkIndent,e.blkIndent=0,t=[e.bMarks[n]],e.bMarks[n]=_,_=_<v?e.skipSpaces(_):_,l=_>=v,c=[e.tShift[n]],e.tShift[n]=_-e.bMarks[n],a=e.parser.ruler.getRules("blockquote"),o=n+1;o<r&&(_=e.bMarks[o]+e.tShift[o],v=e.eMarks[o],!(_>=v));o++){if(e.src.charCodeAt(_++)===62){e.src.charCodeAt(_)===32&&_++,t.push(e.bMarks[o]),e.bMarks[o]=_,_=_<v?e.skipSpaces(_):_,l=_>=v,c.push(e.tShift[o]),e.tShift[o]=_-e.bMarks[o];continue}if(l)break;for(k=!1,h=0,d=a.length;h<d;h++)if(a[h](e,o,r,!0)){k=!0;break}if(k)break;t.push(e.bMarks[o]),c.push(e.tShift[o]),e.tShift[o]=-1337}for(u=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:f=[n,0],level:e.level++}),e.parser.tokenize(e,n,o),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=u,f[1]=e.line,h=0;h<c.length;h++)e.bMarks[h+n]=t[h],e.tShift[h+n]=c[h];return e.blkIndent=s,!0}function Yr(e,n,r,i){var o,l,c,t=e.bMarks[n],s=e.eMarks[n];if(t+=e.tShift[n],t>s||(o=e.src.charCodeAt(t++),o!==42&&o!==45&&o!==95))return!1;for(l=1;t<s;){if(c=e.src.charCodeAt(t++),c!==o&&c!==32)return!1;c===o&&l++}return l<3?!1:(i||(e.line=n+1,e.tokens.push({type:"hr",lines:[n,e.line],level:e.level})),!0)}function we(e,n){var r,i,o;return i=e.bMarks[n]+e.tShift[n],o=e.eMarks[n],i>=o||(r=e.src.charCodeAt(i++),r!==42&&r!==45&&r!==43)||i<o&&e.src.charCodeAt(i)!==32?-1:i}function Ce(e,n){var r,i=e.bMarks[n]+e.tShift[n],o=e.eMarks[n];if(i+1>=o||(r=e.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=e.src.charCodeAt(i++),!(r>=48&&r<=57)){if(r===41||r===46)break;return-1}}return i<o&&e.src.charCodeAt(i)!==32?-1:i}function Jr(e,n){var r,i,o=e.level+2;for(r=n+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===o&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].tight=!0,e.tokens[r].tight=!0,r+=2)}function Xr(e,n,r,i){var o,l,c,t,s,u,f,a,h,d,k,_,v,g,C,j,H,E,le=!0,te,W,ge,ce;if((a=Ce(e,n))>=0)v=!0;else if((a=we(e,n))>=0)v=!1;else return!1;if(e.level>=e.options.maxNesting)return!1;if(_=e.src.charCodeAt(a-1),i)return!0;for(C=e.tokens.length,v?(f=e.bMarks[n]+e.tShift[n],k=Number(e.src.substr(f,a-f-1)),e.tokens.push({type:"ordered_list_open",order:k,lines:H=[n,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:H=[n,0],level:e.level++}),o=n,j=!1,te=e.parser.ruler.getRules("list");o<r&&(g=e.skipSpaces(a),h=e.eMarks[o],g>=h?d=1:d=g-a,d>4&&(d=1),d<1&&(d=1),l=a-e.bMarks[o]+d,e.tokens.push({type:"list_item_open",lines:E=[n,0],level:e.level++}),t=e.blkIndent,s=e.tight,c=e.tShift[n],u=e.parentType,e.tShift[n]=g-e.bMarks[n],e.blkIndent=l,e.tight=!0,e.parentType="list",e.parser.tokenize(e,n,r,!0),(!e.tight||j)&&(le=!1),j=e.line-n>1&&e.isEmpty(e.line-1),e.blkIndent=t,e.tShift[n]=c,e.tight=s,e.parentType=u,e.tokens.push({type:"list_item_close",level:--e.level}),o=n=e.line,E[1]=o,g=e.bMarks[n],!(o>=r||e.isEmpty(o)||e.tShift[o]<e.blkIndent));){for(ce=!1,W=0,ge=te.length;W<ge;W++)if(te[W](e,o,r,!0)){ce=!0;break}if(ce)break;if(v){if(a=Ce(e,o),a<0)break}else if(a=we(e,o),a<0)break;if(_!==e.src.charCodeAt(a-1))break}return e.tokens.push({type:v?"ordered_list_close":"bullet_list_close",level:--e.level}),H[1]=o,e.line=o,le&&Jr(e,C),!0}function eo(e,n,r,i){var o,l,c,t,s,u=e.bMarks[n]+e.tShift[n],f=e.eMarks[n];if(u+4>f||e.src.charCodeAt(u)!==91||e.src.charCodeAt(u+1)!==94||e.level>=e.options.maxNesting)return!1;for(t=u+2;t<f;t++){if(e.src.charCodeAt(t)===32)return!1;if(e.src.charCodeAt(t)===93)break}return t===u+2||t+1>=f||e.src.charCodeAt(++t)!==58?!1:(i||(t++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),s=e.src.slice(u+2,t-2),e.env.footnotes.refs[":"+s]=-1,e.tokens.push({type:"footnote_reference_open",label:s,level:e.level++}),o=e.bMarks[n],l=e.tShift[n],c=e.parentType,e.tShift[n]=e.skipSpaces(t)-t,e.bMarks[n]=t,e.blkIndent+=4,e.parentType="footnote",e.tShift[n]<e.blkIndent&&(e.tShift[n]+=e.blkIndent,e.bMarks[n]-=e.blkIndent),e.parser.tokenize(e,n,r,!0),e.parentType=c,e.blkIndent-=4,e.tShift[n]=l,e.bMarks[n]=o,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0)}function no(e,n,r,i){var o,l,c,t=e.bMarks[n]+e.tShift[n],s=e.eMarks[n];if(t>=s||(o=e.src.charCodeAt(t),o!==35||t>=s))return!1;for(l=1,o=e.src.charCodeAt(++t);o===35&&t<s&&l<=6;)l++,o=e.src.charCodeAt(++t);return l>6||t<s&&o!==32?!1:(i||(s=e.skipCharsBack(s,32,t),c=e.skipCharsBack(s,35,t),c>t&&e.src.charCodeAt(c-1)===32&&(s=c),e.line=n+1,e.tokens.push({type:"heading_open",hLevel:l,lines:[n,e.line],level:e.level}),t<s&&e.tokens.push({type:"inline",content:e.src.slice(t,s).trim(),level:e.level+1,lines:[n,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:l,level:e.level})),!0)}function ro(e,n,r){var i,o,l,c=n+1;return c>=r||e.tShift[c]<e.blkIndent||e.tShift[c]-e.blkIndent>3||(o=e.bMarks[c]+e.tShift[c],l=e.eMarks[c],o>=l)||(i=e.src.charCodeAt(o),i!==45&&i!==61)||(o=e.skipChars(o,i),o=e.skipSpaces(o),o<l)?!1:(o=e.bMarks[n]+e.tShift[n],e.line=c+1,e.tokens.push({type:"heading_open",hLevel:i===61?1:2,lines:[n,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(o,e.eMarks[n]).trim(),level:e.level+1,lines:[n,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:i===61?1:2,level:e.level}),!0)}var Le={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){Le[e]=!0});var oo=/^<([a-zA-Z]{1,15})[\s\/>]/,io=/^<\/([a-zA-Z]{1,15})[\s>]/;function lo(e){var n=e|32;return n>=97&&n<=122}function to(e,n,r,i){var o,l,c,t=e.bMarks[n],s=e.eMarks[n],u=e.tShift[n];if(t+=u,!e.options.html||u>3||t+2>=s||e.src.charCodeAt(t)!==60)return!1;if(o=e.src.charCodeAt(t+1),o===33||o===63){if(i)return!0}else if(o===47||lo(o)){if(o===47){if(l=e.src.slice(t,s).match(io),!l)return!1}else if(l=e.src.slice(t,s).match(oo),!l)return!1;if(Le[l[1].toLowerCase()]!==!0)return!1;if(i)return!0}else return!1;for(c=n+1;c<e.lineMax&&!e.isEmpty(c);)c++;return e.line=c,e.tokens.push({type:"htmlblock",level:e.level,lines:[n,e.line],content:e.getLines(n,c,0,!0)}),!0}function ae(e,n){var r=e.bMarks[n]+e.blkIndent,i=e.eMarks[n];return e.src.substr(r,i-r)}function co(e,n,r,i){var o,l,c,t,s,u,f,a,h,d,k;if(n+2>r||(s=n+1,e.tShift[s]<e.blkIndent)||(c=e.bMarks[s]+e.tShift[s],c>=e.eMarks[s])||(o=e.src.charCodeAt(c),o!==124&&o!==45&&o!==58)||(l=ae(e,n+1),!/^[-:| ]+$/.test(l))||(u=l.split("|"),u<=2))return!1;for(a=[],t=0;t<u.length;t++){if(h=u[t].trim(),!h){if(t===0||t===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(h))return!1;h.charCodeAt(h.length-1)===58?a.push(h.charCodeAt(0)===58?"center":"right"):h.charCodeAt(0)===58?a.push("left"):a.push("")}if(l=ae(e,n).trim(),l.indexOf("|")===-1||(u=l.replace(/^\||\|$/g,"").split("|"),a.length!==u.length))return!1;if(i)return!0;for(e.tokens.push({type:"table_open",lines:d=[n,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[n,n+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[n,n+1],level:e.level++}),t=0;t<u.length;t++)e.tokens.push({type:"th_open",align:a[t],lines:[n,n+1],level:e.level++}),e.tokens.push({type:"inline",content:u[t].trim(),lines:[n,n+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:k=[n+2,0],level:e.level++}),s=n+2;s<r&&!(e.tShift[s]<e.blkIndent||(l=ae(e,s).trim(),l.indexOf("|")===-1));s++){for(u=l.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),t=0;t<u.length;t++)e.tokens.push({type:"td_open",align:a[t],level:e.level++}),f=u[t].substring(u[t].charCodeAt(0)===124?1:0,u[t].charCodeAt(u[t].length-1)===124?u[t].length-1:u[t].length).trim(),e.tokens.push({type:"inline",content:f,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),d[1]=k[1]=s,e.line=s,!0}function X(e,n){var r,i,o=e.bMarks[n]+e.tShift[n],l=e.eMarks[n];return o>=l||(i=e.src.charCodeAt(o++),i!==126&&i!==58)||(r=e.skipSpaces(o),o===r)||r>=l?-1:r}function so(e,n){var r,i,o=e.level+2;for(r=n+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===o&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].tight=!0,e.tokens[r].tight=!0,r+=2)}function uo(e,n,r,i){var o,l,c,t,s,u,f,a,h,d,k,_,v,g;if(i)return e.ddIndent<0?!1:X(e,n)>=0;if(f=n+1,e.isEmpty(f)&&++f>r||e.tShift[f]<e.blkIndent||(o=X(e,f),o<0)||e.level>=e.options.maxNesting)return!1;u=e.tokens.length,e.tokens.push({type:"dl_open",lines:s=[n,0],level:e.level++}),c=n,l=f;e:for(;;){for(g=!0,v=!1,e.tokens.push({type:"dt_open",lines:[c,c],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(c,c+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[c,c],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:t=[f,0],level:e.level++}),_=e.tight,h=e.ddIndent,a=e.blkIndent,k=e.tShift[l],d=e.parentType,e.blkIndent=e.ddIndent=e.tShift[l]+2,e.tShift[l]=o-e.bMarks[l],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,l,r,!0),(!e.tight||v)&&(g=!1),v=e.line-l>1&&e.isEmpty(e.line-1),e.tShift[l]=k,e.tight=_,e.parentType=d,e.blkIndent=a,e.ddIndent=h,e.tokens.push({type:"dd_close",level:--e.level}),t[1]=f=e.line,f>=r||e.tShift[f]<e.blkIndent)break e;if(o=X(e,f),o<0)break;l=f}if(f>=r||(c=f,e.isEmpty(c))||e.tShift[c]<e.blkIndent||(l=c+1,l>=r)||(e.isEmpty(l)&&l++,l>=r)||e.tShift[l]<e.blkIndent||(o=X(e,l),o<0))break}return e.tokens.push({type:"dl_close",level:--e.level}),s[1]=f,e.line=f,g&&so(e,u),!0}function fo(e,n){var r,i,o,l,c,t=n+1,s;if(r=e.lineMax,t<r&&!e.isEmpty(t)){for(s=e.parser.ruler.getRules("paragraph");t<r&&!e.isEmpty(t);t++)if(!(e.tShift[t]-e.blkIndent>3)){for(o=!1,l=0,c=s.length;l<c;l++)if(s[l](e,t,r,!0)){o=!0;break}if(o)break}}return i=e.getLines(n,t,e.blkIndent,!1).trim(),e.line=t,i.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[n,e.line],level:e.level}),e.tokens.push({type:"inline",content:i,level:e.level+1,lines:[n,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}var ee=[["code",Qr],["fences",Kr,["paragraph","blockquote","list"]],["blockquote",Wr,["paragraph","blockquote","list"]],["hr",Yr,["paragraph","blockquote","list"]],["list",Xr,["paragraph","blockquote"]],["footnote",eo,["paragraph"]],["heading",no,["paragraph","blockquote"]],["lheading",ro],["htmlblock",to,["paragraph","blockquote"]],["table",co,["paragraph"]],["deflist",uo,["paragraph"]],["paragraph",fo]];function ke(){this.ruler=new S;for(var e=0;e<ee.length;e++)this.ruler.push(ee[e][0],ee[e][1],{alt:(ee[e][2]||[]).slice()})}ke.prototype.tokenize=function(e,n,r){for(var i=this.ruler.getRules(""),o=i.length,l=n,c=!1,t,s;l<r&&(e.line=l=e.skipEmptyLines(l),!(l>=r||e.tShift[l]<e.blkIndent));){for(s=0;s<o&&(t=i[s](e,l,r,!1),!t);s++);if(e.tight=!c,e.isEmpty(e.line-1)&&(c=!0),l=e.line,l<r&&e.isEmpty(l)){if(c=!0,l++,l<r&&e.parentType==="list"&&e.isEmpty(l))break;e.line=l}}};var ao=/[\n\t]/g,po=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,ho=/\u00a0/g;ke.prototype.parse=function(e,n,r,i){var o,l=0,c=0;if(!e)return[];e=e.replace(ho," "),e=e.replace(po,`
`),e.indexOf("	")>=0&&(e=e.replace(ao,function(t,s){var u;return e.charCodeAt(s)===10?(l=s+1,c=0,t):(u="    ".slice((s-l-c)%4),c=s-l+1,u)})),o=new P(e,this,n,r,i),this.tokenize(o,o.line,o.lineMax)};function _o(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function vo(e,n){for(var r=e.pos;r<e.posMax&&!_o(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}function ko(e,n){var r,i,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;if(r=e.pending.length-1,i=e.posMax,!n)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){for(var l=r-2;l>=0;l--)if(e.pending.charCodeAt(l)!==32){e.pending=e.pending.substring(0,l+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(o++;o<i&&e.src.charCodeAt(o)===32;)o++;return e.pos=o,!0}var xe=[];for(var Me=0;Me<256;Me++)xe.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){xe[e.charCodeAt(0)]=1});function xo(e,n){var r,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(r=e.src.charCodeAt(i),r<256&&xe[r]!==0)return n||(e.pending+=e.src[i]),e.pos+=2,!0;if(r===10){for(n||e.push({type:"hardbreak",level:e.level}),i++;i<o&&e.src.charCodeAt(i)===32;)i++;return e.pos=i,!0}}return n||(e.pending+="\\"),e.pos++,!0}function go(e,n){var r,i,o,l,c,t=e.pos,s=e.src.charCodeAt(t);if(s!==96)return!1;for(r=t,t++,i=e.posMax;t<i&&e.src.charCodeAt(t)===96;)t++;for(o=e.src.slice(r,t),l=c=t;(l=e.src.indexOf("`",c))!==-1;){for(c=l+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(c-l===o.length)return n||e.push({type:"code",content:e.src.slice(t,l).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=c,!0}return n||(e.pending+=o),e.pos+=o.length,!0}function mo(e,n){var r,i,o,l=e.posMax,c=e.pos,t,s;if(e.src.charCodeAt(c)!==126||n||c+4>=l||e.src.charCodeAt(c+1)!==126||e.level>=e.options.maxNesting||(t=c>0?e.src.charCodeAt(c-1):-1,s=e.src.charCodeAt(c+2),t===126)||s===126||s===32||s===10)return!1;for(i=c+2;i<l&&e.src.charCodeAt(i)===126;)i++;if(i>c+3)return e.pos+=i-c,n||(e.pending+=e.src.slice(c,i)),!0;for(e.pos=c+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===126&&e.src.charCodeAt(e.pos+1)===126&&(t=e.src.charCodeAt(e.pos-1),s=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,s!==126&&t!==126&&(t!==32&&t!==10?o--:s!==32&&s!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=c+2,n||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=c,!1)}function bo(e,n){var r,i,o,l=e.posMax,c=e.pos,t,s;if(e.src.charCodeAt(c)!==43||n||c+4>=l||e.src.charCodeAt(c+1)!==43||e.level>=e.options.maxNesting||(t=c>0?e.src.charCodeAt(c-1):-1,s=e.src.charCodeAt(c+2),t===43)||s===43||s===32||s===10)return!1;for(i=c+2;i<l&&e.src.charCodeAt(i)===43;)i++;if(i!==c+2)return e.pos+=i-c,n||(e.pending+=e.src.slice(c,i)),!0;for(e.pos=c+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===43&&e.src.charCodeAt(e.pos+1)===43&&(t=e.src.charCodeAt(e.pos-1),s=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,s!==43&&t!==43&&(t!==32&&t!==10?o--:s!==32&&s!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=c+2,n||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=c,!1)}function yo(e,n){var r,i,o,l=e.posMax,c=e.pos,t,s;if(e.src.charCodeAt(c)!==61||n||c+4>=l||e.src.charCodeAt(c+1)!==61||e.level>=e.options.maxNesting||(t=c>0?e.src.charCodeAt(c-1):-1,s=e.src.charCodeAt(c+2),t===61)||s===61||s===32||s===10)return!1;for(i=c+2;i<l&&e.src.charCodeAt(i)===61;)i++;if(i!==c+2)return e.pos+=i-c,n||(e.pending+=e.src.slice(c,i)),!0;for(e.pos=c+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===61&&e.src.charCodeAt(e.pos+1)===61&&(t=e.src.charCodeAt(e.pos-1),s=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,s!==61&&t!==61&&(t!==32&&t!==10?o--:s!==32&&s!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=c+2,n||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=c,!1)}function Se(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function Ee(e,n){var r=n,i,o,l,c=!0,t=!0,s=e.posMax,u=e.src.charCodeAt(n);for(i=n>0?e.src.charCodeAt(n-1):-1;r<s&&e.src.charCodeAt(r)===u;)r++;return r>=s&&(c=!1),l=r-n,l>=4?c=t=!1:(o=r<s?e.src.charCodeAt(r):-1,(o===32||o===10)&&(c=!1),(i===32||i===10)&&(t=!1),u===95&&(Se(i)&&(c=!1),Se(o)&&(t=!1))),{can_open:c,can_close:t,delims:l}}function Ao(e,n){var r,i,o,l,c,t,s,u=e.posMax,f=e.pos,a=e.src.charCodeAt(f);if(a!==95&&a!==42||n)return!1;if(s=Ee(e,f),r=s.delims,!s.can_open)return e.pos+=r,n||(e.pending+=e.src.slice(f,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=f+r,t=[r];e.pos<u;){if(e.src.charCodeAt(e.pos)===a){if(s=Ee(e,e.pos),i=s.delims,s.can_close){for(l=t.pop(),c=i;l!==c;){if(c<l){t.push(l-c);break}if(c-=l,t.length===0)break;e.pos+=l,l=t.pop()}if(t.length===0){r=l,o=!0;break}e.pos+=i;continue}s.can_open&&t.push(i),e.pos+=i;continue}e.parser.skipToken(e)}return o?(e.posMax=e.pos,e.pos=f+r,n||((r===2||r===3)&&e.push({type:"strong_open",level:e.level++}),(r===1||r===3)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(r===1||r===3)&&e.push({type:"em_close",level:--e.level}),(r===2||r===3)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+r,e.posMax=u,!0):(e.pos=f,!1)}var wo=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Co(e,n){var r,i,o=e.posMax,l=e.pos;if(e.src.charCodeAt(l)!==126||n||l+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=l+1;e.pos<o;){if(e.src.charCodeAt(e.pos)===126){r=!0;break}e.parser.skipToken(e)}return!r||l+1===e.pos||(i=e.src.slice(l+1,e.pos),i.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=l,!1):(e.posMax=e.pos,e.pos=l+1,n||e.push({type:"sub",level:e.level,content:i.replace(wo,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}var Mo=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function So(e,n){var r,i,o=e.posMax,l=e.pos;if(e.src.charCodeAt(l)!==94||n||l+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=l+1;e.pos<o;){if(e.src.charCodeAt(e.pos)===94){r=!0;break}e.parser.skipToken(e)}return!r||l+1===e.pos||(i=e.src.slice(l+1,e.pos),i.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=l,!1):(e.posMax=e.pos,e.pos=l+1,n||e.push({type:"sup",level:e.level,content:i.replace(Mo,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}function Eo(e,n){var r,i,o,l,c,t,s,u,f=!1,a=e.pos,h=e.posMax,d=e.pos,k=e.src.charCodeAt(d);if(k===33&&(f=!0,k=e.src.charCodeAt(++d)),k!==91||e.level>=e.options.maxNesting||(r=d+1,i=Q(e,d),i<0))return!1;if(t=i+1,t<h&&e.src.charCodeAt(t)===40){for(t++;t<h&&(u=e.src.charCodeAt(t),!(u!==32&&u!==10));t++);if(t>=h)return!1;for(d=t,He(e,t)?(l=e.linkContent,t=e.pos):l="",d=t;t<h&&(u=e.src.charCodeAt(t),!(u!==32&&u!==10));t++);if(t<h&&d!==t&&Ve(e,t))for(c=e.linkContent,t=e.pos;t<h&&(u=e.src.charCodeAt(t),!(u!==32&&u!==10));t++);else c="";if(t>=h||e.src.charCodeAt(t)!==41)return e.pos=a,!1;t++}else{if(e.linkLevel>0)return!1;for(;t<h&&(u=e.src.charCodeAt(t),!(u!==32&&u!==10));t++);if(t<h&&e.src.charCodeAt(t)===91&&(d=t+1,t=Q(e,t),t>=0?o=e.src.slice(d,t++):t=d-1),o||(typeof o>"u"&&(t=i+1),o=e.src.slice(r,i)),s=e.env.references[Ue(o)],!s)return e.pos=a,!1;l=s.href,c=s.title}return n||(e.pos=r,e.posMax=i,f?e.push({type:"image",src:l,title:c,alt:e.src.substr(r,i-r),level:e.level}):(e.push({type:"link_open",href:l,title:c,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=t,e.posMax=h,!0}function Io(e,n){var r,i,o,l,c=e.posMax,t=e.pos;return t+2>=c||e.src.charCodeAt(t)!==94||e.src.charCodeAt(t+1)!==91||e.level>=e.options.maxNesting||(r=t+2,i=Q(e,t+1),i<0)?!1:(n||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),o=e.env.footnotes.list.length,e.pos=r,e.posMax=i,e.push({type:"footnote_ref",id:o,level:e.level}),e.linkLevel++,l=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[o]={tokens:e.tokens.splice(l)},e.linkLevel--),e.pos=i+1,e.posMax=c,!0)}function $o(e,n){var r,i,o,l,c=e.posMax,t=e.pos;if(t+3>c||!e.env.footnotes||!e.env.footnotes.refs||e.src.charCodeAt(t)!==91||e.src.charCodeAt(t+1)!==94||e.level>=e.options.maxNesting)return!1;for(i=t+2;i<c;i++){if(e.src.charCodeAt(i)===32||e.src.charCodeAt(i)===10)return!1;if(e.src.charCodeAt(i)===93)break}return i===t+2||i>=c||(i++,r=e.src.slice(t+2,i-1),typeof e.env.footnotes.refs[":"+r]>"u")?!1:(n||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+r]<0?(o=e.env.footnotes.list.length,e.env.footnotes.list[o]={label:r,count:0},e.env.footnotes.refs[":"+r]=o):o=e.env.footnotes.refs[":"+r],l=e.env.footnotes.list[o].count,e.env.footnotes.list[o].count++,e.push({type:"footnote_ref",id:o,subId:l,level:e.level})),e.pos=i,e.posMax=c,!0)}var To=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],No=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Do=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function zo(e,n){var r,i,o,l,c,t=e.pos;return e.src.charCodeAt(t)!==60||(r=e.src.slice(t),r.indexOf(">")<0)?!1:(i=r.match(Do),i?To.indexOf(i[1].toLowerCase())<0||(l=i[0].slice(1,-1),c=_e(l),!e.parser.validateLink(l))?!1:(n||(e.push({type:"link_open",href:c,level:e.level}),e.push({type:"text",content:l,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=i[0].length,!0):(o=r.match(No),o?(l=o[0].slice(1,-1),c=_e("mailto:"+l),e.parser.validateLink(c)?(n||(e.push({type:"link_open",href:c,level:e.level}),e.push({type:"text",content:l,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=o[0].length,!0):!1):!1))}function oe(e,n){return e=e.source,n=n||"",function r(i,o){return i?(o=o.source||o,e=e.replace(i,o),r):new RegExp(e,n)}}var Ro=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,Bo=/[^"'=<>`\x00-\x20]+/,Po=/'[^']*'/,Oo=/"[^"]*"/,qo=oe(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",Bo)("single_quoted",Po)("double_quoted",Oo)(),Fo=oe(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",Ro)("attr_value",qo)(),jo=oe(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",Fo)(),Ho=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,Vo=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,Uo=/<[?].*?[?]>/,Zo=/<![A-Z]+\s+[^>]*>/,Lo=/<!\[CDATA\[[\s\S]*?\]\]>/,Go=oe(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",jo)("close_tag",Ho)("comment",Vo)("processing",Uo)("declaration",Zo)("cdata",Lo)();function Qo(e){var n=e|32;return n>=97&&n<=122}function Ko(e,n){var r,i,o,l=e.pos;return!e.options.html||(o=e.posMax,e.src.charCodeAt(l)!==60||l+2>=o)||(r=e.src.charCodeAt(l+1),r!==33&&r!==63&&r!==47&&!Qo(r))||(i=e.src.slice(l).match(Go),!i)?!1:(n||e.push({type:"htmltag",content:e.src.slice(l,l+i[0].length),level:e.level}),e.pos+=i[0].length,!0)}var Wo=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,Yo=/^&([a-z][a-z0-9]{1,31});/i;function Jo(e,n){var r,i,o,l=e.pos,c=e.posMax;if(e.src.charCodeAt(l)!==38)return!1;if(l+1<c){if(r=e.src.charCodeAt(l+1),r===35){if(o=e.src.slice(l).match(Wo),o)return n||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=Fe(i)?de(i):de(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(l).match(Yo),o){var t=Oe(o[1]);if(o[1]!==t)return n||(e.pending+=t),e.pos+=o[0].length,!0}}return n||(e.pending+="&"),e.pos++,!0}var pe=[["text",vo],["newline",ko],["escape",xo],["backticks",go],["del",mo],["ins",bo],["mark",yo],["emphasis",Ao],["sub",Co],["sup",So],["links",Eo],["footnote_inline",Io],["footnote_ref",$o],["autolink",zo],["htmltag",Ko],["entity",Jo]];function ie(){this.ruler=new S;for(var e=0;e<pe.length;e++)this.ruler.push(pe[e][0],pe[e][1]);this.validateLink=Xo}ie.prototype.skipToken=function(e){var n=this.ruler.getRules(""),r=n.length,i=e.pos,o,l;if((l=e.cacheGet(i))>0){e.pos=l;return}for(o=0;o<r;o++)if(n[o](e,!0)){e.cacheSet(i,e.pos);return}e.pos++,e.cacheSet(i,e.pos)};ie.prototype.tokenize=function(e){for(var n=this.ruler.getRules(""),r=n.length,i=e.posMax,o,l;e.pos<i;){for(l=0;l<r&&(o=n[l](e,!1),!o);l++);if(o){if(e.pos>=i)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};ie.prototype.parse=function(e,n,r,i){var o=new B(e,this,n,r,i);this.tokenize(o)};function Xo(e){var n=["vbscript","javascript","file","data"],r=e.trim().toLowerCase();return r=z(r),!(r.indexOf(":")!==-1&&n.indexOf(r.split(":")[0])!==-1)}var ei={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},ni={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},ri={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},oi={default:ei,full:ni,commonmark:ri};function Ge(e,n,r){this.src=n,this.env=r,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function T(e,n){typeof e!="string"&&(n=e,e="default"),n&&n.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new ie,this.block=new ke,this.core=new Ze,this.renderer=new ve,this.ruler=new S,this.options={},this.configure(oi[e]),this.set(n||{})}T.prototype.set=function(e){qe(this.options,e)};T.prototype.configure=function(e){var n=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&n[r].ruler.enable(e.components[r].rules,!0)})};T.prototype.use=function(e,n){return e(this,n),this};T.prototype.parse=function(e,n){var r=new Ge(this,e,n);return this.core.process(r),r.tokens};T.prototype.render=function(e,n){return n=n||{},this.renderer.render(this.parse(e,n),this.options,n)};T.prototype.parseInline=function(e,n){var r=new Ge(this,e,n);return r.inlineMode=!0,this.core.process(r),r.tokens};T.prototype.renderInline=function(e,n){return n=n||{},this.renderer.render(this.parseInline(e,n),this.options,n)};const ii={class:"preview d-flex flex-column"},li=["innerHTML"],ti=$({__name:"Preview",setup(e){const{rawText:n,parsedText:r,isPreviewActive:i}=F(M()),o=new T({html:!0,breaks:!0,linkify:!0,typographer:!0}),l=c=>o.render(c);return Je(()=>{r.value=l(n.value)}),(c,t)=>(b(),y("div",ii,[m("div",{class:ne(["preview__area",{active:x(i)}]),innerHTML:x(r)},null,10,li)]))}});const ci=I(ti,[["__scopeId","data-v-0fbb0cbf"]]),si=e=>(Ne("data-v-f1d72452"),e=e(),De(),e),ui={class:"delete__modal d-flex flex-column w-100 h-100 position-absolute"},fi=si(()=>m("h4",{class:"weight-700"}," Delete this note? ",-1)),ai={class:"weight-400"},pi=$({__name:"DeleteModal",setup(e,{emit:n}){const{noteTitle:r,currentNoteId:i}=F(M()),{navigateCurrentNote:o,removeNote:l}=M(),c=s=>n(D.toggleDeleteModal,s),t=async()=>{await l(i.value),c(!1),await o("")};return(s,u)=>(b(),y("div",null,[m("div",ui,[fi,m("p",ai," Are you sure you want to delete the ‘"+U(x(r))+"’ note and its contents? This action cannot be reversed. ",1),m("button",{class:"w-100 weight-400",onClick:t}," Confirm & Delete ")]),m("div",{class:"modal-overlay",onClick:u[0]||(u[0]=f=>c(!1))})]))}});const hi=I(pi,[["__scopeId","data-v-f1d72452"]]),di={class:"home d-flex"},_i={class:"home__container"},vi=$({__name:"index",setup(e){const{navigateCurrentNote:n,initStoreNotes:r,setCurrentNote:i}=M();en({title:"MacOS Note App",meta:[{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"},{name:"description",content:"Home page of MacOS Note App"}]});const{isPreviewActive:o}=F(M()),{id:l}=K(),c=A(!0),t=A(!1),s=A(!1),u=a=>s.value=a,f=a=>o.value=a;return Xe(async()=>{await r(),l.value?i(l.value):await n(""),t.value=!0}),(a,h)=>{const d=Un,k=xr,_=br,v=ci,g=hi;return b(),y("div",di,[Z(N(d,{"is-load-data":x(t),onAddNewNote:h[0]||(h[0]=C=>f(!1)),onToggleDeleteModal:h[1]||(h[1]=C=>u(!0))},null,8,["is-load-data"]),[[se,x(c)]]),m("div",_i,[m("div",{class:ne(["home__container-main d-flex flex-column",{main:!x(o)}])},[x(t)?(b(),L(k,{key:0,"date-state":!x(o)},null,8,["date-state"])):q("",!0),Z(N(_,null,null,512),[[se,!x(o)]]),Z(N(v,null,null,512),[[se,x(o)]])],2)]),x(s)?(b(),L(g,{key:0,onToggleDeleteModal:h[2]||(h[2]=C=>u(!1))})):q("",!0)])}}});const gi=I(vi,[["__scopeId","data-v-21c358ee"]]);export{gi as default};

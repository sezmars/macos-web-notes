var Ke=Object.defineProperty;var Xe=(e,n,r)=>n in e?Ke(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var T=(e,n,r)=>(Xe(e,typeof n!="symbol"?n+"":n,r),r);import{_ as $,j as b,k as y,l as m,d as I,y as oe,r as w,z as Ye,A as Je,n as Ie,u as en,B as H,m as D,C as x,D as G,E as F,F as Ne,G as nn,H as re,t as U,v as De,x as Re,o as ze,I as Z,J as Be,K as Oe,L as rn,M as on,N as ln,O as fe}from"./entry.4527d466.js";import{u as tn}from"./vue.f36acd1f.e15bcaae.js";const sn={},cn={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16"},un=m("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"},null,-1),fn=[un];function an(e,n){return b(),y("svg",cn,fn)}const hn=$(sn,[["render",an]]),pn={},dn={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},_n=m("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"},null,-1),vn=m("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"},null,-1),gn=[_n,vn];function xn(e,n){return b(),y("svg",dn,gn)}const kn=$(pn,[["render",xn]]),mn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-right",viewBox:"0 0 16 16"},bn=m("path",{"fill-rule":"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),yn=m("path",{"fill-rule":"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),wn=[bn,yn],An={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-left",viewBox:"0 0 16 16"},Cn=m("path",{"fill-rule":"evenodd",d:"M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),Mn=m("path",{"fill-rule":"evenodd",d:"M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),Sn=[Cn,Mn],En=I({__name:"Menu",props:{variant:{}},setup(e){return(n,r)=>n.variant==="open"?(b(),y("svg",mn,wn)):(b(),y("svg",An,Sn))}});let Y=null;const ie=()=>Y?Promise.resolve(Y):new Promise((e,n)=>{const r=indexedDB.open("mdNotes",1);r.onupgradeneeded=i=>{var l;((l=i.target)==null?void 0:l.result).createObjectStore("mdNotes",{keyPath:"id"})},r.onsuccess=i=>{Y=i.target.result,e(Y)},r.onerror=i=>{n(i.target.error)}}),V=async()=>{const r=(await ie()).transaction("mdNotes","readonly").objectStore("mdNotes");return new Promise((i,o)=>{const l=r.getAll();l.onsuccess=t=>{const s=t.target.result;s.length&&s.sort((c,u)=>new Date(u.updated).getTime()-new Date(c.updated).getTime()),i(s)},l.onerror=t=>{o(t.target.error)}})},Tn=async e=>{const i=(await ie()).transaction("mdNotes","readwrite").objectStore("mdNotes");return new Promise((o,l)=>{const t=i.put(e);t.onsuccess=()=>{o()},t.onerror=s=>{l(s.target.error)}})},$n=async e=>{const i=(await ie()).transaction("mdNotes","readwrite").objectStore("mdNotes");return new Promise((o,l)=>{const t=i.add(e);t.onsuccess=()=>{o()},t.onerror=s=>{l(s.target.error)}})},In=async e=>{const i=(await ie()).transaction("mdNotes","readwrite").objectStore("mdNotes");return new Promise((o,l)=>{const t=i.delete(e);t.onsuccess=()=>{o()},t.onerror=s=>{l(s.target.error)}})},K=()=>{const e=oe(),n=w(e.query.note);return Ye(()=>e.query,r=>{n.value=r.note}),{id:n}},_e=(e,n)=>e.length<=n?e:e.substring(0,n)+"...",Nn=e=>{var l,t;const n=/#\s+(.+)/g,r=[];let i;for(;(i=n.exec(e))!==null;)r.push(i[1]);return((l=e[0])==null?void 0:l.trim().includes("#"))?_e(r[0],20).trim():(t=_e(e,20))==null?void 0:t.trim()};var R=(e=>(e.toggleDeleteModal="toggle-delete-modal",e.toggleMenu="toggle-menu",e.addNewNote="add-new-note",e.newNote="New Note",e))(R||{});const M=Je("store",()=>{const e=w(R.newNote),n=w(""),r=w(""),i=w(!1),o=w([]),l=w(""),t=w(""),s=_=>{const v=o.value.find(k=>k.id===_);v&&(l.value=v.id,e.value=v.title,n.value=v.content,t.value=v.updated)},c=async()=>{o.value=await V()},u=async _=>{const v=_.toLowerCase().trim(),k=await V();o.value=k.filter(C=>(C.title.toLowerCase().includes(v)||C.content.toLowerCase().includes(v))&&C)},f=async()=>{const{id:_}=K(),v=o.value.find(C=>C.id===_.value),k={id:"",title:Nn(n.value)||e.value,content:n.value,created:new Date().toISOString(),updated:new Date().toISOString()};v&&(k.id=v.id,k.created=v.created,await Tn(k)),o.value=await V()},a=async(_=!1)=>{const v={id:window.crypto.getRandomValues(new Uint32Array(1))[0].toString(16),title:R.newNote,content:_?" ":n.value,created:new Date().toISOString(),updated:new Date().toISOString()};await $n(v),o.value=await V(),s(v.id),await g(v.id)},p=async _=>{await In(_),o.value=await V(),e.value=R.newNote,n.value=""},d=()=>o.value&&o.value.length>0,g=async _=>{await Ie({path:"/",query:_?{note:_}:{}})};return{rawText:n,parsedText:r,noteTitle:e,isPreviewActive:i,currentNoteId:l,currentNoteUpdateDate:t,notes:o,saveNote:f,createNote:a,setCurrentNote:s,navigateCurrentNote:g,getNotesLength:d,initStoreNotes:c,searchNotes:u,removeNote:p}}),Dn=()=>en().$device,qe=(e,n="onlyTime")=>{const r=new Date(e),i={hour:"2-digit",minute:"2-digit"};n==="fullDate"&&(i.second="2-digit");const o=r.toLocaleTimeString([],i);if(n==="onlyTime")return`${o}`;if(n==="fullDate"){const l=r.toLocaleString("default",{year:"numeric"}),t=r.toLocaleString("default",{month:"2-digit"}),s=r.toLocaleString("default",{day:"2-digit"});return`${l}/${t}/${s} ${o}`}},Rn=e=>(De("data-v-9e2bd312"),e=e(),Re(),e),zn={class:"d-flex"},Bn={class:"up d-flex align-items-start flex-column"},On={class:"d-flex gap-4"},qn={key:0,class:"notes__list d-flex flex-column"},Pn=["onClick"],Fn={class:"notes__list-note-info d-flex flex-column gap-3"},Hn={class:"notes__list-note-info-name weight-500 text-overflow-ellipsis"},jn={class:"d-flex"},Ln={class:"notes__list-note-info-date weight-400 text-overflow-ellipsis"},Vn={class:"notes__list-note-info-date weight-300 text-overflow-ellipsis"},Un={key:0,class:"d-flex emty"},Zn=Rn(()=>m("span",null,"No notes",-1)),Gn=[Zn],Qn=I({__name:"Sidebar",props:{isLoadData:Boolean},setup(e,{emit:n}){const r=e,{getNotesLength:i}=M(),{isMobile:o}=Dn(),{id:l}=K(),{setCurrentNote:t,navigateCurrentNote:s,createNote:c}=M(),{notes:u,rawText:f,currentNoteId:a}=H(M()),p=()=>{!f.value||!a.value||n(R.toggleDeleteModal,!0)},d=async()=>(await c(!0),n(R.addNewNote,!1)),g=w(!0),_=v=>g.value=v;return g.value=!o,(v,k)=>{const C=hn,j=kn,L=En;return b(),y("div",zn,[m("div",{class:re(["sidebar d-flex align-items-start flex-column transition",{hidden:!x(g),open:x(g)}])},[m("div",Bn,[m("div",On,[D(C,{class:"cursor-pointer",onClick:k[0]||(k[0]=E=>d())}),x(l)&&x(i)()?(b(),G(j,{key:0,class:"cursor-pointer",onClick:p})):F("",!0)]),x(i)()?(b(),y("ul",qn,[(b(!0),y(Ne,null,nn(x(u),E=>(b(),y("li",{key:E.id,class:re([x(l)===E.id?"active":"","notes__list-note d-flex align-items-center gap-6"]),onClick:se=>{x(t)(E.id),x(s)(E.id)}},[m("div",Fn,[m("span",Hn,U(E.title),1),m("div",jn,[m("span",Ln,U(("formatDate"in v?v.formatDate:x(qe))(E.updated))+"   ",1),m("span",Vn,U(("truncateText"in v?v.truncateText:x(_e))(E.content,20)),1)])])],10,Pn))),128))])):F("",!0)]),r.isLoadData&&!x(i)()?(b(),y("div",Un,Gn)):F("",!0)],2),m("button",{class:"menu",onClick:k[1]||(k[1]=E=>_(!x(g)))},[D(L,{variant:x(g)?"close":"open"},null,8,["variant"])])])}}});const Wn=$(Qn,[["__scopeId","data-v-9e2bd312"]]),Kn={},Xn={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-markdown-fill",viewBox:"0 0 16 16"},Yn=m("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm11.5 1a.5.5 0 0 0-.5.5v3.793L9.854 8.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L12 9.293V5.5a.5.5 0 0 0-.5-.5zM3.56 7.01h.056l1.428 3.239h.774l1.42-3.24h.056V11h1.073V5.001h-1.2l-1.71 3.894h-.039l-1.71-3.894H2.5V11h1.06V7.01z"},null,-1),Jn=[Yn];function er(e,n){return b(),y("svg",Xn,Jn)}const nr=$(Kn,[["render",er]]),rr={},or={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},ir=m("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"},null,-1),lr=[ir];function tr(e,n){return b(),y("svg",or,lr)}const sr=$(rr,[["render",tr]]),cr={},ur={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},fr=m("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"},null,-1),ar=[fr];function hr(e,n){return b(),y("svg",ur,ar)}const pr=$(cr,[["render",hr]]),dr={class:"input-icon-wrap"},_r={class:"input-icon"},vr=I({__name:"Search",setup(e){const{searchNotes:n}=M(),r=oe(),i=w(null),o=r.query.q,l=async()=>{var s;const t=(s=i.value)==null?void 0:s.value;await Ie({path:"/",query:{q:t,note:r.query.note}}),await n(t)};return ze(async()=>{o&&await l()}),(t,s)=>{const c=pr;return b(),y("div",dr,[m("span",_r,[D(c)]),Z(m("input",{ref_key:"input",ref:i,"onUpdate:modelValue":s[0]||(s[0]=u=>Oe(o)?o.value=u:null),type:"text",placeholder:"Search",class:"input-with-icon",onInput:l},null,544),[[Be,x(o)]])])}}});const gr={class:"w-100 d-flex align-items-center"},xr={class:"left d-flex align-items-center gap-5"},kr={class:"header position-sticky d-flex align-items-center weight-500"},mr={class:"right d-flex align-items-center gap-9"},br={key:0,class:"d-flex justify-content-center date"},yr=I({__name:"Header",props:{dateState:Boolean},setup(e){const n=e,{currentNoteUpdateDate:r,isPreviewActive:i}=H(M()),{getNotesLength:o}=M(),{id:l}=K();return(t,s)=>{const c=nr,u=sr,f=vr;return b(),y(Ne,null,[m("header",gr,[m("div",xr,[m("div",kr,[x(i)?(b(),G(c,{key:0,class:"cursor-pointer","is-preview-active":x(i),onClick:s[0]||(s[0]=a=>i.value=!x(i))},null,8,["is-preview-active"])):(b(),G(u,{key:1,class:"cursor-pointer","is-preview-active":x(i),onClick:s[1]||(s[1]=a=>i.value=!x(i))},null,8,["is-preview-active"]))])]),m("div",mr,[D(f)])]),n.dateState&&x(r)&&x(l)&&x(o)()?(b(),y("div",br,U(("formatDate"in t?t.formatDate:x(qe))(x(r),"fullDate")),1)):F("",!0)],64)}}});const wr=$(yr,[["__scopeId","data-v-6037cbe0"]]);class Ar{constructor(n){T(this,"origBkgColor");T(this,"ele");T(this,"searchArg");T(this,"sensitive");T(this,"word");T(this,"sel");T(this,"container");T(this,"backdrop");T(this,"hilite");T(this,"observer");T(this,"handlers");if(n.tagName!=="TEXTAREA")throw Object.assign(new Error("The element must be a textarea"));const r=window.getComputedStyle(n);this.origBkgColor=r.backgroundColor,this.ele=n,this.searchArg="",this.sensitive=!1,this.word=!1,this.sel=-1,this.handlers={input:this.inputHandler.bind(this),scroll:this.scrollHandler.bind(this)},this.ele.classList.add("hlta-textarea"),this.ele.addEventListener("input",this.handlers.input),this.ele.addEventListener("scroll",this.handlers.scroll);const i=document.createElement("div");i.classList.add("hlta-container"),this.container=i;const o=document.createElement("div");o.classList.add("hlta-backdrop"),this.backdrop=o;const l=document.createElement("div");l.classList.add("hlta-highlight"),this.hilite=l,this.ele.parentNode.insertBefore(i,this.ele.nextSibling),this.backdrop.append(this.hilite),this.container.append(this.backdrop),this.container.appendChild(this.ele),this.observer=new ResizeObserver(this.resizeObs.bind(this)),this.observer.observe(this.ele),this.inputHandler()}search(n,r,i){this.searchArg=n,this.sensitive=!!r,this.word=!!i,this.inputHandler(),this.sel=-1,this.next()}next(){this.sel+=1,this.setSelection(!0)}prev(){this.sel-=1,this.setSelection(!0)}count(){return this.hilite.querySelectorAll("mark").length}clear(){this.searchArg="",this.hilite.innerHTML=this.hilite.textContent,this.sel=-1}destroy(){for(this.ele.removeEventListener("input",this.handlers.input),this.ele.removeEventListener("scroll",this.handlers.scroll),this.observer.disconnect(),this.container.parentNode.insertBefore(this.ele,this.container);this.container.firstChild;)this.container.removeChild(this.container.lastChild);this.container.remove()}resizeObs(){const n=window.getComputedStyle(this.ele),r=this.ele.scrollWidth,i=this.ele.offsetHeight-20;this.backdrop.style.cssText=`width: ${r}px; height: ${i}px; margin: ${n.marginTop} ${n.marginRight} ${n.marginBottom} ${n.marginLeft};
                   background-color: ${this.origBkgColor}`,this.copyStyles(this.ele,this.hilite,["width","paddingLeft","paddingRight","paddingTop","paddingBottom","borderTop","letterSpacing","borderLeft","borderRight","borderBottom","fontFamily","fontSize","fontWeight","lineHeight"]),this.hilite.style.minHeight=n.height,this.hilite.style.whiteSpace="pre-wrap"}inputHandler(){this.hilite.innerHTML=this.markText(),this.scrollHandler(),this.sel>-1&&this.setSelection()}copyStyles(n,r,i){const o=window.getComputedStyle(n);i.forEach(l=>r.style[l]=o[l])}markText(){const n=this.ele.value.replace(/</g,"&lt;").replace(/>/g,"&gt;");if(this.searchArg){const r=this.searchArg.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=this.word?"\\b":"",o=new RegExp(i+"("+this.escapeString(r)+")"+i,"g"+(this.sensitive?"":"i"));return n.replace(o,"<mark>$&</mark>")}else return n}escapeString(n){const r=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"];return n.replace(RegExp("["+r.join("\\")+"]","g"),"\\$&")}scrollHandler(){this.backdrop.scrollTop=this.ele.scrollTop||0;const n=this.ele.scrollLeft;this.backdrop.style.transform=n>0?"translateX("+-n+"px)":""}setSelection(n){const r=this.hilite.querySelectorAll("mark"),i=r.length;this.sel>=i&&(this.sel=0),this.sel<0&&(this.sel=i-1);for(let o=0;o<i;++o)o===this.sel?(r[o].classList.add("sel"),n&&(this.ele.scrollTop=r[o].offsetTop>10?r[o].offsetTop-10:r[o].offsetTop)):r[o].classList.remove("sel")}}const Cr={class:"editor d-flex flex-column"},Mr=I({__name:"Editor",setup(e){const{saveNote:n,createNote:r}=M(),{rawText:i}=H(M()),o=async()=>{const{id:c}=K();c.value||await r()},l=w(),t=oe();let s;return rn(()=>{setTimeout(()=>{const c=t.query.q,u=!1,f=!1;s==null||s.search((c==null?void 0:c.toString())||"",u,f)},10)}),ze(()=>{l&&l.value&&(l.value.focus(),s=new Ar(l.value))}),(c,u)=>(b(),y("div",Cr,[Z(m("textarea",{ref_key:"textarea",ref:l,"onUpdate:modelValue":u[0]||(u[0]=f=>Oe(i)?i.value=f:null),class:"editor__area",spellcheck:"false",onInput:u[1]||(u[1]=f=>{x(n)(),o()})},null,544),[[Be,x(i)]])]))}});const Sr=$(Mr,[["__scopeId","data-v-7bbf2088"]]);function Er(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pe={exports:{}};(()=>{var e={607:function(i,o,l){var t=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(o,"__esModule",{value:!0});var s=t(l(721)),c={highlight:function(u,f,a){if(u===void 0&&(u=""),f===void 0&&(f=""),a===void 0&&(a={}),s.default.validate.highlight(u,f,a),a=s.default.getOptions(a),!f)return u;var p=a.matchAll?"g":"";return p+=a.caseSensitive?"":"i",u.replace(new RegExp(f,p),function(d){return"<".concat(a.htmlTag,' class="').concat(a.hlClass,'">').concat(d,"</").concat(a.htmlTag,">")})}};o.default=c,i.exports=c},721:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var l={validate:{highlight:function(t,s,c){if(t&&typeof t!="string")throw new Error("The text parameter should be a string.");if(s&&typeof s!="string")throw new Error("The query parameter should be a string.");if(typeof c!="object")throw new Error("The options parameter should be an object.")},options:function(t){if(t===void 0&&(t={}),t.htmlTag!==void 0&&typeof t.htmlTag!="string")throw new Error("The htmlTab option should be a string.");if(t.hlClass!==void 0&&typeof t.hlClass!="string")throw new Error("The hlClass option should be a string.");if(t.matchAll!==void 0&&typeof t.matchAll!="boolean")throw new Error("The matchAll option should be a boolean.");if(t.caseSensitive!==void 0&&typeof t.caseSensitive!="boolean")throw new Error("The caseSensitive option should be a boolean.")}},getOptions:function(t){return t===void 0&&(t={}),this.validate.options(t),{htmlTag:t.htmlTag?t.htmlTag:"span",hlClass:t.hlClass?t.hlClass:"text-highlight",matchAll:t.matchAll===void 0||t.matchAll,caseSensitive:t.caseSensitive!==void 0&&t.caseSensitive}}};o.default=l}},n={},r=function i(o){var l=n[o];if(l!==void 0)return l.exports;var t=n[o]={exports:{}};return e[o].call(t.exports,t,t.exports,i),t.exports}(607);Pe.exports=r})();var Tr=Pe.exports;const $r=Er(Tr),Ir=(e,n)=>$r.highlight(e,n);var J;function Fe(e){return J=J||document.createElement("textarea"),J.innerHTML="&"+e+";",J.value}var Nr=Object.prototype.hasOwnProperty;function Dr(e,n){return e?Nr.call(e,n):!1}function He(e){var n=[].slice.call(arguments,1);return n.forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(i){e[i]=r[i]})}}),e}var Rr=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Q(e){return e.indexOf("\\")<0?e:e.replace(Rr,"$1")}function je(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function ve(e){if(e>65535){e-=65536;var n=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(n,r)}return String.fromCharCode(e)}var zr=/&([a-z#][a-z0-9]{1,31});/gi,Br=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function Or(e,n){var r=0,i=Fe(n);return n!==i?i:n.charCodeAt(0)===35&&Br.test(n)&&(r=n[1].toLowerCase()==="x"?parseInt(n.slice(2),16):parseInt(n.slice(1),10),je(r))?ve(r):e}function z(e){return e.indexOf("&")<0?e:e.replace(zr,Or)}var qr=/[&<>"]/,Pr=/[&<>"]/g,Fr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Hr(e){return Fr[e]}function A(e){return qr.test(e)?e.replace(Pr,Hr):e}var h={};h.blockquote_open=function(){return`<blockquote>
`};h.blockquote_close=function(e,n){return"</blockquote>"+B(e,n)};h.code=function(e,n){return e[n].block?"<pre><code>"+A(e[n].content)+"</code></pre>"+B(e,n):"<code>"+A(e[n].content)+"</code>"};h.fence=function(e,n,r,i,o){var l=e[n],t="",s=r.langPrefix,c="",u,f,a;if(l.params){if(u=l.params.split(/\s+/g),f=u.join(" "),Dr(o.rules.fence_custom,u[0]))return o.rules.fence_custom[u[0]](e,n,r,i,o);c=A(z(Q(f))),t=' class="'+s+c+'"'}return r.highlight?a=r.highlight.apply(r.highlight,[l.content].concat(u))||A(l.content):a=A(l.content),"<pre><code"+t+">"+a+"</code></pre>"+B(e,n)};h.fence_custom={};h.heading_open=function(e,n){return"<h"+e[n].hLevel+">"};h.heading_close=function(e,n){return"</h"+e[n].hLevel+`>
`};h.hr=function(e,n,r){return(r.xhtmlOut?"<hr />":"<hr>")+B(e,n)};h.bullet_list_open=function(){return`<ul>
`};h.bullet_list_close=function(e,n){return"</ul>"+B(e,n)};h.list_item_open=function(){return"<li>"};h.list_item_close=function(){return`</li>
`};h.ordered_list_open=function(e,n){var r=e[n],i=r.order>1?' start="'+r.order+'"':"";return"<ol"+i+`>
`};h.ordered_list_close=function(e,n){return"</ol>"+B(e,n)};h.paragraph_open=function(e,n){return e[n].tight?"":"<p>"};h.paragraph_close=function(e,n){var r=!(e[n].tight&&n&&e[n-1].type==="inline"&&!e[n-1].content);return(e[n].tight?"":"</p>")+(r?B(e,n):"")};h.link_open=function(e,n,r){var i=e[n].title?' title="'+A(z(e[n].title))+'"':"",o=r.linkTarget?' target="'+r.linkTarget+'"':"";return'<a href="'+A(e[n].href)+'"'+i+o+">"};h.link_close=function(){return"</a>"};h.image=function(e,n,r){var i=' src="'+A(e[n].src)+'"',o=e[n].title?' title="'+A(z(e[n].title))+'"':"",l=' alt="'+(e[n].alt?A(z(Q(e[n].alt))):"")+'"',t=r.xhtmlOut?" /":"";return"<img"+i+l+o+t+">"};h.table_open=function(){return`<table>
`};h.table_close=function(){return`</table>
`};h.thead_open=function(){return`<thead>
`};h.thead_close=function(){return`</thead>
`};h.tbody_open=function(){return`<tbody>
`};h.tbody_close=function(){return`</tbody>
`};h.tr_open=function(){return"<tr>"};h.tr_close=function(){return`</tr>
`};h.th_open=function(e,n){var r=e[n];return"<th"+(r.align?' style="text-align:'+r.align+'"':"")+">"};h.th_close=function(){return"</th>"};h.td_open=function(e,n){var r=e[n];return"<td"+(r.align?' style="text-align:'+r.align+'"':"")+">"};h.td_close=function(){return"</td>"};h.strong_open=function(){return"<strong>"};h.strong_close=function(){return"</strong>"};h.em_open=function(){return"<em>"};h.em_close=function(){return"</em>"};h.del_open=function(){return"<del>"};h.del_close=function(){return"</del>"};h.ins_open=function(){return"<ins>"};h.ins_close=function(){return"</ins>"};h.mark_open=function(){return"<mark>"};h.mark_close=function(){return"</mark>"};h.sub=function(e,n){return"<sub>"+A(e[n].content)+"</sub>"};h.sup=function(e,n){return"<sup>"+A(e[n].content)+"</sup>"};h.hardbreak=function(e,n,r){return r.xhtmlOut?`<br />
`:`<br>
`};h.softbreak=function(e,n,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};h.text=function(e,n){return A(e[n].content)};h.htmlblock=function(e,n){return e[n].content};h.htmltag=function(e,n){return e[n].content};h.abbr_open=function(e,n){return'<abbr title="'+A(z(e[n].title))+'">'};h.abbr_close=function(){return"</abbr>"};h.footnote_ref=function(e,n){var r=Number(e[n].id+1).toString(),i="fnref"+r;return e[n].subId>0&&(i+=":"+e[n].subId),'<sup class="footnote-ref"><a href="#fn'+r+'" id="'+i+'">['+r+"]</a></sup>"};h.footnote_block_open=function(e,n,r){var i=r.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return i+`<section class="footnotes">
<ol class="footnotes-list">
`};h.footnote_block_close=function(){return`</ol>
</section>
`};h.footnote_open=function(e,n){var r=Number(e[n].id+1).toString();return'<li id="fn'+r+'"  class="footnote-item">'};h.footnote_close=function(){return`</li>
`};h.footnote_anchor=function(e,n){var r=Number(e[n].id+1).toString(),i="fnref"+r;return e[n].subId>0&&(i+=":"+e[n].subId),' <a href="#'+i+'" class="footnote-backref">↩</a>'};h.dl_open=function(){return`<dl>
`};h.dt_open=function(){return"<dt>"};h.dd_open=function(){return"<dd>"};h.dl_close=function(){return`</dl>
`};h.dt_close=function(){return`</dt>
`};h.dd_close=function(){return`</dd>
`};function Le(e,n){return++n>=e.length-2?n:e[n].type==="paragraph_open"&&e[n].tight&&e[n+1].type==="inline"&&e[n+1].content.length===0&&e[n+2].type==="paragraph_close"&&e[n+2].tight?Le(e,n+2):n}var B=h.getBreak=function(n,r){return r=Le(n,r),r<n.length&&n[r].type==="list_item_close"?"":`
`};function xe(){this.rules=He({},h),this.getBreak=h.getBreak}xe.prototype.renderInline=function(e,n,r){for(var i=this.rules,o=e.length,l=0,t="";o--;)t+=i[e[l].type](e,l++,n,r,this);return t};xe.prototype.render=function(e,n,r){for(var i=this.rules,o=e.length,l=-1,t="";++l<o;)e[l].type==="inline"?t+=this.renderInline(e[l].children,n,r):t+=i[e[l].type](e,l,n,r,this);return t};function S(){this.__rules__=[],this.__cache__=null}S.prototype.__find__=function(e){for(var n=this.__rules__.length,r=-1;n--;)if(this.__rules__[++r].name===e)return r;return-1};S.prototype.__compile__=function(){var e=this,n=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(i){n.indexOf(i)<0&&n.push(i)})}),e.__cache__={},n.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(i){i.enabled&&(r&&i.alt.indexOf(r)<0||e.__cache__[r].push(i.fn))})})};S.prototype.at=function(e,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__[i].fn=n,this.__rules__[i].alt=o.alt||[],this.__cache__=null};S.prototype.before=function(e,n,r,i){var o=this.__find__(e),l=i||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:n,enabled:!0,fn:r,alt:l.alt||[]}),this.__cache__=null};S.prototype.after=function(e,n,r,i){var o=this.__find__(e),l=i||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:n,enabled:!0,fn:r,alt:l.alt||[]}),this.__cache__=null};S.prototype.push=function(e,n,r){var i=r||{};this.__rules__.push({name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};S.prototype.enable=function(e,n){e=Array.isArray(e)?e:[e],n&&this.__rules__.forEach(function(r){r.enabled=!1}),e.forEach(function(r){var i=this.__find__(r);if(i<0)throw new Error("Rules manager: invalid rule name "+r);this.__rules__[i].enabled=!0},this),this.__cache__=null};S.prototype.disable=function(e){e=Array.isArray(e)?e:[e],e.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!1},this),this.__cache__=null};S.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function jr(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}function O(e,n,r,i,o){this.src=e,this.env=i,this.options=r,this.parser=n,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}O.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};O.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level};O.prototype.cacheSet=function(e,n){for(var r=this.cache.length;r<=e;r++)this.cache.push(0);this.cache[e]=n};O.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};function W(e,n){var r,i,o,l=-1,t=e.posMax,s=e.pos,c=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=n+1,e.isInLabel=!0,r=1;e.pos<t;){if(o=e.src.charCodeAt(e.pos),o===91)r++;else if(o===93&&(r--,r===0)){i=!0;break}e.parser.skipToken(e)}return i?(l=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=r-1,e.pos=s,e.isInLabel=c,l}function Lr(e,n,r,i){var o,l,t,s,c,u;if(e.charCodeAt(0)!==42||e.charCodeAt(1)!==91||e.indexOf("]:")===-1||(o=new O(e,n,r,i,[]),l=W(o,1),l<0||e.charCodeAt(l+1)!==58))return-1;for(s=o.posMax,t=l+2;t<s&&o.src.charCodeAt(t)!==10;t++);return c=e.slice(2,l),u=e.slice(l+2,t).trim(),u.length===0?-1:(i.abbreviations||(i.abbreviations={}),typeof i.abbreviations[":"+c]>"u"&&(i.abbreviations[":"+c]=u),t)}function Vr(e){var n=e.tokens,r,i,o,l;if(!e.inlineMode){for(r=1,i=n.length-1;r<i;r++)if(n[r-1].type==="paragraph_open"&&n[r].type==="inline"&&n[r+1].type==="paragraph_close"){for(o=n[r].content;o.length&&(l=Lr(o,e.inline,e.options,e.env),!(l<0));)o=o.slice(l).trim();n[r].content=o,o.length||(n[r-1].tight=!0,n[r+1].tight=!0)}}}function ge(e){var n=z(e);try{n=decodeURI(n)}catch{}return encodeURI(n)}function Ve(e,n){var r,i,o,l=n,t=e.posMax;if(e.src.charCodeAt(n)===60){for(n++;n<t;){if(r=e.src.charCodeAt(n),r===10)return!1;if(r===62)return o=ge(Q(e.src.slice(l+1,n))),e.parser.validateLink(o)?(e.pos=n+1,e.linkContent=o,!0):!1;if(r===92&&n+1<t){n+=2;continue}n++}return!1}for(i=0;n<t&&(r=e.src.charCodeAt(n),!(r===32||r<32||r===127));){if(r===92&&n+1<t){n+=2;continue}if(r===40&&(i++,i>1)||r===41&&(i--,i<0))break;n++}return l===n||(o=Q(e.src.slice(l,n)),!e.parser.validateLink(o))?!1:(e.linkContent=o,e.pos=n,!0)}function Ue(e,n){var r,i=n,o=e.posMax,l=e.src.charCodeAt(n);if(l!==34&&l!==39&&l!==40)return!1;for(n++,l===40&&(l=41);n<o;){if(r=e.src.charCodeAt(n),r===l)return e.pos=n+1,e.linkContent=Q(e.src.slice(i+1,n)),!0;if(r===92&&n+1<o){n+=2;continue}n++}return!1}function Ze(e){return e.trim().replace(/\s+/g," ").toUpperCase()}function Ur(e,n,r,i){var o,l,t,s,c,u,f,a,p;if(e.charCodeAt(0)!==91||e.indexOf("]:")===-1||(o=new O(e,n,r,i,[]),l=W(o,0),l<0||e.charCodeAt(l+1)!==58))return-1;for(s=o.posMax,t=l+2;t<s&&(c=o.src.charCodeAt(t),!(c!==32&&c!==10));t++);if(!Ve(o,t))return-1;for(f=o.linkContent,t=o.pos,u=t,t=t+1;t<s&&(c=o.src.charCodeAt(t),!(c!==32&&c!==10));t++);for(t<s&&u!==t&&Ue(o,t)?(a=o.linkContent,t=o.pos):(a="",t=u);t<s&&o.src.charCodeAt(t)===32;)t++;return t<s&&o.src.charCodeAt(t)!==10?-1:(p=Ze(e.slice(1,l)),typeof i.references[p]>"u"&&(i.references[p]={title:a,href:f}),t)}function Zr(e){var n=e.tokens,r,i,o,l;if(e.env.references=e.env.references||{},!e.inlineMode){for(r=1,i=n.length-1;r<i;r++)if(n[r].type==="inline"&&n[r-1].type==="paragraph_open"&&n[r+1].type==="paragraph_close"){for(o=n[r].content;o.length&&(l=Ur(o,e.inline,e.options,e.env),!(l<0));)o=o.slice(l).trim();n[r].content=o,o.length||(n[r-1].tight=!0,n[r+1].tight=!0)}}}function Gr(e){var n=e.tokens,r,i,o;for(i=0,o=n.length;i<o;i++)r=n[i],r.type==="inline"&&e.inline.parse(r.content,e.options,e.env,r.children)}function Qr(e){var n,r,i,o,l,t,s,c,u,f=0,a=!1,p={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(d){return d.type==="footnote_reference_open"?(a=!0,c=[],u=d.label,!1):d.type==="footnote_reference_close"?(a=!1,p[":"+u]=c,!1):(a&&c.push(d),!a)}),!!e.env.footnotes.list)){for(t=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:f++}),n=0,r=t.length;n<r;n++){for(e.tokens.push({type:"footnote_open",id:n,level:f++}),t[n].tokens?(s=[],s.push({type:"paragraph_open",tight:!1,level:f++}),s.push({type:"inline",content:"",level:f,children:t[n].tokens}),s.push({type:"paragraph_close",tight:!1,level:--f})):t[n].label&&(s=p[":"+t[n].label]),e.tokens=e.tokens.concat(s),e.tokens[e.tokens.length-1].type==="paragraph_close"?l=e.tokens.pop():l=null,o=t[n].count>0?t[n].count:1,i=0;i<o;i++)e.tokens.push({type:"footnote_anchor",id:n,subId:i,level:f});l&&e.tokens.push(l),e.tokens.push({type:"footnote_close",level:--f})}e.tokens.push({type:"footnote_block_close",level:--f})}}var ye=` 
()[]'".,!?-`;function ae(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function Wr(e){var n,r,i,o,l,t,s,c,u,f,a,p,d=e.tokens;if(e.env.abbreviations){for(e.env.abbrRegExp||(p="(^|["+ye.split("").map(ae).join("")+"])("+Object.keys(e.env.abbreviations).map(function(g){return g.substr(1)}).sort(function(g,_){return _.length-g.length}).map(ae).join("|")+")($|["+ye.split("").map(ae).join("")+"])",e.env.abbrRegExp=new RegExp(p,"g")),f=e.env.abbrRegExp,r=0,i=d.length;r<i;r++)if(d[r].type==="inline"){for(o=d[r].children,n=o.length-1;n>=0;n--)if(l=o[n],l.type==="text"){for(c=0,t=l.content,f.lastIndex=0,u=l.level,s=[];a=f.exec(t);)f.lastIndex>c&&s.push({type:"text",content:t.slice(c,a.index+a[1].length),level:u}),s.push({type:"abbr_open",title:e.env.abbreviations[":"+a[2]],level:u++}),s.push({type:"text",content:a[2],level:u}),s.push({type:"abbr_close",level:--u}),c=f.lastIndex-a[3].length;s.length&&(c<t.length&&s.push({type:"text",content:t.slice(c),level:u}),d[r].children=o=[].concat(o.slice(0,n),s,o.slice(n+1)))}}}}var Kr=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Xr=/\((c|tm|r|p)\)/ig,Yr={c:"©",r:"®",p:"§",tm:"™"};function Jr(e){return e.indexOf("(")<0?e:e.replace(Xr,function(n,r){return Yr[r.toLowerCase()]})}function eo(e){var n,r,i,o,l;if(e.options.typographer){for(l=e.tokens.length-1;l>=0;l--)if(e.tokens[l].type==="inline")for(o=e.tokens[l].children,n=o.length-1;n>=0;n--)r=o[n],r.type==="text"&&(i=r.content,i=Jr(i),Kr.test(i)&&(i=i.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),r.content=i)}}var no=/['"]/,we=/['"]/g,ro=/[-\s()\[\]]/,Ae="’";function Ce(e,n){return n<0||n>=e.length?!1:!ro.test(e[n])}function P(e,n,r){return e.substr(0,n)+r+e.substr(n+1)}function oo(e){var n,r,i,o,l,t,s,c,u,f,a,p,d,g,_,v,k;if(e.options.typographer){for(k=[],_=e.tokens.length-1;_>=0;_--)if(e.tokens[_].type==="inline"){for(v=e.tokens[_].children,k.length=0,n=0;n<v.length;n++)if(r=v[n],!(r.type!=="text"||no.test(r.text))){for(s=v[n].level,d=k.length-1;d>=0&&!(k[d].level<=s);d--);k.length=d+1,i=r.content,l=0,t=i.length;e:for(;l<t&&(we.lastIndex=l,o=we.exec(i),!!o);){if(c=!Ce(i,o.index-1),l=o.index+1,g=o[0]==="'",u=!Ce(i,l),!u&&!c){g&&(r.content=P(r.content,o.index,Ae));continue}if(a=!u,p=!c,p){for(d=k.length-1;d>=0&&(f=k[d],!(k[d].level<s));d--)if(f.single===g&&k[d].level===s){f=k[d],g?(v[f.token].content=P(v[f.token].content,f.pos,e.options.quotes[2]),r.content=P(r.content,o.index,e.options.quotes[3])):(v[f.token].content=P(v[f.token].content,f.pos,e.options.quotes[0]),r.content=P(r.content,o.index,e.options.quotes[1])),k.length=d;continue e}}a?k.push({token:n,pos:o.index,single:g,level:s}):p&&g&&(r.content=P(r.content,o.index,Ae))}}}}}var he=[["block",jr],["abbr",Vr],["references",Zr],["inline",Gr],["footnote_tail",Qr],["abbr2",Wr],["replacements",eo],["smartquotes",oo]];function Ge(){this.options={},this.ruler=new S;for(var e=0;e<he.length;e++)this.ruler.push(he[e][0],he[e][1])}Ge.prototype.process=function(e){var n,r,i;for(i=this.ruler.getRules(""),n=0,r=i.length;n<r;n++)i[n](e)};function q(e,n,r,i,o){var l,t,s,c,u,f,a;for(this.src=e,this.parser=n,this.options=r,this.env=i,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",t=this.src,f=0,a=!1,s=c=f=0,u=t.length;c<u;c++){if(l=t.charCodeAt(c),!a)if(l===32){f++;continue}else a=!0;(l===10||c===u-1)&&(l!==10&&c++,this.bMarks.push(s),this.eMarks.push(c),this.tShift.push(f),a=!1,f=0,s=c+1)}this.bMarks.push(t.length),this.eMarks.push(t.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}q.prototype.isEmpty=function(n){return this.bMarks[n]+this.tShift[n]>=this.eMarks[n]};q.prototype.skipEmptyLines=function(n){for(var r=this.lineMax;n<r&&!(this.bMarks[n]+this.tShift[n]<this.eMarks[n]);n++);return n};q.prototype.skipSpaces=function(n){for(var r=this.src.length;n<r&&this.src.charCodeAt(n)===32;n++);return n};q.prototype.skipChars=function(n,r){for(var i=this.src.length;n<i&&this.src.charCodeAt(n)===r;n++);return n};q.prototype.skipCharsBack=function(n,r,i){if(n<=i)return n;for(;n>i;)if(r!==this.src.charCodeAt(--n))return n+1;return n};q.prototype.getLines=function(n,r,i,o){var l,t,s,c,u,f=n;if(n>=r)return"";if(f+1===r)return t=this.bMarks[f]+Math.min(this.tShift[f],i),s=o?this.eMarks[f]+1:this.eMarks[f],this.src.slice(t,s);for(c=new Array(r-n),l=0;f<r;f++,l++)u=this.tShift[f],u>i&&(u=i),u<0&&(u=0),t=this.bMarks[f]+u,f+1<r||o?s=this.eMarks[f]+1:s=this.eMarks[f],c[l]=this.src.slice(t,s);return c.join("")};function io(e,n,r){var i,o;if(e.tShift[n]-e.blkIndent<4)return!1;for(o=i=n+1;i<r;){if(e.isEmpty(i)){i++;continue}if(e.tShift[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=i,e.tokens.push({type:"code",content:e.getLines(n,o,4+e.blkIndent,!0),block:!0,lines:[n,e.line],level:e.level}),!0}function lo(e,n,r,i){var o,l,t,s,c,u=!1,f=e.bMarks[n]+e.tShift[n],a=e.eMarks[n];if(f+3>a||(o=e.src.charCodeAt(f),o!==126&&o!==96)||(c=f,f=e.skipChars(f,o),l=f-c,l<3)||(t=e.src.slice(f,a).trim(),t.indexOf("`")>=0))return!1;if(i)return!0;for(s=n;s++,!(s>=r||(f=c=e.bMarks[s]+e.tShift[s],a=e.eMarks[s],f<a&&e.tShift[s]<e.blkIndent));)if(e.src.charCodeAt(f)===o&&!(e.tShift[s]-e.blkIndent>=4)&&(f=e.skipChars(f,o),!(f-c<l)&&(f=e.skipSpaces(f),!(f<a)))){u=!0;break}return l=e.tShift[n],e.line=s+(u?1:0),e.tokens.push({type:"fence",params:t,content:e.getLines(n+1,s,l,!0),lines:[n,e.line],level:e.level}),!0}function to(e,n,r,i){var o,l,t,s,c,u,f,a,p,d,g,_=e.bMarks[n]+e.tShift[n],v=e.eMarks[n];if(_>v||e.src.charCodeAt(_++)!==62||e.level>=e.options.maxNesting)return!1;if(i)return!0;for(e.src.charCodeAt(_)===32&&_++,c=e.blkIndent,e.blkIndent=0,s=[e.bMarks[n]],e.bMarks[n]=_,_=_<v?e.skipSpaces(_):_,l=_>=v,t=[e.tShift[n]],e.tShift[n]=_-e.bMarks[n],a=e.parser.ruler.getRules("blockquote"),o=n+1;o<r&&(_=e.bMarks[o]+e.tShift[o],v=e.eMarks[o],!(_>=v));o++){if(e.src.charCodeAt(_++)===62){e.src.charCodeAt(_)===32&&_++,s.push(e.bMarks[o]),e.bMarks[o]=_,_=_<v?e.skipSpaces(_):_,l=_>=v,t.push(e.tShift[o]),e.tShift[o]=_-e.bMarks[o];continue}if(l)break;for(g=!1,p=0,d=a.length;p<d;p++)if(a[p](e,o,r,!0)){g=!0;break}if(g)break;s.push(e.bMarks[o]),t.push(e.tShift[o]),e.tShift[o]=-1337}for(u=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:f=[n,0],level:e.level++}),e.parser.tokenize(e,n,o),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=u,f[1]=e.line,p=0;p<t.length;p++)e.bMarks[p+n]=s[p],e.tShift[p+n]=t[p];return e.blkIndent=c,!0}function so(e,n,r,i){var o,l,t,s=e.bMarks[n],c=e.eMarks[n];if(s+=e.tShift[n],s>c||(o=e.src.charCodeAt(s++),o!==42&&o!==45&&o!==95))return!1;for(l=1;s<c;){if(t=e.src.charCodeAt(s++),t!==o&&t!==32)return!1;t===o&&l++}return l<3?!1:(i||(e.line=n+1,e.tokens.push({type:"hr",lines:[n,e.line],level:e.level})),!0)}function Me(e,n){var r,i,o;return i=e.bMarks[n]+e.tShift[n],o=e.eMarks[n],i>=o||(r=e.src.charCodeAt(i++),r!==42&&r!==45&&r!==43)||i<o&&e.src.charCodeAt(i)!==32?-1:i}function Se(e,n){var r,i=e.bMarks[n]+e.tShift[n],o=e.eMarks[n];if(i+1>=o||(r=e.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=e.src.charCodeAt(i++),!(r>=48&&r<=57)){if(r===41||r===46)break;return-1}}return i<o&&e.src.charCodeAt(i)!==32?-1:i}function co(e,n){var r,i,o=e.level+2;for(r=n+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===o&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].tight=!0,e.tokens[r].tight=!0,r+=2)}function uo(e,n,r,i){var o,l,t,s,c,u,f,a,p,d,g,_,v,k,C,j,L,E,se=!0,ce,X,be,ue;if((a=Se(e,n))>=0)v=!0;else if((a=Me(e,n))>=0)v=!1;else return!1;if(e.level>=e.options.maxNesting)return!1;if(_=e.src.charCodeAt(a-1),i)return!0;for(C=e.tokens.length,v?(f=e.bMarks[n]+e.tShift[n],g=Number(e.src.substr(f,a-f-1)),e.tokens.push({type:"ordered_list_open",order:g,lines:L=[n,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:L=[n,0],level:e.level++}),o=n,j=!1,ce=e.parser.ruler.getRules("list");o<r&&(k=e.skipSpaces(a),p=e.eMarks[o],k>=p?d=1:d=k-a,d>4&&(d=1),d<1&&(d=1),l=a-e.bMarks[o]+d,e.tokens.push({type:"list_item_open",lines:E=[n,0],level:e.level++}),s=e.blkIndent,c=e.tight,t=e.tShift[n],u=e.parentType,e.tShift[n]=k-e.bMarks[n],e.blkIndent=l,e.tight=!0,e.parentType="list",e.parser.tokenize(e,n,r,!0),(!e.tight||j)&&(se=!1),j=e.line-n>1&&e.isEmpty(e.line-1),e.blkIndent=s,e.tShift[n]=t,e.tight=c,e.parentType=u,e.tokens.push({type:"list_item_close",level:--e.level}),o=n=e.line,E[1]=o,k=e.bMarks[n],!(o>=r||e.isEmpty(o)||e.tShift[o]<e.blkIndent));){for(ue=!1,X=0,be=ce.length;X<be;X++)if(ce[X](e,o,r,!0)){ue=!0;break}if(ue)break;if(v){if(a=Se(e,o),a<0)break}else if(a=Me(e,o),a<0)break;if(_!==e.src.charCodeAt(a-1))break}return e.tokens.push({type:v?"ordered_list_close":"bullet_list_close",level:--e.level}),L[1]=o,e.line=o,se&&co(e,C),!0}function fo(e,n,r,i){var o,l,t,s,c,u=e.bMarks[n]+e.tShift[n],f=e.eMarks[n];if(u+4>f||e.src.charCodeAt(u)!==91||e.src.charCodeAt(u+1)!==94||e.level>=e.options.maxNesting)return!1;for(s=u+2;s<f;s++){if(e.src.charCodeAt(s)===32)return!1;if(e.src.charCodeAt(s)===93)break}return s===u+2||s+1>=f||e.src.charCodeAt(++s)!==58?!1:(i||(s++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),c=e.src.slice(u+2,s-2),e.env.footnotes.refs[":"+c]=-1,e.tokens.push({type:"footnote_reference_open",label:c,level:e.level++}),o=e.bMarks[n],l=e.tShift[n],t=e.parentType,e.tShift[n]=e.skipSpaces(s)-s,e.bMarks[n]=s,e.blkIndent+=4,e.parentType="footnote",e.tShift[n]<e.blkIndent&&(e.tShift[n]+=e.blkIndent,e.bMarks[n]-=e.blkIndent),e.parser.tokenize(e,n,r,!0),e.parentType=t,e.blkIndent-=4,e.tShift[n]=l,e.bMarks[n]=o,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0)}function ao(e,n,r,i){var o,l,t,s=e.bMarks[n]+e.tShift[n],c=e.eMarks[n];if(s>=c||(o=e.src.charCodeAt(s),o!==35||s>=c))return!1;for(l=1,o=e.src.charCodeAt(++s);o===35&&s<c&&l<=6;)l++,o=e.src.charCodeAt(++s);return l>6||s<c&&o!==32?!1:(i||(c=e.skipCharsBack(c,32,s),t=e.skipCharsBack(c,35,s),t>s&&e.src.charCodeAt(t-1)===32&&(c=t),e.line=n+1,e.tokens.push({type:"heading_open",hLevel:l,lines:[n,e.line],level:e.level}),s<c&&e.tokens.push({type:"inline",content:e.src.slice(s,c).trim(),level:e.level+1,lines:[n,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:l,level:e.level})),!0)}function ho(e,n,r){var i,o,l,t=n+1;return t>=r||e.tShift[t]<e.blkIndent||e.tShift[t]-e.blkIndent>3||(o=e.bMarks[t]+e.tShift[t],l=e.eMarks[t],o>=l)||(i=e.src.charCodeAt(o),i!==45&&i!==61)||(o=e.skipChars(o,i),o=e.skipSpaces(o),o<l)?!1:(o=e.bMarks[n]+e.tShift[n],e.line=t+1,e.tokens.push({type:"heading_open",hLevel:i===61?1:2,lines:[n,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(o,e.eMarks[n]).trim(),level:e.level+1,lines:[n,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:i===61?1:2,level:e.level}),!0)}var Qe={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){Qe[e]=!0});var po=/^<([a-zA-Z]{1,15})[\s\/>]/,_o=/^<\/([a-zA-Z]{1,15})[\s>]/;function vo(e){var n=e|32;return n>=97&&n<=122}function go(e,n,r,i){var o,l,t,s=e.bMarks[n],c=e.eMarks[n],u=e.tShift[n];if(s+=u,!e.options.html||u>3||s+2>=c||e.src.charCodeAt(s)!==60)return!1;if(o=e.src.charCodeAt(s+1),o===33||o===63){if(i)return!0}else if(o===47||vo(o)){if(o===47){if(l=e.src.slice(s,c).match(_o),!l)return!1}else if(l=e.src.slice(s,c).match(po),!l)return!1;if(Qe[l[1].toLowerCase()]!==!0)return!1;if(i)return!0}else return!1;for(t=n+1;t<e.lineMax&&!e.isEmpty(t);)t++;return e.line=t,e.tokens.push({type:"htmlblock",level:e.level,lines:[n,e.line],content:e.getLines(n,t,0,!0)}),!0}function pe(e,n){var r=e.bMarks[n]+e.blkIndent,i=e.eMarks[n];return e.src.substr(r,i-r)}function xo(e,n,r,i){var o,l,t,s,c,u,f,a,p,d,g;if(n+2>r||(c=n+1,e.tShift[c]<e.blkIndent)||(t=e.bMarks[c]+e.tShift[c],t>=e.eMarks[c])||(o=e.src.charCodeAt(t),o!==124&&o!==45&&o!==58)||(l=pe(e,n+1),!/^[-:| ]+$/.test(l))||(u=l.split("|"),u<=2))return!1;for(a=[],s=0;s<u.length;s++){if(p=u[s].trim(),!p){if(s===0||s===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;p.charCodeAt(p.length-1)===58?a.push(p.charCodeAt(0)===58?"center":"right"):p.charCodeAt(0)===58?a.push("left"):a.push("")}if(l=pe(e,n).trim(),l.indexOf("|")===-1||(u=l.replace(/^\||\|$/g,"").split("|"),a.length!==u.length))return!1;if(i)return!0;for(e.tokens.push({type:"table_open",lines:d=[n,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[n,n+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[n,n+1],level:e.level++}),s=0;s<u.length;s++)e.tokens.push({type:"th_open",align:a[s],lines:[n,n+1],level:e.level++}),e.tokens.push({type:"inline",content:u[s].trim(),lines:[n,n+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:g=[n+2,0],level:e.level++}),c=n+2;c<r&&!(e.tShift[c]<e.blkIndent||(l=pe(e,c).trim(),l.indexOf("|")===-1));c++){for(u=l.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),s=0;s<u.length;s++)e.tokens.push({type:"td_open",align:a[s],level:e.level++}),f=u[s].substring(u[s].charCodeAt(0)===124?1:0,u[s].charCodeAt(u[s].length-1)===124?u[s].length-1:u[s].length).trim(),e.tokens.push({type:"inline",content:f,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),d[1]=g[1]=c,e.line=c,!0}function ee(e,n){var r,i,o=e.bMarks[n]+e.tShift[n],l=e.eMarks[n];return o>=l||(i=e.src.charCodeAt(o++),i!==126&&i!==58)||(r=e.skipSpaces(o),o===r)||r>=l?-1:r}function ko(e,n){var r,i,o=e.level+2;for(r=n+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===o&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].tight=!0,e.tokens[r].tight=!0,r+=2)}function mo(e,n,r,i){var o,l,t,s,c,u,f,a,p,d,g,_,v,k;if(i)return e.ddIndent<0?!1:ee(e,n)>=0;if(f=n+1,e.isEmpty(f)&&++f>r||e.tShift[f]<e.blkIndent||(o=ee(e,f),o<0)||e.level>=e.options.maxNesting)return!1;u=e.tokens.length,e.tokens.push({type:"dl_open",lines:c=[n,0],level:e.level++}),t=n,l=f;e:for(;;){for(k=!0,v=!1,e.tokens.push({type:"dt_open",lines:[t,t],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(t,t+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[t,t],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:s=[f,0],level:e.level++}),_=e.tight,p=e.ddIndent,a=e.blkIndent,g=e.tShift[l],d=e.parentType,e.blkIndent=e.ddIndent=e.tShift[l]+2,e.tShift[l]=o-e.bMarks[l],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,l,r,!0),(!e.tight||v)&&(k=!1),v=e.line-l>1&&e.isEmpty(e.line-1),e.tShift[l]=g,e.tight=_,e.parentType=d,e.blkIndent=a,e.ddIndent=p,e.tokens.push({type:"dd_close",level:--e.level}),s[1]=f=e.line,f>=r||e.tShift[f]<e.blkIndent)break e;if(o=ee(e,f),o<0)break;l=f}if(f>=r||(t=f,e.isEmpty(t))||e.tShift[t]<e.blkIndent||(l=t+1,l>=r)||(e.isEmpty(l)&&l++,l>=r)||e.tShift[l]<e.blkIndent||(o=ee(e,l),o<0))break}return e.tokens.push({type:"dl_close",level:--e.level}),c[1]=f,e.line=f,k&&ko(e,u),!0}function bo(e,n){var r,i,o,l,t,s=n+1,c;if(r=e.lineMax,s<r&&!e.isEmpty(s)){for(c=e.parser.ruler.getRules("paragraph");s<r&&!e.isEmpty(s);s++)if(!(e.tShift[s]-e.blkIndent>3)){for(o=!1,l=0,t=c.length;l<t;l++)if(c[l](e,s,r,!0)){o=!0;break}if(o)break}}return i=e.getLines(n,s,e.blkIndent,!1).trim(),e.line=s,i.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[n,e.line],level:e.level}),e.tokens.push({type:"inline",content:i,level:e.level+1,lines:[n,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}var ne=[["code",io],["fences",lo,["paragraph","blockquote","list"]],["blockquote",to,["paragraph","blockquote","list"]],["hr",so,["paragraph","blockquote","list"]],["list",uo,["paragraph","blockquote"]],["footnote",fo,["paragraph"]],["heading",ao,["paragraph","blockquote"]],["lheading",ho],["htmlblock",go,["paragraph","blockquote"]],["table",xo,["paragraph"]],["deflist",mo,["paragraph"]],["paragraph",bo]];function ke(){this.ruler=new S;for(var e=0;e<ne.length;e++)this.ruler.push(ne[e][0],ne[e][1],{alt:(ne[e][2]||[]).slice()})}ke.prototype.tokenize=function(e,n,r){for(var i=this.ruler.getRules(""),o=i.length,l=n,t=!1,s,c;l<r&&(e.line=l=e.skipEmptyLines(l),!(l>=r||e.tShift[l]<e.blkIndent));){for(c=0;c<o&&(s=i[c](e,l,r,!1),!s);c++);if(e.tight=!t,e.isEmpty(e.line-1)&&(t=!0),l=e.line,l<r&&e.isEmpty(l)){if(t=!0,l++,l<r&&e.parentType==="list"&&e.isEmpty(l))break;e.line=l}}};var yo=/[\n\t]/g,wo=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,Ao=/\u00a0/g;ke.prototype.parse=function(e,n,r,i){var o,l=0,t=0;if(!e)return[];e=e.replace(Ao," "),e=e.replace(wo,`
`),e.indexOf("	")>=0&&(e=e.replace(yo,function(s,c){var u;return e.charCodeAt(c)===10?(l=c+1,t=0,s):(u="    ".slice((c-l-t)%4),t=c-l+1,u)})),o=new q(e,this,n,r,i),this.tokenize(o,o.line,o.lineMax)};function Co(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function Mo(e,n){for(var r=e.pos;r<e.posMax&&!Co(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}function So(e,n){var r,i,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;if(r=e.pending.length-1,i=e.posMax,!n)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){for(var l=r-2;l>=0;l--)if(e.pending.charCodeAt(l)!==32){e.pending=e.pending.substring(0,l+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(o++;o<i&&e.src.charCodeAt(o)===32;)o++;return e.pos=o,!0}var me=[];for(var Ee=0;Ee<256;Ee++)me.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){me[e.charCodeAt(0)]=1});function Eo(e,n){var r,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(r=e.src.charCodeAt(i),r<256&&me[r]!==0)return n||(e.pending+=e.src[i]),e.pos+=2,!0;if(r===10){for(n||e.push({type:"hardbreak",level:e.level}),i++;i<o&&e.src.charCodeAt(i)===32;)i++;return e.pos=i,!0}}return n||(e.pending+="\\"),e.pos++,!0}function To(e,n){var r,i,o,l,t,s=e.pos,c=e.src.charCodeAt(s);if(c!==96)return!1;for(r=s,s++,i=e.posMax;s<i&&e.src.charCodeAt(s)===96;)s++;for(o=e.src.slice(r,s),l=t=s;(l=e.src.indexOf("`",t))!==-1;){for(t=l+1;t<i&&e.src.charCodeAt(t)===96;)t++;if(t-l===o.length)return n||e.push({type:"code",content:e.src.slice(s,l).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=t,!0}return n||(e.pending+=o),e.pos+=o.length,!0}function $o(e,n){var r,i,o,l=e.posMax,t=e.pos,s,c;if(e.src.charCodeAt(t)!==126||n||t+4>=l||e.src.charCodeAt(t+1)!==126||e.level>=e.options.maxNesting||(s=t>0?e.src.charCodeAt(t-1):-1,c=e.src.charCodeAt(t+2),s===126)||c===126||c===32||c===10)return!1;for(i=t+2;i<l&&e.src.charCodeAt(i)===126;)i++;if(i>t+3)return e.pos+=i-t,n||(e.pending+=e.src.slice(t,i)),!0;for(e.pos=t+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===126&&e.src.charCodeAt(e.pos+1)===126&&(s=e.src.charCodeAt(e.pos-1),c=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,c!==126&&s!==126&&(s!==32&&s!==10?o--:c!==32&&c!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=t+2,n||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=t,!1)}function Io(e,n){var r,i,o,l=e.posMax,t=e.pos,s,c;if(e.src.charCodeAt(t)!==43||n||t+4>=l||e.src.charCodeAt(t+1)!==43||e.level>=e.options.maxNesting||(s=t>0?e.src.charCodeAt(t-1):-1,c=e.src.charCodeAt(t+2),s===43)||c===43||c===32||c===10)return!1;for(i=t+2;i<l&&e.src.charCodeAt(i)===43;)i++;if(i!==t+2)return e.pos+=i-t,n||(e.pending+=e.src.slice(t,i)),!0;for(e.pos=t+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===43&&e.src.charCodeAt(e.pos+1)===43&&(s=e.src.charCodeAt(e.pos-1),c=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,c!==43&&s!==43&&(s!==32&&s!==10?o--:c!==32&&c!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=t+2,n||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=t,!1)}function No(e,n){var r,i,o,l=e.posMax,t=e.pos,s,c;if(e.src.charCodeAt(t)!==61||n||t+4>=l||e.src.charCodeAt(t+1)!==61||e.level>=e.options.maxNesting||(s=t>0?e.src.charCodeAt(t-1):-1,c=e.src.charCodeAt(t+2),s===61)||c===61||c===32||c===10)return!1;for(i=t+2;i<l&&e.src.charCodeAt(i)===61;)i++;if(i!==t+2)return e.pos+=i-t,n||(e.pending+=e.src.slice(t,i)),!0;for(e.pos=t+2,o=1;e.pos+1<l;){if(e.src.charCodeAt(e.pos)===61&&e.src.charCodeAt(e.pos+1)===61&&(s=e.src.charCodeAt(e.pos-1),c=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1,c!==61&&s!==61&&(s!==32&&s!==10?o--:c!==32&&c!==10&&o++,o<=0))){r=!0;break}e.parser.skipToken(e)}return r?(e.posMax=e.pos,e.pos=t+2,n||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=t,!1)}function Te(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function $e(e,n){var r=n,i,o,l,t=!0,s=!0,c=e.posMax,u=e.src.charCodeAt(n);for(i=n>0?e.src.charCodeAt(n-1):-1;r<c&&e.src.charCodeAt(r)===u;)r++;return r>=c&&(t=!1),l=r-n,l>=4?t=s=!1:(o=r<c?e.src.charCodeAt(r):-1,(o===32||o===10)&&(t=!1),(i===32||i===10)&&(s=!1),u===95&&(Te(i)&&(t=!1),Te(o)&&(s=!1))),{can_open:t,can_close:s,delims:l}}function Do(e,n){var r,i,o,l,t,s,c,u=e.posMax,f=e.pos,a=e.src.charCodeAt(f);if(a!==95&&a!==42||n)return!1;if(c=$e(e,f),r=c.delims,!c.can_open)return e.pos+=r,n||(e.pending+=e.src.slice(f,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=f+r,s=[r];e.pos<u;){if(e.src.charCodeAt(e.pos)===a){if(c=$e(e,e.pos),i=c.delims,c.can_close){for(l=s.pop(),t=i;l!==t;){if(t<l){s.push(l-t);break}if(t-=l,s.length===0)break;e.pos+=l,l=s.pop()}if(s.length===0){r=l,o=!0;break}e.pos+=i;continue}c.can_open&&s.push(i),e.pos+=i;continue}e.parser.skipToken(e)}return o?(e.posMax=e.pos,e.pos=f+r,n||((r===2||r===3)&&e.push({type:"strong_open",level:e.level++}),(r===1||r===3)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(r===1||r===3)&&e.push({type:"em_close",level:--e.level}),(r===2||r===3)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+r,e.posMax=u,!0):(e.pos=f,!1)}var Ro=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function zo(e,n){var r,i,o=e.posMax,l=e.pos;if(e.src.charCodeAt(l)!==126||n||l+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=l+1;e.pos<o;){if(e.src.charCodeAt(e.pos)===126){r=!0;break}e.parser.skipToken(e)}return!r||l+1===e.pos||(i=e.src.slice(l+1,e.pos),i.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=l,!1):(e.posMax=e.pos,e.pos=l+1,n||e.push({type:"sub",level:e.level,content:i.replace(Ro,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}var Bo=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Oo(e,n){var r,i,o=e.posMax,l=e.pos;if(e.src.charCodeAt(l)!==94||n||l+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=l+1;e.pos<o;){if(e.src.charCodeAt(e.pos)===94){r=!0;break}e.parser.skipToken(e)}return!r||l+1===e.pos||(i=e.src.slice(l+1,e.pos),i.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=l,!1):(e.posMax=e.pos,e.pos=l+1,n||e.push({type:"sup",level:e.level,content:i.replace(Bo,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}function qo(e,n){var r,i,o,l,t,s,c,u,f=!1,a=e.pos,p=e.posMax,d=e.pos,g=e.src.charCodeAt(d);if(g===33&&(f=!0,g=e.src.charCodeAt(++d)),g!==91||e.level>=e.options.maxNesting||(r=d+1,i=W(e,d),i<0))return!1;if(s=i+1,s<p&&e.src.charCodeAt(s)===40){for(s++;s<p&&(u=e.src.charCodeAt(s),!(u!==32&&u!==10));s++);if(s>=p)return!1;for(d=s,Ve(e,s)?(l=e.linkContent,s=e.pos):l="",d=s;s<p&&(u=e.src.charCodeAt(s),!(u!==32&&u!==10));s++);if(s<p&&d!==s&&Ue(e,s))for(t=e.linkContent,s=e.pos;s<p&&(u=e.src.charCodeAt(s),!(u!==32&&u!==10));s++);else t="";if(s>=p||e.src.charCodeAt(s)!==41)return e.pos=a,!1;s++}else{if(e.linkLevel>0)return!1;for(;s<p&&(u=e.src.charCodeAt(s),!(u!==32&&u!==10));s++);if(s<p&&e.src.charCodeAt(s)===91&&(d=s+1,s=W(e,s),s>=0?o=e.src.slice(d,s++):s=d-1),o||(typeof o>"u"&&(s=i+1),o=e.src.slice(r,i)),c=e.env.references[Ze(o)],!c)return e.pos=a,!1;l=c.href,t=c.title}return n||(e.pos=r,e.posMax=i,f?e.push({type:"image",src:l,title:t,alt:e.src.substr(r,i-r),level:e.level}):(e.push({type:"link_open",href:l,title:t,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=s,e.posMax=p,!0}function Po(e,n){var r,i,o,l,t=e.posMax,s=e.pos;return s+2>=t||e.src.charCodeAt(s)!==94||e.src.charCodeAt(s+1)!==91||e.level>=e.options.maxNesting||(r=s+2,i=W(e,s+1),i<0)?!1:(n||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),o=e.env.footnotes.list.length,e.pos=r,e.posMax=i,e.push({type:"footnote_ref",id:o,level:e.level}),e.linkLevel++,l=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[o]={tokens:e.tokens.splice(l)},e.linkLevel--),e.pos=i+1,e.posMax=t,!0)}function Fo(e,n){var r,i,o,l,t=e.posMax,s=e.pos;if(s+3>t||!e.env.footnotes||!e.env.footnotes.refs||e.src.charCodeAt(s)!==91||e.src.charCodeAt(s+1)!==94||e.level>=e.options.maxNesting)return!1;for(i=s+2;i<t;i++){if(e.src.charCodeAt(i)===32||e.src.charCodeAt(i)===10)return!1;if(e.src.charCodeAt(i)===93)break}return i===s+2||i>=t||(i++,r=e.src.slice(s+2,i-1),typeof e.env.footnotes.refs[":"+r]>"u")?!1:(n||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+r]<0?(o=e.env.footnotes.list.length,e.env.footnotes.list[o]={label:r,count:0},e.env.footnotes.refs[":"+r]=o):o=e.env.footnotes.refs[":"+r],l=e.env.footnotes.list[o].count,e.env.footnotes.list[o].count++,e.push({type:"footnote_ref",id:o,subId:l,level:e.level})),e.pos=i,e.posMax=t,!0)}var Ho=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],jo=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Lo=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function Vo(e,n){var r,i,o,l,t,s=e.pos;return e.src.charCodeAt(s)!==60||(r=e.src.slice(s),r.indexOf(">")<0)?!1:(i=r.match(Lo),i?Ho.indexOf(i[1].toLowerCase())<0||(l=i[0].slice(1,-1),t=ge(l),!e.parser.validateLink(l))?!1:(n||(e.push({type:"link_open",href:t,level:e.level}),e.push({type:"text",content:l,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=i[0].length,!0):(o=r.match(jo),o?(l=o[0].slice(1,-1),t=ge("mailto:"+l),e.parser.validateLink(t)?(n||(e.push({type:"link_open",href:t,level:e.level}),e.push({type:"text",content:l,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=o[0].length,!0):!1):!1))}function le(e,n){return e=e.source,n=n||"",function r(i,o){return i?(o=o.source||o,e=e.replace(i,o),r):new RegExp(e,n)}}var Uo=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,Zo=/[^"'=<>`\x00-\x20]+/,Go=/'[^']*'/,Qo=/"[^"]*"/,Wo=le(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",Zo)("single_quoted",Go)("double_quoted",Qo)(),Ko=le(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",Uo)("attr_value",Wo)(),Xo=le(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",Ko)(),Yo=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,Jo=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,ei=/<[?].*?[?]>/,ni=/<![A-Z]+\s+[^>]*>/,ri=/<!\[CDATA\[[\s\S]*?\]\]>/,oi=le(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",Xo)("close_tag",Yo)("comment",Jo)("processing",ei)("declaration",ni)("cdata",ri)();function ii(e){var n=e|32;return n>=97&&n<=122}function li(e,n){var r,i,o,l=e.pos;return!e.options.html||(o=e.posMax,e.src.charCodeAt(l)!==60||l+2>=o)||(r=e.src.charCodeAt(l+1),r!==33&&r!==63&&r!==47&&!ii(r))||(i=e.src.slice(l).match(oi),!i)?!1:(n||e.push({type:"htmltag",content:e.src.slice(l,l+i[0].length),level:e.level}),e.pos+=i[0].length,!0)}var ti=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,si=/^&([a-z][a-z0-9]{1,31});/i;function ci(e,n){var r,i,o,l=e.pos,t=e.posMax;if(e.src.charCodeAt(l)!==38)return!1;if(l+1<t){if(r=e.src.charCodeAt(l+1),r===35){if(o=e.src.slice(l).match(ti),o)return n||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=je(i)?ve(i):ve(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(l).match(si),o){var s=Fe(o[1]);if(o[1]!==s)return n||(e.pending+=s),e.pos+=o[0].length,!0}}return n||(e.pending+="&"),e.pos++,!0}var de=[["text",Mo],["newline",So],["escape",Eo],["backticks",To],["del",$o],["ins",Io],["mark",No],["emphasis",Do],["sub",zo],["sup",Oo],["links",qo],["footnote_inline",Po],["footnote_ref",Fo],["autolink",Vo],["htmltag",li],["entity",ci]];function te(){this.ruler=new S;for(var e=0;e<de.length;e++)this.ruler.push(de[e][0],de[e][1]);this.validateLink=ui}te.prototype.skipToken=function(e){var n=this.ruler.getRules(""),r=n.length,i=e.pos,o,l;if((l=e.cacheGet(i))>0){e.pos=l;return}for(o=0;o<r;o++)if(n[o](e,!0)){e.cacheSet(i,e.pos);return}e.pos++,e.cacheSet(i,e.pos)};te.prototype.tokenize=function(e){for(var n=this.ruler.getRules(""),r=n.length,i=e.posMax,o,l;e.pos<i;){for(l=0;l<r&&(o=n[l](e,!1),!o);l++);if(o){if(e.pos>=i)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};te.prototype.parse=function(e,n,r,i){var o=new O(e,this,n,r,i);this.tokenize(o)};function ui(e){var n=["vbscript","javascript","file","data"],r=e.trim().toLowerCase();return r=z(r),!(r.indexOf(":")!==-1&&n.indexOf(r.split(":")[0])!==-1)}var fi={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},ai={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},hi={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},pi={default:fi,full:ai,commonmark:hi};function We(e,n,r){this.src=n,this.env=r,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function N(e,n){typeof e!="string"&&(n=e,e="default"),n&&n.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new te,this.block=new ke,this.core=new Ge,this.renderer=new xe,this.ruler=new S,this.options={},this.configure(pi[e]),this.set(n||{})}N.prototype.set=function(e){He(this.options,e)};N.prototype.configure=function(e){var n=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&n[r].ruler.enable(e.components[r].rules,!0)})};N.prototype.use=function(e,n){return e(this,n),this};N.prototype.parse=function(e,n){var r=new We(this,e,n);return this.core.process(r),r.tokens};N.prototype.render=function(e,n){return n=n||{},this.renderer.render(this.parse(e,n),this.options,n)};N.prototype.parseInline=function(e,n){var r=new We(this,e,n);return r.inlineMode=!0,this.core.process(r),r.tokens};N.prototype.renderInline=function(e,n){return n=n||{},this.renderer.render(this.parseInline(e,n),this.options,n)};const di={class:"preview d-flex flex-column"},_i=["innerHTML"],vi=I({__name:"Preview",setup(e){const{rawText:n,parsedText:r,isPreviewActive:i}=H(M()),o=oe(),l=new N({html:!0,breaks:!0,linkify:!0,typographer:!0}),t=s=>l.render(s);return on(()=>{const s=o.query.q;r.value=t(n.value),r.value=Ir(r.value,s||"")}),(s,c)=>(b(),y("div",di,[m("div",{class:re(["preview__area",{active:x(i)}]),innerHTML:x(r)},null,10,_i)]))}});const gi=$(vi,[["__scopeId","data-v-f670d77d"]]),xi=e=>(De("data-v-77636c76"),e=e(),Re(),e),ki={class:"delete__modal d-flex flex-column w-100 h-100 position-absolute"},mi=xi(()=>m("h4",{class:"weight-700"}," Delete this note? ",-1)),bi={class:"weight-400"},yi=I({__name:"DeleteModal",setup(e,{emit:n}){const{noteTitle:r,currentNoteId:i}=H(M()),{navigateCurrentNote:o,removeNote:l}=M(),t=c=>n(R.toggleDeleteModal,c),s=async()=>{await l(i.value),t(!1),await o("")};return(c,u)=>(b(),y("div",null,[m("div",ki,[mi,m("p",bi," Are you sure you want to delete the ‘"+U(x(r))+"’ note and its contents? This action cannot be reversed. ",1),m("button",{class:"w-100 weight-400",onClick:s}," Confirm & Delete ")]),m("div",{class:"modal-overlay",onClick:u[0]||(u[0]=f=>t(!1))})]))}});const wi=$(yi,[["__scopeId","data-v-77636c76"]]),Ai={class:"home d-flex"},Ci={class:"home__container"},Mi=I({__name:"index",setup(e){const{navigateCurrentNote:n,initStoreNotes:r,setCurrentNote:i}=M();tn({title:"MacOS Note App",meta:[{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"},{name:"description",content:"Home page of MacOS Note App"}]});const{isPreviewActive:o}=H(M()),{id:l}=K(),t=w(!0),s=w(!1),c=w(!1),u=a=>c.value=a,f=a=>o.value=a;return ln(async()=>{await r(),l.value?i(l.value):await n(""),s.value=!0}),(a,p)=>{const d=Wn,g=wr,_=Sr,v=gi,k=wi;return b(),y("div",Ai,[Z(D(d,{"is-load-data":x(s),onAddNewNote:p[0]||(p[0]=C=>f(!1)),onToggleDeleteModal:p[1]||(p[1]=C=>u(!0))},null,8,["is-load-data"]),[[fe,x(t)]]),m("div",Ci,[m("div",{class:re(["home__container-main d-flex flex-column",{main:!x(o)}])},[x(s)?(b(),G(g,{key:0,"date-state":!x(o)},null,8,["date-state"])):F("",!0),Z(D(_,null,null,512),[[fe,!x(o)]]),Z(D(v,null,null,512),[[fe,x(o)]])],2)]),x(c)?(b(),G(k,{key:0,onToggleDeleteModal:p[2]||(p[2]=C=>u(!1))})):F("",!0)])}}});const $i=$(Mi,[["__scopeId","data-v-21c358ee"]]);export{$i as default};
